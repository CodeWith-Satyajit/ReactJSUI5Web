{"ast":null,"code":"import { ThemingParameters } from '@ui5/webcomponents-react-base';\nimport React, { useEffect, useRef } from 'react';\nimport { createUseStyles } from 'react-jss';\nconst styles = {\n  subcomponent: {\n    position: 'absolute',\n    width: '100%',\n    '&:focus': {\n      outlineOffset: `calc(-1 * ${ThemingParameters.sapContent_FocusWidth})`,\n      outline: `${ThemingParameters.sapContent_FocusWidth} ${ThemingParameters.sapContent_FocusStyle} ${ThemingParameters.sapContent_FocusColor}`\n    }\n  }\n};\nconst useStyles = createUseStyles(styles, {\n  name: 'RowSubComponent'\n});\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport const RowSubComponent = props => {\n  var _a, _b;\n  const {\n    subComponentsHeight,\n    virtualRow,\n    dispatch,\n    row,\n    rowHeight,\n    children,\n    rows,\n    alwaysShowSubComponent\n  } = props;\n  const subComponentRef = useRef(null);\n  const classes = useStyles();\n  useEffect(() => {\n    var _a, _b;\n    const subComponentHeightObserver = new ResizeObserver(entries => {\n      entries.forEach(entry => {\n        var _a, _b;\n        const target = entry.target.getBoundingClientRect();\n        if (target) {\n          // Firefox implements `borderBoxSize` as a single content rect, rather than an array\n          const borderBoxSize = Array.isArray(entry.borderBoxSize) ? entry.borderBoxSize[0] : entry.borderBoxSize;\n          // Safari doesn't implement `borderBoxSize`\n          const subCompHeight = (_a = borderBoxSize === null || borderBoxSize === void 0 ? void 0 : borderBoxSize.blockSize) !== null && _a !== void 0 ? _a : target.height;\n          if (((_b = subComponentsHeight === null || subComponentsHeight === void 0 ? void 0 : subComponentsHeight[virtualRow.index]) === null || _b === void 0 ? void 0 : _b.subComponentHeight) !== subCompHeight && subCompHeight !== 0) {\n            // use most common sub-component height of first 10 sub-components as default height\n            if (alwaysShowSubComponent && subComponentsHeight && Object.keys(subComponentsHeight).length === 10) {\n              const objGroupedByHeight = Object.values(subComponentsHeight).reduce((acc, cur) => {\n                const count = acc === null || acc === void 0 ? void 0 : acc[cur.subComponentHeight];\n                if (typeof count === 'number') {\n                  return Object.assign(Object.assign({}, acc), {\n                    [cur.subComponentHeight]: count + 1\n                  });\n                }\n                return Object.assign(Object.assign({}, acc), {\n                  [cur.subComponentHeight]: 1\n                });\n              }, {});\n              const mostUsedHeight = Object.keys(objGroupedByHeight).reduce((a, b) => objGroupedByHeight[a] > objGroupedByHeight[b] ? a : b);\n              const estimatedHeights = rows.reduce((acc, cur, index) => {\n                acc[index] = {\n                  subComponentHeight: parseInt(mostUsedHeight),\n                  rowId: cur.id\n                };\n                return acc;\n              }, {});\n              dispatch({\n                type: 'SUB_COMPONENTS_HEIGHT',\n                payload: Object.assign(Object.assign({}, estimatedHeights), subComponentsHeight)\n              });\n            } else {\n              dispatch({\n                type: 'SUB_COMPONENTS_HEIGHT',\n                payload: Object.assign(Object.assign({}, subComponentsHeight), {\n                  [virtualRow.index]: {\n                    subComponentHeight: subCompHeight,\n                    rowId: row.id\n                  }\n                })\n              });\n            }\n          }\n        }\n      });\n    });\n    if ((_a = subComponentRef.current) === null || _a === void 0 ? void 0 : _a.firstChild) {\n      subComponentHeightObserver.observe((_b = subComponentRef.current) === null || _b === void 0 ? void 0 : _b.firstChild);\n    }\n    return () => {\n      subComponentHeightObserver.disconnect();\n    };\n  }, [(_a = subComponentRef.current) === null || _a === void 0 ? void 0 : _a.firstChild, subComponentsHeight, row.id, (_b = subComponentsHeight === null || subComponentsHeight === void 0 ? void 0 : subComponentsHeight[virtualRow.index]) === null || _b === void 0 ? void 0 : _b.subComponentHeight, virtualRow.index]);\n  return React.createElement(\"div\", {\n    ref: subComponentRef,\n    \"data-subcomponent\": true,\n    tabIndex: -1,\n    style: {\n      boxSizing: 'border-box',\n      transform: `translateY(${rowHeight}px)`\n    },\n    className: classes.subcomponent\n  }, children);\n};","map":{"version":3,"names":["ThemingParameters","React","useEffect","useRef","createUseStyles","styles","subcomponent","position","width","outlineOffset","sapContent_FocusWidth","outline","sapContent_FocusStyle","sapContent_FocusColor","useStyles","name","RowSubComponent","props","_a","_b","subComponentsHeight","virtualRow","dispatch","row","rowHeight","children","rows","alwaysShowSubComponent","subComponentRef","classes","subComponentHeightObserver","ResizeObserver","entries","forEach","entry","target","getBoundingClientRect","borderBoxSize","Array","isArray","subCompHeight","blockSize","height","index","subComponentHeight","Object","keys","length","objGroupedByHeight","values","reduce","acc","cur","count","assign","mostUsedHeight","a","b","estimatedHeights","parseInt","rowId","id","type","payload","current","firstChild","observe","disconnect","createElement","ref","tabIndex","style","boxSizing","transform","className"],"sources":["/home/user/projects/reactwithcap01/reactmodule01/node_modules/@ui5/webcomponents-react/dist/components/AnalyticalTable/TableBody/RowSubComponent.js"],"sourcesContent":["import { ThemingParameters } from '@ui5/webcomponents-react-base';\nimport React, { useEffect, useRef } from 'react';\nimport { createUseStyles } from 'react-jss';\nconst styles = {\n    subcomponent: {\n        position: 'absolute',\n        width: '100%',\n        '&:focus': {\n            outlineOffset: `calc(-1 * ${ThemingParameters.sapContent_FocusWidth})`,\n            outline: `${ThemingParameters.sapContent_FocusWidth} ${ThemingParameters.sapContent_FocusStyle} ${ThemingParameters.sapContent_FocusColor}`\n        }\n    }\n};\nconst useStyles = createUseStyles(styles, { name: 'RowSubComponent' });\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport const RowSubComponent = (props) => {\n    var _a, _b;\n    const { subComponentsHeight, virtualRow, dispatch, row, rowHeight, children, rows, alwaysShowSubComponent } = props;\n    const subComponentRef = useRef(null);\n    const classes = useStyles();\n    useEffect(() => {\n        var _a, _b;\n        const subComponentHeightObserver = new ResizeObserver((entries) => {\n            entries.forEach((entry) => {\n                var _a, _b;\n                const target = entry.target.getBoundingClientRect();\n                if (target) {\n                    // Firefox implements `borderBoxSize` as a single content rect, rather than an array\n                    const borderBoxSize = Array.isArray(entry.borderBoxSize) ? entry.borderBoxSize[0] : entry.borderBoxSize;\n                    // Safari doesn't implement `borderBoxSize`\n                    const subCompHeight = (_a = borderBoxSize === null || borderBoxSize === void 0 ? void 0 : borderBoxSize.blockSize) !== null && _a !== void 0 ? _a : target.height;\n                    if (((_b = subComponentsHeight === null || subComponentsHeight === void 0 ? void 0 : subComponentsHeight[virtualRow.index]) === null || _b === void 0 ? void 0 : _b.subComponentHeight) !== subCompHeight && subCompHeight !== 0) {\n                        // use most common sub-component height of first 10 sub-components as default height\n                        if (alwaysShowSubComponent && subComponentsHeight && Object.keys(subComponentsHeight).length === 10) {\n                            const objGroupedByHeight = Object.values(subComponentsHeight).reduce((acc, cur) => {\n                                const count = acc === null || acc === void 0 ? void 0 : acc[cur.subComponentHeight];\n                                if (typeof count === 'number') {\n                                    return Object.assign(Object.assign({}, acc), { [cur.subComponentHeight]: count + 1 });\n                                }\n                                return Object.assign(Object.assign({}, acc), { [cur.subComponentHeight]: 1 });\n                            }, {});\n                            const mostUsedHeight = Object.keys(objGroupedByHeight).reduce((a, b) => objGroupedByHeight[a] > objGroupedByHeight[b] ? a : b);\n                            const estimatedHeights = rows.reduce((acc, cur, index) => {\n                                acc[index] = { subComponentHeight: parseInt(mostUsedHeight), rowId: cur.id };\n                                return acc;\n                            }, {});\n                            dispatch({\n                                type: 'SUB_COMPONENTS_HEIGHT',\n                                payload: Object.assign(Object.assign({}, estimatedHeights), subComponentsHeight)\n                            });\n                        }\n                        else {\n                            dispatch({\n                                type: 'SUB_COMPONENTS_HEIGHT',\n                                payload: Object.assign(Object.assign({}, subComponentsHeight), { [virtualRow.index]: { subComponentHeight: subCompHeight, rowId: row.id } })\n                            });\n                        }\n                    }\n                }\n            });\n        });\n        if ((_a = subComponentRef.current) === null || _a === void 0 ? void 0 : _a.firstChild) {\n            subComponentHeightObserver.observe((_b = subComponentRef.current) === null || _b === void 0 ? void 0 : _b.firstChild);\n        }\n        return () => {\n            subComponentHeightObserver.disconnect();\n        };\n    }, [\n        (_a = subComponentRef.current) === null || _a === void 0 ? void 0 : _a.firstChild,\n        subComponentsHeight,\n        row.id,\n        (_b = subComponentsHeight === null || subComponentsHeight === void 0 ? void 0 : subComponentsHeight[virtualRow.index]) === null || _b === void 0 ? void 0 : _b.subComponentHeight,\n        virtualRow.index\n    ]);\n    return (React.createElement(\"div\", { ref: subComponentRef, \"data-subcomponent\": true, tabIndex: -1, style: {\n            boxSizing: 'border-box',\n            transform: `translateY(${rowHeight}px)`\n        }, className: classes.subcomponent }, children));\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}