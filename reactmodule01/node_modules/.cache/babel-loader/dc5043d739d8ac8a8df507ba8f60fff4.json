{"ast":null,"code":"import { enrichEventWithDetails } from '@ui5/webcomponents-react-base';\nimport { useEffect } from 'react';\nimport { TableSelectionMode } from '../../../enums';\nexport const useSelectionChangeCallback = hooks => {\n  hooks.useControlledState.push((state, _ref) => {\n    let {\n      instance\n    } = _ref;\n    const {\n      selectedRowPayload,\n      selectedRowIds\n    } = state;\n    const {\n      preFilteredRowsById: rowsById,\n      webComponentsReactProperties,\n      dispatch\n    } = instance;\n    useEffect(() => {\n      if (selectedRowPayload === null || selectedRowPayload === void 0 ? void 0 : selectedRowPayload.fired) {\n        const {\n          event: e,\n          row: selRow\n        } = selectedRowPayload;\n        const row = rowsById[selRow === null || selRow === void 0 ? void 0 : selRow.id];\n        if (row) {\n          const payload = {\n            row: row,\n            isSelected: row.isSelected,\n            selectedFlatRows: row.isSelected ? [row] : [],\n            allRowsSelected: false\n          };\n          if (webComponentsReactProperties.selectionMode === TableSelectionMode.MultiSelect) {\n            const selectedRowIdsArray = Object.entries(selectedRowIds).reduce((acc, _ref2) => {\n              let [key, val] = _ref2;\n              if (val) {\n                return [...acc, key];\n              }\n              return acc;\n            }, []);\n            const selectedRowIdsArrayMapped = selectedRowIdsArray.map(item => rowsById[item]);\n            payload.selectedFlatRows = selectedRowIdsArrayMapped;\n            if (selectedRowIdsArrayMapped.length === Object.keys(rowsById).length) {\n              payload.allRowsSelected = true;\n            }\n          }\n          dispatch({\n            type: 'SELECT_ROW_CB',\n            payload: {\n              event: e,\n              row,\n              fired: false\n            }\n          });\n          webComponentsReactProperties.onRowSelect(enrichEventWithDetails(e, payload));\n        }\n      }\n    }, [selectedRowPayload, rowsById, webComponentsReactProperties.selectionMode, selectedRowIds]);\n    return state;\n  });\n};\nuseSelectionChangeCallback.pluginName = 'useSelectionChangeCallback';","map":{"version":3,"names":["enrichEventWithDetails","useEffect","TableSelectionMode","useSelectionChangeCallback","hooks","useControlledState","push","state","instance","selectedRowPayload","selectedRowIds","preFilteredRowsById","rowsById","webComponentsReactProperties","dispatch","fired","event","e","row","selRow","id","payload","isSelected","selectedFlatRows","allRowsSelected","selectionMode","MultiSelect","selectedRowIdsArray","Object","entries","reduce","acc","key","val","selectedRowIdsArrayMapped","map","item","length","keys","type","onRowSelect","pluginName"],"sources":["/home/user/projects/reactwithcap01/reactmodule01/node_modules/@ui5/webcomponents-react/dist/components/AnalyticalTable/hooks/useSelectionChangeCallback.js"],"sourcesContent":["import { enrichEventWithDetails } from '@ui5/webcomponents-react-base';\nimport { useEffect } from 'react';\nimport { TableSelectionMode } from '../../../enums';\nexport const useSelectionChangeCallback = (hooks) => {\n    hooks.useControlledState.push((state, { instance }) => {\n        const { selectedRowPayload, selectedRowIds } = state;\n        const { preFilteredRowsById: rowsById, webComponentsReactProperties, dispatch } = instance;\n        useEffect(() => {\n            if (selectedRowPayload === null || selectedRowPayload === void 0 ? void 0 : selectedRowPayload.fired) {\n                const { event: e, row: selRow } = selectedRowPayload;\n                const row = rowsById[selRow === null || selRow === void 0 ? void 0 : selRow.id];\n                if (row) {\n                    const payload = {\n                        row: row,\n                        isSelected: row.isSelected,\n                        selectedFlatRows: row.isSelected ? [row] : [],\n                        allRowsSelected: false\n                    };\n                    if (webComponentsReactProperties.selectionMode === TableSelectionMode.MultiSelect) {\n                        const selectedRowIdsArray = Object.entries(selectedRowIds).reduce((acc, [key, val]) => {\n                            if (val) {\n                                return [...acc, key];\n                            }\n                            return acc;\n                        }, []);\n                        const selectedRowIdsArrayMapped = selectedRowIdsArray.map((item) => rowsById[item]);\n                        payload.selectedFlatRows = selectedRowIdsArrayMapped;\n                        if (selectedRowIdsArrayMapped.length === Object.keys(rowsById).length) {\n                            payload.allRowsSelected = true;\n                        }\n                    }\n                    dispatch({ type: 'SELECT_ROW_CB', payload: { event: e, row, fired: false } });\n                    webComponentsReactProperties.onRowSelect(enrichEventWithDetails(e, payload));\n                }\n            }\n        }, [selectedRowPayload, rowsById, webComponentsReactProperties.selectionMode, selectedRowIds]);\n        return state;\n    });\n};\nuseSelectionChangeCallback.pluginName = 'useSelectionChangeCallback';\n"],"mappings":"AAAA,SAASA,sBAAsB,QAAQ,+BAA+B;AACtE,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,kBAAkB,QAAQ,gBAAgB;AACnD,OAAO,MAAMC,0BAA0B,GAAIC,KAAK,IAAK;EACjDA,KAAK,CAACC,kBAAkB,CAACC,IAAI,CAAC,CAACC,KAAK,WAAmB;IAAA,IAAjB;MAAEC;IAAS,CAAC;IAC9C,MAAM;MAAEC,kBAAkB;MAAEC;IAAe,CAAC,GAAGH,KAAK;IACpD,MAAM;MAAEI,mBAAmB,EAAEC,QAAQ;MAAEC,4BAA4B;MAAEC;IAAS,CAAC,GAAGN,QAAQ;IAC1FP,SAAS,CAAC,MAAM;MACZ,IAAIQ,kBAAkB,KAAK,IAAI,IAAIA,kBAAkB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kBAAkB,CAACM,KAAK,EAAE;QAClG,MAAM;UAAEC,KAAK,EAAEC,CAAC;UAAEC,GAAG,EAAEC;QAAO,CAAC,GAAGV,kBAAkB;QACpD,MAAMS,GAAG,GAAGN,QAAQ,CAACO,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,MAAM,CAACC,EAAE,CAAC;QAC/E,IAAIF,GAAG,EAAE;UACL,MAAMG,OAAO,GAAG;YACZH,GAAG,EAAEA,GAAG;YACRI,UAAU,EAAEJ,GAAG,CAACI,UAAU;YAC1BC,gBAAgB,EAAEL,GAAG,CAACI,UAAU,GAAG,CAACJ,GAAG,CAAC,GAAG,EAAE;YAC7CM,eAAe,EAAE;UACrB,CAAC;UACD,IAAIX,4BAA4B,CAACY,aAAa,KAAKvB,kBAAkB,CAACwB,WAAW,EAAE;YAC/E,MAAMC,mBAAmB,GAAGC,MAAM,CAACC,OAAO,CAACnB,cAAc,CAAC,CAACoB,MAAM,CAAC,CAACC,GAAG,YAAiB;cAAA,IAAf,CAACC,GAAG,EAAEC,GAAG,CAAC;cAC9E,IAAIA,GAAG,EAAE;gBACL,OAAO,CAAC,GAAGF,GAAG,EAAEC,GAAG,CAAC;cACxB;cACA,OAAOD,GAAG;YACd,CAAC,EAAE,EAAE,CAAC;YACN,MAAMG,yBAAyB,GAAGP,mBAAmB,CAACQ,GAAG,CAAEC,IAAI,IAAKxB,QAAQ,CAACwB,IAAI,CAAC,CAAC;YACnFf,OAAO,CAACE,gBAAgB,GAAGW,yBAAyB;YACpD,IAAIA,yBAAyB,CAACG,MAAM,KAAKT,MAAM,CAACU,IAAI,CAAC1B,QAAQ,CAAC,CAACyB,MAAM,EAAE;cACnEhB,OAAO,CAACG,eAAe,GAAG,IAAI;YAClC;UACJ;UACAV,QAAQ,CAAC;YAAEyB,IAAI,EAAE,eAAe;YAAElB,OAAO,EAAE;cAAEL,KAAK,EAAEC,CAAC;cAAEC,GAAG;cAAEH,KAAK,EAAE;YAAM;UAAE,CAAC,CAAC;UAC7EF,4BAA4B,CAAC2B,WAAW,CAACxC,sBAAsB,CAACiB,CAAC,EAAEI,OAAO,CAAC,CAAC;QAChF;MACJ;IACJ,CAAC,EAAE,CAACZ,kBAAkB,EAAEG,QAAQ,EAAEC,4BAA4B,CAACY,aAAa,EAAEf,cAAc,CAAC,CAAC;IAC9F,OAAOH,KAAK;EAChB,CAAC,CAAC;AACN,CAAC;AACDJ,0BAA0B,CAACsC,UAAU,GAAG,4BAA4B"},"metadata":{},"sourceType":"module"}