{"ast":null,"code":"import { useCallback, useEffect, useRef, useState } from 'react';\nexport const useObserveHeights = (pageRef, topHeaderRef, headerContentRef, anchorBarRef, _ref, _ref2) => {\n  let [headerCollapsed, setHeaderCollapsed] = _ref;\n  let {\n    noHeader,\n    fixedHeader = false\n  } = _ref2;\n  var _a, _b;\n  const [topHeaderHeight, setTopHeaderHeight] = useState(0);\n  const [headerContentHeight, setHeaderContentHeight] = useState(0);\n  const [isIntersecting, setIsIntersecting] = useState(true);\n  const prevScrollTop = useRef(0);\n  const onScroll = useCallback(e => {\n    const scrollDown = prevScrollTop.current <= e.target.scrollTop;\n    prevScrollTop.current = e.target.scrollTop;\n    if (scrollDown && e.target.scrollTop >= headerContentHeight && !headerCollapsed) {\n      setIsIntersecting(false);\n      setHeaderCollapsed(true);\n    } else if (!scrollDown && e.target.scrollTop <= topHeaderHeight && headerCollapsed) {\n      setIsIntersecting(true);\n      setHeaderCollapsed(false);\n    }\n  }, [headerContentHeight, topHeaderHeight, headerCollapsed]);\n  useEffect(() => {\n    if (!fixedHeader) {\n      pageRef.current.addEventListener('scroll', onScroll);\n    }\n    return () => {\n      var _a;\n      (_a = pageRef.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('scroll', onScroll);\n    };\n  }, [onScroll, fixedHeader]);\n  // top header\n  useEffect(() => {\n    const headerContentResizeObserver = new ResizeObserver(_ref3 => {\n      let [header] = _ref3;\n      var _a;\n      // Firefox implements `borderBoxSize` as a single content rect, rather than an array\n      const borderBoxSize = Array.isArray(header.borderBoxSize) ? header.borderBoxSize[0] : header.borderBoxSize;\n      // Safari doesn't implement `borderBoxSize`\n      setTopHeaderHeight((_a = borderBoxSize === null || borderBoxSize === void 0 ? void 0 : borderBoxSize.blockSize) !== null && _a !== void 0 ? _a : header.target.getBoundingClientRect().height);\n    });\n    if (topHeaderRef === null || topHeaderRef === void 0 ? void 0 : topHeaderRef.current) {\n      headerContentResizeObserver.observe(topHeaderRef.current);\n    }\n    return () => {\n      headerContentResizeObserver.disconnect();\n    };\n  }, []);\n  // header content\n  useEffect(() => {\n    const headerContentResizeObserver = new ResizeObserver(_ref4 => {\n      let [headerContent] = _ref4;\n      var _a;\n      if (isIntersecting) {\n        // Firefox implements `borderBoxSize` as a single content rect, rather than an array\n        const borderBoxSize = Array.isArray(headerContent.borderBoxSize) ? headerContent.borderBoxSize[0] : headerContent.borderBoxSize;\n        // Safari doesn't implement `borderBoxSize`\n        setHeaderContentHeight((_a = borderBoxSize === null || borderBoxSize === void 0 ? void 0 : borderBoxSize.blockSize) !== null && _a !== void 0 ? _a : headerContent.target.getBoundingClientRect().height);\n      }\n    });\n    if (headerContentRef === null || headerContentRef === void 0 ? void 0 : headerContentRef.current) {\n      headerContentResizeObserver.observe(headerContentRef.current);\n    }\n    return () => {\n      headerContentResizeObserver.disconnect();\n    };\n  }, [isIntersecting]);\n  const anchorBarHeight = (_b = (_a = anchorBarRef === null || anchorBarRef === void 0 ? void 0 : anchorBarRef.current) === null || _a === void 0 ? void 0 : _a.offsetHeight) !== null && _b !== void 0 ? _b : 33;\n  const totalHeaderHeight = (noHeader ? 0 : topHeaderHeight + headerContentHeight) + anchorBarHeight;\n  return {\n    topHeaderHeight,\n    headerContentHeight,\n    anchorBarHeight,\n    totalHeaderHeight,\n    headerCollapsed\n  };\n};","map":{"version":3,"names":["useCallback","useEffect","useRef","useState","useObserveHeights","pageRef","topHeaderRef","headerContentRef","anchorBarRef","headerCollapsed","setHeaderCollapsed","noHeader","fixedHeader","_a","_b","topHeaderHeight","setTopHeaderHeight","headerContentHeight","setHeaderContentHeight","isIntersecting","setIsIntersecting","prevScrollTop","onScroll","e","scrollDown","current","target","scrollTop","addEventListener","removeEventListener","headerContentResizeObserver","ResizeObserver","header","borderBoxSize","Array","isArray","blockSize","getBoundingClientRect","height","observe","disconnect","headerContent","anchorBarHeight","offsetHeight","totalHeaderHeight"],"sources":["/home/user/projects/reactwithcap01/reactmodule01/node_modules/@ui5/webcomponents-react/dist/internal/useObserveHeights.js"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from 'react';\nexport const useObserveHeights = (pageRef, topHeaderRef, headerContentRef, anchorBarRef, [headerCollapsed, setHeaderCollapsed], { noHeader, fixedHeader = false }) => {\n    var _a, _b;\n    const [topHeaderHeight, setTopHeaderHeight] = useState(0);\n    const [headerContentHeight, setHeaderContentHeight] = useState(0);\n    const [isIntersecting, setIsIntersecting] = useState(true);\n    const prevScrollTop = useRef(0);\n    const onScroll = useCallback((e) => {\n        const scrollDown = prevScrollTop.current <= e.target.scrollTop;\n        prevScrollTop.current = e.target.scrollTop;\n        if (scrollDown && e.target.scrollTop >= headerContentHeight && !headerCollapsed) {\n            setIsIntersecting(false);\n            setHeaderCollapsed(true);\n        }\n        else if (!scrollDown && e.target.scrollTop <= topHeaderHeight && headerCollapsed) {\n            setIsIntersecting(true);\n            setHeaderCollapsed(false);\n        }\n    }, [headerContentHeight, topHeaderHeight, headerCollapsed]);\n    useEffect(() => {\n        if (!fixedHeader) {\n            pageRef.current.addEventListener('scroll', onScroll);\n        }\n        return () => {\n            var _a;\n            (_a = pageRef.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('scroll', onScroll);\n        };\n    }, [onScroll, fixedHeader]);\n    // top header\n    useEffect(() => {\n        const headerContentResizeObserver = new ResizeObserver(([header]) => {\n            var _a;\n            // Firefox implements `borderBoxSize` as a single content rect, rather than an array\n            const borderBoxSize = Array.isArray(header.borderBoxSize) ? header.borderBoxSize[0] : header.borderBoxSize;\n            // Safari doesn't implement `borderBoxSize`\n            setTopHeaderHeight((_a = borderBoxSize === null || borderBoxSize === void 0 ? void 0 : borderBoxSize.blockSize) !== null && _a !== void 0 ? _a : header.target.getBoundingClientRect().height);\n        });\n        if (topHeaderRef === null || topHeaderRef === void 0 ? void 0 : topHeaderRef.current) {\n            headerContentResizeObserver.observe(topHeaderRef.current);\n        }\n        return () => {\n            headerContentResizeObserver.disconnect();\n        };\n    }, []);\n    // header content\n    useEffect(() => {\n        const headerContentResizeObserver = new ResizeObserver(([headerContent]) => {\n            var _a;\n            if (isIntersecting) {\n                // Firefox implements `borderBoxSize` as a single content rect, rather than an array\n                const borderBoxSize = Array.isArray(headerContent.borderBoxSize)\n                    ? headerContent.borderBoxSize[0]\n                    : headerContent.borderBoxSize;\n                // Safari doesn't implement `borderBoxSize`\n                setHeaderContentHeight((_a = borderBoxSize === null || borderBoxSize === void 0 ? void 0 : borderBoxSize.blockSize) !== null && _a !== void 0 ? _a : headerContent.target.getBoundingClientRect().height);\n            }\n        });\n        if (headerContentRef === null || headerContentRef === void 0 ? void 0 : headerContentRef.current) {\n            headerContentResizeObserver.observe(headerContentRef.current);\n        }\n        return () => {\n            headerContentResizeObserver.disconnect();\n        };\n    }, [isIntersecting]);\n    const anchorBarHeight = (_b = (_a = anchorBarRef === null || anchorBarRef === void 0 ? void 0 : anchorBarRef.current) === null || _a === void 0 ? void 0 : _a.offsetHeight) !== null && _b !== void 0 ? _b : 33;\n    const totalHeaderHeight = (noHeader ? 0 : topHeaderHeight + headerContentHeight) + anchorBarHeight;\n    return { topHeaderHeight, headerContentHeight, anchorBarHeight, totalHeaderHeight, headerCollapsed };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}