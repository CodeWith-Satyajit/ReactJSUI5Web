{"ast":null,"code":"import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport { isShow, isDown, isUp, isSpace, isSpaceCtrl, isSpaceShift, isRight, isHome, isEnd, isTabNext, isTabPrevious, isUpShift, isDownShift, isLeftCtrl, isRightCtrl, isUpCtrl, isDownCtrl, isHomeCtrl, isEndCtrl, isCtrlA, isCtrlV, isDeleteShift, isInsertShift, isInsertCtrl, isBackSpace, isDelete, isEscape, isEnter } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport \"@ui5/webcomponents-icons/dist/slim-arrow-down.js\";\nimport { isPhone, isAndroid } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport \"@ui5/webcomponents-icons/dist/decline.js\";\nimport \"@ui5/webcomponents-icons/dist/multiselect-all.js\";\nimport \"@ui5/webcomponents-icons/dist/not-editable.js\";\nimport \"@ui5/webcomponents-icons/dist/error.js\";\nimport \"@ui5/webcomponents-icons/dist/alert.js\";\nimport \"@ui5/webcomponents-icons/dist/sys-enter-2.js\";\nimport \"@ui5/webcomponents-icons/dist/information.js\";\nimport { getFeature } from \"@ui5/webcomponents-base/dist/FeaturesRegistry.js\";\nimport { getEffectiveAriaLabelText } from \"@ui5/webcomponents-base/dist/util/AriaLabelHelper.js\";\nimport MultiComboBoxItem from \"./MultiComboBoxItem.js\";\nimport MultiComboBoxGroupItem from \"./MultiComboBoxGroupItem.js\";\nimport GroupHeaderListItem from \"./GroupHeaderListItem.js\";\nimport Tokenizer from \"./Tokenizer.js\";\nimport Token from \"./Token.js\";\nimport Icon from \"./Icon.js\";\nimport Popover from \"./Popover.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport StandardListItem from \"./StandardListItem.js\";\nimport ToggleButton from \"./ToggleButton.js\";\nimport * as Filters from \"./Filters.js\";\nimport Button from \"./Button.js\";\nimport { VALUE_STATE_SUCCESS, VALUE_STATE_ERROR, VALUE_STATE_WARNING, VALUE_STATE_INFORMATION, VALUE_STATE_TYPE_SUCCESS, VALUE_STATE_TYPE_INFORMATION, VALUE_STATE_TYPE_ERROR, VALUE_STATE_TYPE_WARNING, INPUT_SUGGESTIONS_TITLE, SELECT_OPTIONS, MULTICOMBOBOX_DIALOG_OK_BUTTON, VALUE_STATE_ERROR_ALREADY_SELECTED } from \"./generated/i18n/i18n-defaults.js\";\n\n// Templates\nimport MultiComboBoxTemplate from \"./generated/templates/MultiComboBoxTemplate.lit.js\";\nimport MultiComboBoxPopoverTemplate from \"./generated/templates/MultiComboBoxPopoverTemplate.lit.js\";\n\n// Styles\nimport styles from \"./generated/themes/MultiComboBox.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\nimport ValueStateMessageCss from \"./generated/themes/ValueStateMessage.css.js\";\nimport SuggestionsCss from \"./generated/themes/Suggestions.css.js\";\nimport MultiComboBoxPopover from \"./generated/themes/MultiComboBoxPopover.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n  tag: \"ui5-multi-combobox\",\n  languageAware: true,\n  managedSlots: true,\n  slots: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */{\n    /**\n     * Defines the component items.\n     *\n     * @type {sap.ui.webcomponents.main.IMultiComboBoxItem[]}\n     * @slot items\n     * @public\n     */\n    \"default\": {\n      propertyName: \"items\",\n      type: HTMLElement,\n      invalidateOnChildChange: true\n    },\n    /**\n    * Defines the icon to be displayed in the component.\n    *\n    * @type {sap.ui.webcomponents.main.IIcon}\n    * @slot\n    * @public\n    * @since 1.0.0-rc.9\n    */\n    icon: {\n      type: HTMLElement\n    },\n    /**\n     * Defines the value state message that will be displayed as pop up under the component.\n     * <br><br>\n     *\n     * <b>Note:</b> If not specified, a default text (in the respective language) will be displayed.\n     * <br>\n     * <b>Note:</b> The <code>valueStateMessage</code> would be displayed,\n     * when the component is in <code>Information</code>, <code>Warning</code> or <code>Error</code> value state.\n     * @type {HTMLElement[]}\n     * @since 1.0.0-rc.9\n     * @slot\n     * @public\n     */\n    valueStateMessage: {\n      type: HTMLElement\n    }\n  },\n  properties: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */{\n    /**\n     * Defines the value of the component.\n     * <br><br>\n     * <b>Note:</b> The property is updated upon typing.\n     *\n     * @type {string}\n     * @defaultvalue \"\"\n     * @formEvents change input\n     * @formProperty\n     * @public\n     */\n    value: {\n      type: String,\n      defaultValue: \"\"\n    },\n    /**\n     * Defines whether the value will be autcompleted to match an item\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     * @since 1.4.0\n     */\n    noTypeahead: {\n      type: Boolean\n    },\n    /**\n     * Defines a short hint intended to aid the user with data entry when the\n     * component has no value.\n     * @type {string}\n     * @defaultvalue \"\"\n     * @public\n     */\n    placeholder: {\n      type: String,\n      defaultValue: \"\"\n    },\n    /**\n     * Defines if the user input will be prevented, if no matching item has been found\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    allowCustomValues: {\n      type: Boolean\n    },\n    /**\n     * Defines whether the component is in disabled state.\n     * <br><br>\n     * <b>Note:</b> A disabled component is completely noninteractive.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    disabled: {\n      type: Boolean\n    },\n    /**\n     * Defines the value state of the component.\n     * <br><br>\n     * Available options are:\n     * <ul>\n     * <li><code>None</code></li>\n     * <li><code>Error</code></li>\n     * <li><code>Warning</code></li>\n     * <li><code>Success</code></li>\n     * <li><code>Information</code></li>\n     * </ul>\n     *\n     * @type {sap.ui.webcomponents.base.types.ValueState}\n     * @defaultvalue \"None\"\n     * @public\n     */\n    valueState: {\n      type: ValueState,\n      defaultValue: ValueState.None\n    },\n    /**\n     * Defines whether the component is read-only.\n     * <br><br>\n     * <b>Note:</b> A read-only component is not editable,\n     * but still provides visual feedback upon user interaction.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    readonly: {\n      type: Boolean\n    },\n    /**\n     * Defines whether the component is required.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     * @since 1.0.0-rc.5\n     */\n    required: {\n      type: Boolean\n    },\n    /**\n     * Defines the filter type of the component.\n     * Available options are: <code>StartsWithPerTerm</code>, <code>StartsWith</code>, <code>Contains</code> and <code>None</code>.\n     *\n     * @type {string}\n     * @defaultvalue \"StartsWithPerTerm\"\n     * @public\n     */\n    filter: {\n      type: String,\n      defaultValue: \"StartsWithPerTerm\"\n    },\n    /**\n     * Indicates whether the dropdown is open. True if the dropdown is open, false otherwise.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @readonly\n     * @since 1.0.0-rc.5\n     * @public\n     */\n    open: {\n      type: Boolean\n    },\n    /**\n     * Defines the accessible ARIA name of the component.\n     *\n     * @type {string}\n     * @defaultvalue: \"\"\n     * @public\n     * @since 1.4.0\n     */\n    accessibleName: {\n      type: String,\n      defaultValue: undefined\n    },\n    /**\n     * Receives id(or many ids) of the elements that label the component.\n     *\n     * @type {string}\n     * @defaultvalue \"\"\n     * @public\n     * @since 1.4.0\n     */\n    accessibleNameRef: {\n      type: String,\n      defaultValue: \"\"\n    },\n    _filteredItems: {\n      type: Object\n    },\n    filterSelected: {\n      type: Boolean\n    },\n    focused: {\n      type: Boolean\n    },\n    _tokenizerFocused: {\n      type: Boolean\n    },\n    _iconPressed: {\n      type: Boolean,\n      noAttribute: true\n    },\n    _inputWidth: {\n      type: Integer,\n      noAttribute: true\n    },\n    _listWidth: {\n      type: Integer,\n      defaultValue: 0,\n      noAttribute: true\n    },\n    _performingSelectionTwice: {\n      type: Boolean\n    }\n  },\n  events: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */{\n    /**\n     * Fired when the input operation has finished by pressing Enter or on focusout.\n     *\n     * @event\n     * @public\n     */\n    change: {},\n    /**\n     * Fired when the value of the component changes at each keystroke.\n     *\n     * @event\n     * @public\n     */\n    input: {},\n    /**\n     * Fired when the dropdown is opened or closed.\n     *\n     * @event sap.ui.webcomponents.main.MultiComboBox#open-change\n     * @since 1.0.0-rc.5\n     * @public\n     */\n    \"open-change\": {},\n    /**\n     * Fired when selection is changed by user interaction\n     * in <code>SingleSelect</code> and <code>MultiSelect</code> modes.\n     *\n     * @event sap.ui.webcomponents.main.MultiComboBox#selection-change\n     * @param {Array} items an array of the selected items.\n     * @public\n     */\n    \"selection-change\": {\n      detail: {\n        items: {\n          type: Array\n        }\n      }\n    }\n  }\n};\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>ui5-multi-combobox</code> component consists of a list box with items and a text field allowing the user to either type a value directly into the text field, or choose from the list of existing items.\n *\n * The drop-down list is used for selecting and filtering values, it enables users to select one or more options from a predefined list. The control provides an editable input field to filter the list, and a dropdown arrow to expand/collapse the list of available options.\n * The options in the list have checkboxes that permit multi-selection. Entered values are displayed as tokens.\n * <h3>Structure</h3>\n * The <code>ui5-multi-combobox</code> consists of the following elements:\n * <ul>\n * <li> Tokenizer - a list of tokens with selected options.\n * <li> Input field - displays the selected option/s as token/s. Users can type to filter the list.\n * <li> Drop-down arrow - expands\\collapses the option list.</li>\n * <li> Option list - the list of available options.</li>\n * </ul>\n * <h3>Keyboard Handling</h3>\n *\n * The <code>ui5-multi-combobox</code> provides advanced keyboard handling.\n *\n * <h4>Picker</h4>\n * If the <code>ui5-multi-combobox</code> is focused,\n * you can open or close the drop-down by pressing <code>F4</code>, <code>ALT+UP</code> or <code>ALT+DOWN</code> keys.\n * Once the drop-down is opened, you can use the <code>UP</code> and <code>DOWN</code> arrow keys\n * to navigate through the available options and select one by pressing the <code>Space</code> or <code>Enter</code> keys.\n * <br>\n *\n * <h4>Tokens</h4>\n * <ul>\n * <li> Left/Right arrow keys - moves the focus selection form the currently focused token to the previous/next one (if available). </li>\n * <li> Delete -  deletes the token and focuses the previous token. </li>\n * <li> Backspace -  deletes the token and focus the next token. </li>\n * </ul>\n *\n * <h3>CSS Shadow Parts</h3>\n *\n * <ui5-link target=\"_blank\" href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/::part\">CSS Shadow Parts</ui5-link> allow developers to style elements inside the Shadow DOM.\n * <br>\n * The <code>ui5-multi-combobox</code> exposes the following CSS Shadow Parts:\n * <ul>\n * <li>token-{index} - Used to style each token(where <code>token-0</code> corresponds to the first item)</li>\n * </ul>\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/MultiComboBox\";</code>\n *\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.MultiComboBox\n * @extends sap.ui.webcomponents.base.UI5Element\n * @tagname ui5-multi-combobox\n * @public\n * @appenddocs MultiComboBoxItem MultiComboBoxGroupItem\n * @since 0.11.0\n */\nclass MultiComboBox extends UI5Element {\n  static get metadata() {\n    return metadata;\n  }\n  static get render() {\n    return litRender;\n  }\n  static get template() {\n    return MultiComboBoxTemplate;\n  }\n  static get staticAreaTemplate() {\n    return MultiComboBoxPopoverTemplate;\n  }\n  static get styles() {\n    return styles;\n  }\n  static get staticAreaStyles() {\n    return [ResponsivePopoverCommonCss, ValueStateMessageCss, SuggestionsCss, MultiComboBoxPopover];\n  }\n  static get dependencies() {\n    return [MultiComboBoxItem, MultiComboBoxGroupItem, Tokenizer, Token, Icon, ResponsivePopover, Popover, List, StandardListItem, GroupHeaderListItem, ToggleButton, Button];\n  }\n  constructor() {\n    super();\n    this._filteredItems = [];\n    this.selectedValues = [];\n    this._inputLastValue = \"\";\n    this._valueBeforeOpen = \"\";\n    this._deleting = false;\n    this._validationTimeout = null;\n    this._handleResizeBound = this._handleResize.bind(this);\n    this.valueBeforeAutoComplete = \"\";\n    this.currentItemIdx = -1;\n    this.FormSupport = undefined;\n  }\n  onEnterDOM() {\n    ResizeHandler.register(this, this._handleResizeBound);\n  }\n  onExitDOM() {\n    ResizeHandler.deregister(this, this._handleResizeBound);\n  }\n  _handleResize() {\n    this._inputWidth = this.offsetWidth;\n  }\n  _inputChange() {\n    this.fireEvent(\"change\");\n  }\n  togglePopover() {\n    this.allItemsPopover.toggle(this);\n  }\n  togglePopoverByDropdownIcon() {\n    this._shouldFilterItems = false;\n    this.allItemsPopover.toggle(this);\n  }\n  _showFilteredItems() {\n    this.filterSelected = true;\n    this._showMorePressed = true;\n    this.togglePopover();\n  }\n  filterSelectedItems(event) {\n    this.filterSelected = event.target.pressed;\n    const selectedItems = this._filteredItems.filter(item => item.selected);\n    this.selectedItems = this.items.filter((item, idx, allItems) => MultiComboBox._groupItemFilter(item, ++idx, allItems, selectedItems) || selectedItems.indexOf(item) !== -1);\n  }\n  get _showAllItemsButtonPressed() {\n    return this.filterSelected;\n  }\n  get _inputDom() {\n    return this.shadowRoot.querySelector(\"#ui5-multi-combobox-input\");\n  }\n  _inputLiveChange(event) {\n    const input = event.target;\n    const value = input.value;\n    const filteredItems = this._filterItems(value);\n    const oldValueState = this.valueState;\n    this._shouldFilterItems = true;\n    if (this.filterSelected) {\n      this.filterSelected = false;\n    }\n    if (this._validationTimeout) {\n      input.value = this._inputLastValue;\n      return;\n    }\n    if (!filteredItems.length && value && !this.allowCustomValues) {\n      input.value = this.valueBeforeAutoComplete || this._inputLastValue;\n      this.valueState = \"Error\";\n      this._shouldAutocomplete = false;\n      this._resetValueState(oldValueState);\n      return;\n    }\n    this._inputLastValue = input.value;\n    this.value = input.value;\n    this._filteredItems = filteredItems;\n    if (!isPhone()) {\n      if (filteredItems.length === 0) {\n        this.allItemsPopover.close();\n      } else {\n        this.allItemsPopover.showAt(this);\n      }\n    }\n    this.fireEvent(\"input\");\n  }\n  _tokenDelete(event) {\n    const token = event.detail.ref;\n    const deletingItem = this.items.find(item => item._id === token.getAttribute(\"data-ui5-id\"));\n    deletingItem.selected = false;\n    this._deleting = true;\n    this.fireSelectionChange();\n  }\n  get _getPlaceholder() {\n    if (this._getSelectedItems().length) {\n      return \"\";\n    }\n    return this.placeholder;\n  }\n  _handleArrowLeft() {\n    const cursorPosition = this.getDomRef().querySelector(`input`).selectionStart;\n    const isTextSelected = this.getDomRef().querySelector(`input`).selectionEnd - cursorPosition > 0;\n    if (cursorPosition === 0 && !isTextSelected) {\n      this._tokenizer._focusLastToken();\n    }\n  }\n  _tokenizerFocusOut(event) {\n    this._tokenizerFocused = false;\n    const tokensCount = this._tokenizer.tokens.length;\n    const selectedTokens = this._selectedTokensCount;\n    const lastTokenBeingDeleted = tokensCount - 1 === 0 && this._deleting;\n    const allTokensAreBeingDeleted = selectedTokens === tokensCount && this._deleting;\n    if (!event.relatedTarget || !event.relatedTarget.hasAttribute(\"ui5-token\")) {\n      this._tokenizer.tokens.forEach(token => {\n        token.selected = false;\n      });\n      this._tokenizer.expanded = this._preventTokenizerToggle ? this._tokenizer.expanded : false;\n    }\n    if (allTokensAreBeingDeleted || lastTokenBeingDeleted) {\n      setTimeout(() => {\n        if (!isPhone()) {\n          this.shadowRoot.querySelector(\"input\").focus();\n        }\n        this._deleting = false;\n      }, 0);\n    }\n  }\n  _tokenizerFocusIn() {\n    this._tokenizerFocused = true;\n    this.focused = false;\n  }\n  async _onkeydown(event) {\n    const isArrowDownCtrl = isDownCtrl(event);\n    if (isShow(event) && !this.disabled) {\n      this._handleShow(event);\n      return;\n    }\n    if (isDownShift(event) || isUpShift(event)) {\n      event.preventDefault();\n      return;\n    }\n    if (isUp(event) || isDown(event) || isUpCtrl(event) || isArrowDownCtrl) {\n      this._handleArrowNavigation(event, isArrowDownCtrl);\n      return;\n    }\n\n    // CTRL + Arrow Down navigation is performed by the ItemNavigation module of the List,\n    // here we only implement the text selection of the selected item\n    if (isArrowDownCtrl && !this.allItemsPopover.opened) {\n      setTimeout(() => this._inputDom.setSelectionRange(0, this._inputDom.value.length), 0);\n    }\n    if (isLeftCtrl(event) || isRightCtrl(event)) {\n      this._handleArrowCtrl(event);\n      return;\n    }\n    if (isCtrlV(event) || isInsertShift(event)) {\n      this._handlePaste(event);\n      return;\n    }\n    if (isSpaceShift(event)) {\n      event.preventDefault();\n    }\n    this[`_handle${event.key}`] && this[`_handle${event.key}`](event);\n    this._shouldAutocomplete = !this.noTypeahead && !(isBackSpace(event) || isDelete(event) || isEscape(event) || isEnter(event));\n  }\n  async _handlePaste(event) {\n    const pastedText = await navigator.clipboard.readText();\n    if (!pastedText) {\n      return;\n    }\n    const separatedText = pastedText.split(/\\r\\n|\\r|\\n/g);\n    const matchingItems = this.items.filter(item => separatedText.indexOf(item.text) > -1 && !item.selected);\n    if (matchingItems.length) {\n      matchingItems.forEach(item => {\n        item.selected = true;\n        this.value = \"\";\n        this.fireSelectionChange();\n      });\n    } else {\n      this.value = pastedText;\n      this.fireEvent(\"input\");\n    }\n  }\n  _handleShow(event) {\n    const items = this.items;\n    const selectedItem = this._getSelectedItems()[0];\n    const focusedToken = this._tokenizer.tokens.find(token => token.focused);\n    const value = this.value;\n    const matchingItem = this.items.find(item => item.text.localeCompare(value, undefined, {\n      sensitivity: \"base\"\n    }) === 0);\n    event.preventDefault();\n    if (this.readonly) {\n      return;\n    }\n    this._isOpenedByKeyboard = true;\n    this._shouldFilterItems = false;\n    this._filteredItems = this.items;\n    this.togglePopover();\n    if (!focusedToken && matchingItem) {\n      this._itemToFocus = matchingItem;\n      return;\n    }\n    if (selectedItem && !focusedToken) {\n      this._itemToFocus = selectedItem;\n    } else if (focusedToken && event.target === focusedToken) {\n      this._itemToFocus = items.find(item => item.text === focusedToken.text);\n    } else {\n      this._itemToFocus = items[0];\n    }\n  }\n  _handlePageUp(event) {\n    event.preventDefault();\n  }\n  _handlePageDown(event) {\n    event.preventDefault();\n  }\n  _handleBackspace(event) {\n    if (event.target.value === \"\") {\n      event.preventDefault();\n      this._tokenizer._focusLastToken();\n    }\n  }\n  _handleEscape(event) {\n    const innerInput = this._innerInput;\n    const isAutoCompleted = innerInput.selectionEnd - innerInput.selectionStart > 0;\n    if (isAutoCompleted) {\n      this.value = this.valueBeforeAutoComplete;\n    }\n    if (!this.allowCustomValues || !this.open && this.allowCustomValues) {\n      this.value = this._lastValue;\n    }\n  }\n  _handleHome(event) {\n    const shouldFocusToken = this._isFocusInside && event.target.selectionStart === 0 && this._tokenizer.tokens.length > 0;\n    if (shouldFocusToken) {\n      event.preventDefault();\n      this._tokenizer.tokens[0].focus();\n    }\n  }\n  _handleEnd(event) {\n    const tokens = this._tokenizer.tokens;\n    const lastTokenIdx = tokens.length - 1;\n    const shouldFocusInput = event.target === tokens[lastTokenIdx] && tokens[lastTokenIdx] === this.shadowRoot.activeElement;\n    if (shouldFocusInput) {\n      event.preventDefault();\n      this._inputDom.focus();\n    }\n  }\n  _handleTab(event) {\n    this.allItemsPopover.close();\n  }\n  _handleSelectAll(event) {\n    const filteredItems = this._filteredItems;\n    const allItemsSelected = filteredItems.every(item => item.selected);\n    filteredItems.forEach(item => {\n      item.selected = !allItemsSelected;\n    });\n    this.fireSelectionChange();\n  }\n  _onValueStateKeydown(event) {\n    const isArrowDown = isDown(event);\n    const isArrowUp = isUp(event);\n    if (isTabNext(event) || isTabPrevious(event)) {\n      this._onItemTab(event);\n      return;\n    }\n    event.preventDefault();\n    if (isArrowDown || isDownCtrl(event)) {\n      this._handleArrowDown(event);\n    }\n    if (isArrowUp || isUpCtrl(event)) {\n      this._shouldAutocomplete = true;\n      this._inputDom.focus();\n    }\n  }\n  async _onItemKeydown(event) {\n    const isFirstItem = this.list.items[0] === event.target;\n    const isArrowUp = isUp(event) || isUpCtrl(event);\n    if (this.hasValueStateMessage && !this.valueStateHeader) {\n      await this._setValueStateHeader();\n    }\n    if (isTabNext(event) || isTabPrevious(event)) {\n      this._onItemTab(event);\n      return;\n    }\n    if (isHomeCtrl(event)) {\n      this.list._itemNavigation._handleHome(event);\n      this.list.items[this.list._itemNavigation._currentIndex].focus();\n    }\n    if (isEndCtrl(event)) {\n      this.list._itemNavigation._handleEnd(event);\n      this.list.items[this.list._itemNavigation._currentIndex].focus();\n    }\n    event.preventDefault();\n    if (isDownShift(event) || isUpShift(event)) {\n      this._handleItemRangeSelection(event);\n      return;\n    }\n    if (isUpCtrl(event) && !isFirstItem) {\n      this.list._itemNavigation._handleUp(event);\n      this.list.items[this.list._itemNavigation._currentIndex].focus();\n    }\n    if (isDownCtrl(event)) {\n      this.list._itemNavigation._handleDown(event);\n      this.list.items[this.list._itemNavigation._currentIndex].focus();\n    }\n    if (isShow(event)) {\n      this.togglePopover();\n    }\n    if (isCtrlA(event)) {\n      this._handleSelectAll(event);\n      return;\n    }\n    if ((isArrowUp && isFirstItem || isHome(event)) && this.valueStateHeader) {\n      this.valueStateHeader.focus();\n    }\n    if (!this.valueStateHeader && isFirstItem && isArrowUp) {\n      this._inputDom.focus();\n      this._shouldAutocomplete = true;\n    }\n  }\n  _handleArrowCtrl(event) {\n    const input = this._inputDom;\n    const isArrowLeft = isLeftCtrl(event);\n    if (isArrowLeft && input.selectionStart === 0 && input.selectionEnd === 0) {\n      event.preventDefault();\n    }\n    if (isArrowLeft && input.selectionEnd - input.selectionStart > 0) {\n      input.setSelectionRange(0, 0);\n    }\n  }\n  _onItemTab(event) {\n    this._inputDom.focus();\n    this.allItemsPopover.close();\n  }\n  async _handleArrowNavigation(event, isDownControl) {\n    const isArrowDown = isDownControl || isDown(event);\n    const hasSuggestions = this.items.length;\n    const isOpen = this.allItemsPopover.opened;\n    event.preventDefault();\n    if (this.hasValueStateMessage && !this.valueStateHeader) {\n      await this._setValueStateHeader();\n    }\n    if (isArrowDown && isOpen && this.valueStateHeader) {\n      this.value = this.valueBeforeAutoComplete || this.value;\n      this.valueStateHeader.focus();\n      return;\n    }\n    if (isArrowDown && hasSuggestions) {\n      this._handleArrowDown(event);\n    }\n    if (!isArrowDown && !isOpen && !this.readonly) {\n      this._navigateToPrevItem();\n    }\n  }\n  _handleArrowDown(event) {\n    const isOpen = this.allItemsPopover.opened;\n    const firstListItem = this.list.items[0];\n    if (isOpen) {\n      this.list._itemNavigation.setCurrentItem(firstListItem);\n      this.value = this.valueBeforeAutoComplete || this.value;\n      firstListItem.focus();\n    } else if (!this.readonly) {\n      this._navigateToNextItem();\n    }\n  }\n  _handleItemRangeSelection(event) {\n    const items = this.items;\n    const listItems = this.list.items;\n    const currentItemIdx = listItems.indexOf(event.target);\n    const nextItemIdx = currentItemIdx + 1;\n    const prevItemIdx = currentItemIdx - 1;\n    if (isDownShift(event) && items[nextItemIdx]) {\n      items[nextItemIdx].selected = items[currentItemIdx].selected;\n      items[nextItemIdx].focus();\n    }\n    if (isUpShift(event) && items[prevItemIdx]) {\n      items[prevItemIdx].selected = items[currentItemIdx].selected;\n      items[prevItemIdx].focus();\n    }\n    this.fireSelectionChange();\n  }\n  _navigateToNextItem() {\n    const items = this.items;\n    const itemsCount = items.length;\n    const previousItemIdx = this.currentItemIdx;\n    if (previousItemIdx > -1 && items[previousItemIdx].text !== this.value) {\n      this.currentItemIdx = -1;\n    }\n    if (previousItemIdx >= itemsCount - 1) {\n      return;\n    }\n    let currentItem = this.items[++this.currentItemIdx];\n    while (this.currentItemIdx < itemsCount - 1 && currentItem.selected || currentItem.isGroupItem) {\n      currentItem = this.items[++this.currentItemIdx];\n    }\n    if (currentItem.selected === true || currentItem.isGroupItem) {\n      this.currentItemIdx = previousItemIdx;\n      return;\n    }\n    this.value = currentItem.text;\n    this._innerInput.value = currentItem.text;\n    this._innerInput.setSelectionRange(0, currentItem.text.length);\n  }\n  _navigateToPrevItem() {\n    const items = this.items;\n    let previousItemIdx = this.currentItemIdx;\n    if (!this.value && previousItemIdx !== -1 || previousItemIdx !== -1 && this.value && this.value !== items[previousItemIdx].text) {\n      previousItemIdx = -1;\n    }\n    if (previousItemIdx === -1) {\n      this.currentItemIdx = items.length;\n    }\n    if (previousItemIdx === 0) {\n      this.currentItemIdx = 0;\n      return;\n    }\n    let currentItem = this.items[--this.currentItemIdx];\n    while (currentItem && this.currentItemIdx > 0 && (currentItem.selected || currentItem.isGroupItem)) {\n      currentItem = this.items[--this.currentItemIdx];\n    }\n    if (!currentItem) {\n      return;\n    }\n    if (currentItem.selected || currentItem.isGroupItem) {\n      this.currentItemIdx = previousItemIdx;\n      return;\n    }\n    this.value = currentItem.text;\n    this._innerInput.value = currentItem.text;\n    this._innerInput.setSelectionRange(0, currentItem.text.length);\n  }\n  _handleEnter() {\n    const lowerCaseValue = this.value.toLowerCase();\n    const matchingItem = this.items.find(item => item.text.toLowerCase() === lowerCaseValue);\n    const oldValueState = this.valueState;\n    const innerInput = this._innerInput;\n    if (this.FormSupport) {\n      this.FormSupport.triggerFormSubmit(this);\n    }\n    if (matchingItem) {\n      if (matchingItem.selected) {\n        if (this._validationTimeout) {\n          return;\n        }\n        this.valueState = \"Error\";\n        this._performingSelectionTwice = true;\n        this._resetValueState(oldValueState, () => {\n          this._performingSelectionTwice = false;\n        });\n      } else {\n        matchingItem.selected = true;\n        this.value = \"\";\n        this.fireSelectionChange();\n      }\n      innerInput.setSelectionRange(matchingItem.text.length, matchingItem.text.length);\n      this.allItemsPopover.close();\n    }\n  }\n  _resetValueState(valueState, callback) {\n    this._validationTimeout = setTimeout(() => {\n      this.valueState = valueState;\n      this._validationTimeout = null;\n      callback && callback();\n    }, 2000);\n  }\n  _onTokenizerKeydown(event) {\n    const isCtrl = !!(event.metaKey || event.ctrlKey);\n    if (isRight(event)) {\n      const lastTokenIndex = this._tokenizer.tokens.length - this._tokenizer.overflownTokens.length - 1;\n      if (event.target === this._tokenizer.tokens[lastTokenIndex]) {\n        setTimeout(() => {\n          this.shadowRoot.querySelector(\"input\").focus();\n        }, 0);\n      }\n    }\n    if (isCtrl && [\"c\", \"x\"].includes(event.key.toLowerCase()) || isDeleteShift(event) || isInsertCtrl(event)) {\n      event.preventDefault();\n      const isCut = event.key.toLowerCase() === \"x\" || isDeleteShift(event);\n      const selectedTokens = this._tokenizer.tokens.filter(token => token.selected);\n      if (isCut) {\n        const cutResult = this._tokenizer._fillClipboard(\"cut\", selectedTokens);\n        selectedTokens.forEach(token => {\n          this._tokenizer._tokenKeyboardDelete(event, token);\n        });\n        this.focus();\n        return cutResult;\n      }\n      return this._tokenizer._fillClipboard(\"copy\", selectedTokens);\n    }\n    if (isCtrlV(event) || isInsertShift(event)) {\n      this._handlePaste(event);\n    }\n    if (isHome(event)) {\n      this._handleHome(event);\n    }\n    if (isEnd(event)) {\n      this._handleEnd(event);\n    }\n    if (isShow(event) && !this.readonly && !this.disabled) {\n      this._preventTokenizerToggle = true;\n      this._handleShow(event);\n    }\n  }\n  _filterItems(str) {\n    const itemsToFilter = this.items.filter(item => !item.isGroupItem);\n    const filteredItems = (Filters[this.filter] || Filters.StartsWithPerTerm)(str, itemsToFilter, \"text\");\n\n    // Return the filtered items and their group items\n    return this.items.filter((item, idx, allItems) => MultiComboBox._groupItemFilter(item, ++idx, allItems, filteredItems) || filteredItems.indexOf(item) !== -1);\n  }\n\n  /**\n   * Returns true if the group header should be shown (if there is a filtered suggestion item for this group item)\n   *\n   * @private\n   */\n  static _groupItemFilter(item, idx, allItems, filteredItems) {\n    if (item.isGroupItem) {\n      let groupHasFilteredItems;\n      while (allItems[idx] && !allItems[idx].isGroupItem && !groupHasFilteredItems) {\n        groupHasFilteredItems = filteredItems.indexOf(allItems[idx]) !== -1;\n        idx++;\n      }\n      return groupHasFilteredItems;\n    }\n  }\n  _afterOpenPicker() {\n    this._toggle();\n    if (!isPhone() && !this._isOpenedByKeyboard) {\n      this._innerInput.focus();\n    } else if (this._isOpenedByKeyboard) {\n      this._itemToFocus.focus();\n    } else {\n      this.allItemsPopover.focus();\n    }\n    this._isOpenedByKeyboard = false;\n  }\n  _toggle() {\n    this.open = !this.open;\n    this.fireEvent(\"open-change\");\n  }\n  _getSelectedItems() {\n    // Angular 2 way data binding\n    this.selectedValues = this.items.filter(item => item.selected);\n    return this.selectedValues;\n  }\n  _listSelectionChange(event) {\n    // sync list items and cb items\n    this.syncItems(event.target.items);\n\n    // don't call selection change right after selection as user can cancel it on phone\n    if (!isPhone()) {\n      this.fireSelectionChange();\n    }\n    if (!event.detail.selectionComponentPressed && !isSpace(event.detail) && !isSpaceCtrl(event.detail)) {\n      this.allItemsPopover.close();\n      this.value = \"\";\n\n      // if the item (not checkbox) is clicked, call the selection change\n      if (isPhone()) {\n        this.fireSelectionChange();\n      }\n      this.fireEvent(\"input\");\n    }\n    this.value = this.valueBeforeAutoComplete || \"\";\n  }\n  syncItems(listItems) {\n    listItems.forEach(item => {\n      this.items.forEach(mcbItem => {\n        if (mcbItem._id === item.getAttribute(\"data-ui5-token-id\")) {\n          mcbItem.selected = item.selected;\n        }\n      });\n    });\n  }\n  fireSelectionChange() {\n    this.fireEvent(\"selection-change\", {\n      items: this._getSelectedItems()\n    });\n    // Angular 2 way data binding\n    this.fireEvent(\"value-changed\");\n  }\n  async _getRespPopover() {\n    const staticAreaItem = await this.getStaticAreaItemDomRef();\n    this.allItemsPopover = staticAreaItem.querySelector(`.ui5-multi-combobox-all-items-responsive-popover`);\n  }\n  async _getList() {\n    const staticAreaItem = await this.getStaticAreaItemDomRef();\n    this.list = staticAreaItem.querySelector(\".ui5-multi-combobox-all-items-list\");\n  }\n  _click(event) {\n    if (isPhone() && !this.readonly && !this._showMorePressed && !this._deleting) {\n      this.allItemsPopover.showAt(this);\n    }\n    this._showMorePressed = false;\n  }\n  _afterClosePicker() {\n    // close device's keyboard and prevent further typing\n    if (isPhone()) {\n      this.blur();\n    }\n    this._toggle();\n    this._iconPressed = false;\n    this._preventTokenizerToggle = false;\n    this.filterSelected = false;\n  }\n  _beforeOpen() {\n    this._itemsBeforeOpen = this.items.map(item => {\n      return {\n        ref: item,\n        selected: item.selected\n      };\n    });\n    this._valueBeforeOpen = this.value;\n    if (this.filterSelected) {\n      const selectedItems = this._filteredItems.filter(item => item.selected);\n      this.selectedItems = this.items.filter((item, idx, allItems) => MultiComboBox._groupItemFilter(item, ++idx, allItems, selectedItems) || selectedItems.indexOf(item) !== -1);\n    }\n  }\n  _handleTypeAhead(item, filterValue) {\n    if (!item) {\n      return;\n    }\n    const value = item.text;\n    const innerInput = this._innerInput;\n    filterValue = filterValue || \"\";\n    this.value = value;\n    innerInput.value = value;\n    innerInput.setSelectionRange(filterValue.length, value.length);\n    this._shouldAutocomplete = false;\n  }\n  _getFirstMatchingItem(current) {\n    if (!this.items.length) {\n      return;\n    }\n    const matchingItems = this._startsWithMatchingItems(current).filter(item => !item.isGroupItem && !item.selected);\n    if (matchingItems.length) {\n      return matchingItems[0];\n    }\n  }\n  _startsWithMatchingItems(str) {\n    return Filters.StartsWith(str, this.items, \"text\");\n  }\n  onBeforeRendering() {\n    const input = this._innerInput;\n    const autoCompletedChars = input && input.selectionEnd - input.selectionStart;\n    const value = input && input.value;\n    this.FormSupport = getFeature(\"FormSupport\");\n    this._inputLastValue = value;\n    if (input && !input.value) {\n      this.valueBeforeAutoComplete = \"\";\n      this._filteredItems = this.items;\n    }\n    this.items.forEach(item => {\n      item._getRealDomRef = () => this.allItemsPopover.querySelector(`*[data-ui5-stable=${item.stableDomRef}]`);\n    });\n    if (!input || !value) {\n      return;\n    }\n\n    // Typehead causes issues on Android devices, so we disable it for now\n    // If there is already a selection the autocomplete has already been performed\n    if (this._shouldAutocomplete && !isAndroid() && !autoCompletedChars) {\n      const item = this._getFirstMatchingItem(value);\n\n      // Keep the original typed in text intact\n      this.valueBeforeAutoComplete = value;\n      this._handleTypeAhead(item, value);\n    }\n    if (this._shouldFilterItems) {\n      this._filteredItems = this._filterItems(this._shouldAutocomplete || !!autoCompletedChars ? this.valueBeforeAutoComplete : value);\n    } else {\n      this._filteredItems = this.items;\n    }\n  }\n  async onAfterRendering() {\n    await this._getRespPopover();\n    await this._getList();\n    this.toggle(this.shouldDisplayOnlyValueStateMessage);\n    this.storeResponsivePopoverWidth();\n    this._deleting = false;\n  }\n  get _isPhone() {\n    return isPhone();\n  }\n  _onIconMousedown() {\n    this._iconPressed = true;\n  }\n  storeResponsivePopoverWidth() {\n    if (this.open && !this._listWidth) {\n      this._listWidth = this.list.offsetWidth;\n    }\n  }\n  toggle(isToggled) {\n    if (isToggled && !this.open) {\n      this.openPopover();\n    } else {\n      this.closePopover();\n    }\n  }\n  handleCancel() {\n    this._itemsBeforeOpen.forEach(item => {\n      item.ref.selected = item.selected;\n    });\n    this.togglePopover();\n    this.value = this._valueBeforeOpen;\n  }\n  handleOK() {\n    if (isPhone()) {\n      this.fireSelectionChange();\n    }\n    this.togglePopover();\n  }\n  async openPopover() {\n    const popover = await this._getPopover();\n    if (popover) {\n      popover.showAt(this);\n    }\n  }\n  _forwardFocusToInner() {\n    this._innerInput.focus();\n  }\n  async closePopover() {\n    const popover = await this._getPopover();\n    popover && popover.close();\n  }\n  async _getPopover() {\n    const staticAreaItem = await this.getStaticAreaItemDomRef();\n    return staticAreaItem.querySelector(\"[ui5-popover]\");\n  }\n  async _getResponsivePopover() {\n    const staticAreaItem = await this.getStaticAreaItemDomRef();\n    return staticAreaItem.querySelector(\"[ui5-responsive-popover]\");\n  }\n  async _setValueStateHeader() {\n    const responsivePopover = await this._getResponsivePopover();\n    this.valueStateHeader = responsivePopover.querySelector(\"div.ui5-responsive-popover-header.ui5-valuestatemessage-root\");\n  }\n  get _tokenizer() {\n    return this.shadowRoot.querySelector(\"[ui5-tokenizer]\");\n  }\n  inputFocusIn(event) {\n    if (!isPhone() || this.readonly) {\n      this.focused = true;\n      this._tokenizer.expanded = true;\n    } else {\n      this._innerInput.blur();\n    }\n    if (!isPhone() && (event.relatedTarget && event.relatedTarget.tagName !== \"UI5-STATIC-AREA-ITEM\" || !event.relatedTarget)) {\n      this._innerInput.setSelectionRange(0, this.value.length);\n    }\n    this._lastValue = this.value;\n    this.valueBeforeAutoComplete = \"\";\n  }\n  inputFocusOut(event) {\n    if (!this.shadowRoot.contains(event.relatedTarget) && !this._deleting) {\n      this.focused = false;\n      this._tokenizer.expanded = this.open;\n      // remove the value if user focus out the input and focus is not going in the popover\n      if (!isPhone() && !this.allowCustomValues && this.staticAreaItem !== event.relatedTarget) {\n        this.value = \"\";\n      }\n    }\n  }\n  get editable() {\n    return !this.readonly;\n  }\n  get _isFocusInside() {\n    return !isPhone() && (this.focused || this._tokenizerFocused);\n  }\n  get selectedItemsListMode() {\n    return this.readonly ? \"None\" : \"MultiSelect\";\n  }\n  get _listItemsType() {\n    return this.readonly ? \"Inactive\" : \"Active\";\n  }\n  get hasValueState() {\n    return this.valueState !== ValueState.None;\n  }\n  get hasValueStateMessage() {\n    return this.hasValueState && this.valueState !== ValueState.Success;\n  }\n  get ariaValueStateHiddenText() {\n    if (!this.hasValueState) {\n      return;\n    }\n    if (this.shouldDisplayDefaultValueStateMessage) {\n      return `${this.valueStateTypeMappings[this.valueState]} ${this.valueStateDefaultText}`;\n    }\n    return `${this.valueStateTypeMappings[this.valueState]}`.concat(\" \", this.valueStateMessageText.map(el => el.textContent).join(\" \"));\n  }\n  get valueStateDefaultText() {\n    let key = this.valueState;\n    if (this._performingSelectionTwice) {\n      key = \"Error_Selection\";\n    }\n    return this.valueStateTextMappings[key];\n  }\n  get valueStateTextId() {\n    return this.hasValueState ? `${this._id}-valueStateDesc` : undefined;\n  }\n  get valueStateMessageText() {\n    return this.getSlottedNodes(\"valueStateMessage\").map(el => el.cloneNode(true));\n  }\n  get ariaLabelText() {\n    return getEffectiveAriaLabelText(this);\n  }\n\n  /**\n   * This method is relevant for sap_horizon theme only\n   */\n  get _valueStateMessageIcon() {\n    const iconPerValueState = {\n      Error: \"error\",\n      Warning: \"alert\",\n      Success: \"sys-enter-2\",\n      Information: \"information\"\n    };\n    return this.valueState !== ValueState.None ? iconPerValueState[this.valueState] : \"\";\n  }\n  get _tokensCountText() {\n    if (!this._tokenizer) {\n      return;\n    }\n    return this._tokenizer._tokensCountText();\n  }\n  get _tokensCountTextId() {\n    return `${this._id}-hiddenText-nMore`;\n  }\n  get _selectedTokensCount() {\n    return this._tokenizer.tokens.filter(token => token.selected).length;\n  }\n  get ariaDescribedByText() {\n    return this.valueStateTextId ? `${this._tokensCountTextId} ${this.valueStateTextId}` : `${this._tokensCountTextId}`;\n  }\n  get shouldDisplayDefaultValueStateMessage() {\n    return !this.valueStateMessage.length && this.hasValueStateMessage;\n  }\n  get shouldDisplayOnlyValueStateMessage() {\n    return this.focused && !this.readonly && this.hasValueStateMessage && !this._iconPressed;\n  }\n  get valueStateTextMappings() {\n    return {\n      \"Success\": MultiComboBox.i18nBundle.getText(VALUE_STATE_SUCCESS),\n      \"Error\": MultiComboBox.i18nBundle.getText(VALUE_STATE_ERROR),\n      \"Error_Selection\": MultiComboBox.i18nBundle.getText(VALUE_STATE_ERROR_ALREADY_SELECTED),\n      \"Warning\": MultiComboBox.i18nBundle.getText(VALUE_STATE_WARNING),\n      \"Information\": MultiComboBox.i18nBundle.getText(VALUE_STATE_INFORMATION)\n    };\n  }\n  get valueStateTypeMappings() {\n    return {\n      \"Success\": MultiComboBox.i18nBundle.getText(VALUE_STATE_TYPE_SUCCESS),\n      \"Information\": MultiComboBox.i18nBundle.getText(VALUE_STATE_TYPE_INFORMATION),\n      \"Error\": MultiComboBox.i18nBundle.getText(VALUE_STATE_TYPE_ERROR),\n      \"Warning\": MultiComboBox.i18nBundle.getText(VALUE_STATE_TYPE_WARNING)\n    };\n  }\n  get _innerInput() {\n    if (isPhone()) {\n      if (this.allItemsPopover && this.allItemsPopover.opened) {\n        return this.allItemsPopover.querySelector(\"input\");\n      }\n    }\n    return this.getDomRef() ? this.getDomRef().querySelector(\"#ui5-multi-combobox-input\") : null;\n  }\n  get _headerTitleText() {\n    return MultiComboBox.i18nBundle.getText(INPUT_SUGGESTIONS_TITLE);\n  }\n  get _iconAccessibleNameText() {\n    return MultiComboBox.i18nBundle.getText(SELECT_OPTIONS);\n  }\n  get _dialogOkButton() {\n    return MultiComboBox.i18nBundle.getText(MULTICOMBOBOX_DIALOG_OK_BUTTON);\n  }\n  get _tokenizerExpanded() {\n    if (isPhone() || this.readonly) {\n      return false;\n    }\n    if (this._preventTokenizerToggle) {\n      return this._tokenizer.expanded;\n    }\n    const isCurrentlyExpanded = !!this._tokenizer && this._tokenizer.expanded;\n    const shouldBeExpanded = this.focused || this.open || isCurrentlyExpanded;\n    return shouldBeExpanded;\n  }\n  get _valueStatePopoverHorizontalAlign() {\n    return this.effectiveDir !== \"rtl\" ? \"Left\" : \"Right\";\n  }\n  get classes() {\n    return {\n      popover: {\n        \"ui5-multi-combobox-all-items-responsive-popover\": true,\n        \"ui5-suggestions-popover\": !this.isPhone,\n        \"ui5-suggestions-popover-with-value-state-header\": !this.isPhone && this.hasValueStateMessage\n      },\n      popoverValueState: {\n        \"ui5-valuestatemessage-root\": true,\n        \"ui5-valuestatemessage-header\": true,\n        \"ui5-valuestatemessage--success\": this.valueState === ValueState.Success,\n        \"ui5-valuestatemessage--error\": this.valueState === ValueState.Error,\n        \"ui5-valuestatemessage--warning\": this.valueState === ValueState.Warning,\n        \"ui5-valuestatemessage--information\": this.valueState === ValueState.Information\n      }\n    };\n  }\n  get styles() {\n    const remSizeIxPx = parseInt(getComputedStyle(document.documentElement).fontSize);\n    return {\n      popoverValueStateMessage: {\n        \"width\": `${this._listWidth}px`,\n        \"display\": this._listWidth === 0 ? \"none\" : \"inline-block\"\n      },\n      popoverHeader: {\n        \"max-width\": isPhone() ? \"100%\" : `${this._inputWidth}px`\n      },\n      suggestionsPopover: {\n        \"min-width\": `${this._inputWidth}px`,\n        \"max-width\": this._inputWidth / remSizeIxPx > 40 ? `${this._inputWidth}px` : \"40rem\"\n      }\n    };\n  }\n  static async onDefine() {\n    MultiComboBox.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n  }\n}\nMultiComboBox.define();\nexport default MultiComboBox;","map":{"version":3,"names":["UI5Element","litRender","ResizeHandler","ValueState","isShow","isDown","isUp","isSpace","isSpaceCtrl","isSpaceShift","isRight","isHome","isEnd","isTabNext","isTabPrevious","isUpShift","isDownShift","isLeftCtrl","isRightCtrl","isUpCtrl","isDownCtrl","isHomeCtrl","isEndCtrl","isCtrlA","isCtrlV","isDeleteShift","isInsertShift","isInsertCtrl","isBackSpace","isDelete","isEscape","isEnter","Integer","isPhone","isAndroid","getI18nBundle","getFeature","getEffectiveAriaLabelText","MultiComboBoxItem","MultiComboBoxGroupItem","GroupHeaderListItem","Tokenizer","Token","Icon","Popover","ResponsivePopover","List","StandardListItem","ToggleButton","Filters","Button","VALUE_STATE_SUCCESS","VALUE_STATE_ERROR","VALUE_STATE_WARNING","VALUE_STATE_INFORMATION","VALUE_STATE_TYPE_SUCCESS","VALUE_STATE_TYPE_INFORMATION","VALUE_STATE_TYPE_ERROR","VALUE_STATE_TYPE_WARNING","INPUT_SUGGESTIONS_TITLE","SELECT_OPTIONS","MULTICOMBOBOX_DIALOG_OK_BUTTON","VALUE_STATE_ERROR_ALREADY_SELECTED","MultiComboBoxTemplate","MultiComboBoxPopoverTemplate","styles","ResponsivePopoverCommonCss","ValueStateMessageCss","SuggestionsCss","MultiComboBoxPopover","metadata","tag","languageAware","managedSlots","slots","propertyName","type","HTMLElement","invalidateOnChildChange","icon","valueStateMessage","properties","value","String","defaultValue","noTypeahead","Boolean","placeholder","allowCustomValues","disabled","valueState","None","readonly","required","filter","open","accessibleName","undefined","accessibleNameRef","_filteredItems","Object","filterSelected","focused","_tokenizerFocused","_iconPressed","noAttribute","_inputWidth","_listWidth","_performingSelectionTwice","events","change","input","detail","items","Array","MultiComboBox","render","template","staticAreaTemplate","staticAreaStyles","dependencies","constructor","selectedValues","_inputLastValue","_valueBeforeOpen","_deleting","_validationTimeout","_handleResizeBound","_handleResize","bind","valueBeforeAutoComplete","currentItemIdx","FormSupport","onEnterDOM","register","onExitDOM","deregister","offsetWidth","_inputChange","fireEvent","togglePopover","allItemsPopover","toggle","togglePopoverByDropdownIcon","_shouldFilterItems","_showFilteredItems","_showMorePressed","filterSelectedItems","event","target","pressed","selectedItems","item","selected","idx","allItems","_groupItemFilter","indexOf","_showAllItemsButtonPressed","_inputDom","shadowRoot","querySelector","_inputLiveChange","filteredItems","_filterItems","oldValueState","length","_shouldAutocomplete","_resetValueState","close","showAt","_tokenDelete","token","ref","deletingItem","find","_id","getAttribute","fireSelectionChange","_getPlaceholder","_getSelectedItems","_handleArrowLeft","cursorPosition","getDomRef","selectionStart","isTextSelected","selectionEnd","_tokenizer","_focusLastToken","_tokenizerFocusOut","tokensCount","tokens","selectedTokens","_selectedTokensCount","lastTokenBeingDeleted","allTokensAreBeingDeleted","relatedTarget","hasAttribute","forEach","expanded","_preventTokenizerToggle","setTimeout","focus","_tokenizerFocusIn","_onkeydown","isArrowDownCtrl","_handleShow","preventDefault","_handleArrowNavigation","opened","setSelectionRange","_handleArrowCtrl","_handlePaste","key","pastedText","navigator","clipboard","readText","separatedText","split","matchingItems","text","selectedItem","focusedToken","matchingItem","localeCompare","sensitivity","_isOpenedByKeyboard","_itemToFocus","_handlePageUp","_handlePageDown","_handleBackspace","_handleEscape","innerInput","_innerInput","isAutoCompleted","_lastValue","_handleHome","shouldFocusToken","_isFocusInside","_handleEnd","lastTokenIdx","shouldFocusInput","activeElement","_handleTab","_handleSelectAll","allItemsSelected","every","_onValueStateKeydown","isArrowDown","isArrowUp","_onItemTab","_handleArrowDown","_onItemKeydown","isFirstItem","list","hasValueStateMessage","valueStateHeader","_setValueStateHeader","_itemNavigation","_currentIndex","_handleItemRangeSelection","_handleUp","_handleDown","isArrowLeft","isDownControl","hasSuggestions","isOpen","_navigateToPrevItem","firstListItem","setCurrentItem","_navigateToNextItem","listItems","nextItemIdx","prevItemIdx","itemsCount","previousItemIdx","currentItem","isGroupItem","_handleEnter","lowerCaseValue","toLowerCase","triggerFormSubmit","callback","_onTokenizerKeydown","isCtrl","metaKey","ctrlKey","lastTokenIndex","overflownTokens","includes","isCut","cutResult","_fillClipboard","_tokenKeyboardDelete","str","itemsToFilter","StartsWithPerTerm","groupHasFilteredItems","_afterOpenPicker","_toggle","_listSelectionChange","syncItems","selectionComponentPressed","mcbItem","_getRespPopover","staticAreaItem","getStaticAreaItemDomRef","_getList","_click","_afterClosePicker","blur","_beforeOpen","_itemsBeforeOpen","map","_handleTypeAhead","filterValue","_getFirstMatchingItem","current","_startsWithMatchingItems","StartsWith","onBeforeRendering","autoCompletedChars","_getRealDomRef","stableDomRef","onAfterRendering","shouldDisplayOnlyValueStateMessage","storeResponsivePopoverWidth","_isPhone","_onIconMousedown","isToggled","openPopover","closePopover","handleCancel","handleOK","popover","_getPopover","_forwardFocusToInner","_getResponsivePopover","responsivePopover","inputFocusIn","tagName","inputFocusOut","contains","editable","selectedItemsListMode","_listItemsType","hasValueState","Success","ariaValueStateHiddenText","shouldDisplayDefaultValueStateMessage","valueStateTypeMappings","valueStateDefaultText","concat","valueStateMessageText","el","textContent","join","valueStateTextMappings","valueStateTextId","getSlottedNodes","cloneNode","ariaLabelText","_valueStateMessageIcon","iconPerValueState","Error","Warning","Information","_tokensCountText","_tokensCountTextId","ariaDescribedByText","i18nBundle","getText","_headerTitleText","_iconAccessibleNameText","_dialogOkButton","_tokenizerExpanded","isCurrentlyExpanded","shouldBeExpanded","_valueStatePopoverHorizontalAlign","effectiveDir","classes","popoverValueState","remSizeIxPx","parseInt","getComputedStyle","document","documentElement","fontSize","popoverValueStateMessage","popoverHeader","suggestionsPopover","onDefine","define"],"sources":["/home/user/projects/reactwithcap01/reactmodule01/node_modules/@ui5/webcomponents/dist/MultiComboBox.js"],"sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport {\n\tisShow,\n\tisDown,\n\tisUp,\n\tisSpace,\n\tisSpaceCtrl,\n\tisSpaceShift,\n\tisRight,\n\tisHome,\n\tisEnd,\n\tisTabNext,\n\tisTabPrevious,\n\tisUpShift,\n\tisDownShift,\n\tisLeftCtrl,\n\tisRightCtrl,\n\tisUpCtrl,\n\tisDownCtrl,\n\tisHomeCtrl,\n\tisEndCtrl,\n\tisCtrlA,\n\tisCtrlV,\n\tisDeleteShift,\n\tisInsertShift,\n\tisInsertCtrl,\n\tisBackSpace,\n\tisDelete,\n\tisEscape,\n\tisEnter,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport \"@ui5/webcomponents-icons/dist/slim-arrow-down.js\";\nimport {\n\tisPhone,\n\tisAndroid,\n} from \"@ui5/webcomponents-base/dist/Device.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport \"@ui5/webcomponents-icons/dist/decline.js\";\nimport \"@ui5/webcomponents-icons/dist/multiselect-all.js\";\nimport \"@ui5/webcomponents-icons/dist/not-editable.js\";\nimport \"@ui5/webcomponents-icons/dist/error.js\";\nimport \"@ui5/webcomponents-icons/dist/alert.js\";\nimport \"@ui5/webcomponents-icons/dist/sys-enter-2.js\";\nimport \"@ui5/webcomponents-icons/dist/information.js\";\nimport { getFeature } from \"@ui5/webcomponents-base/dist/FeaturesRegistry.js\";\nimport { getEffectiveAriaLabelText } from \"@ui5/webcomponents-base/dist/util/AriaLabelHelper.js\";\nimport MultiComboBoxItem from \"./MultiComboBoxItem.js\";\nimport MultiComboBoxGroupItem from \"./MultiComboBoxGroupItem.js\";\nimport GroupHeaderListItem from \"./GroupHeaderListItem.js\";\nimport Tokenizer from \"./Tokenizer.js\";\nimport Token from \"./Token.js\";\nimport Icon from \"./Icon.js\";\nimport Popover from \"./Popover.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport StandardListItem from \"./StandardListItem.js\";\nimport ToggleButton from \"./ToggleButton.js\";\nimport * as Filters from \"./Filters.js\";\nimport Button from \"./Button.js\";\nimport {\n\tVALUE_STATE_SUCCESS,\n\tVALUE_STATE_ERROR,\n\tVALUE_STATE_WARNING,\n\tVALUE_STATE_INFORMATION,\n\tVALUE_STATE_TYPE_SUCCESS,\n\tVALUE_STATE_TYPE_INFORMATION,\n\tVALUE_STATE_TYPE_ERROR,\n\tVALUE_STATE_TYPE_WARNING,\n\tINPUT_SUGGESTIONS_TITLE,\n\tSELECT_OPTIONS,\n\tMULTICOMBOBOX_DIALOG_OK_BUTTON,\n\tVALUE_STATE_ERROR_ALREADY_SELECTED,\n} from \"./generated/i18n/i18n-defaults.js\";\n\n// Templates\nimport MultiComboBoxTemplate from \"./generated/templates/MultiComboBoxTemplate.lit.js\";\nimport MultiComboBoxPopoverTemplate from \"./generated/templates/MultiComboBoxPopoverTemplate.lit.js\";\n\n// Styles\nimport styles from \"./generated/themes/MultiComboBox.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\nimport ValueStateMessageCss from \"./generated/themes/ValueStateMessage.css.js\";\nimport SuggestionsCss from \"./generated/themes/Suggestions.css.js\";\nimport MultiComboBoxPopover from \"./generated/themes/MultiComboBoxPopover.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\ttag: \"ui5-multi-combobox\",\n\tlanguageAware: true,\n\tmanagedSlots: true,\n\tslots: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */ {\n\t\t/**\n\t\t * Defines the component items.\n\t\t *\n\t\t * @type {sap.ui.webcomponents.main.IMultiComboBoxItem[]}\n\t\t * @slot items\n\t\t * @public\n\t\t */\n\t\t\"default\": {\n\t\t\tpropertyName: \"items\",\n\t\t\ttype: HTMLElement,\n\t\t\tinvalidateOnChildChange: true,\n\t\t},\n\n\t\t/**\n\t\t* Defines the icon to be displayed in the component.\n\t\t*\n\t\t* @type {sap.ui.webcomponents.main.IIcon}\n\t\t* @slot\n\t\t* @public\n\t\t* @since 1.0.0-rc.9\n\t\t*/\n\t\ticon: {\n\t\t\ttype: HTMLElement,\n\t\t},\n\n\t\t/**\n\t\t * Defines the value state message that will be displayed as pop up under the component.\n\t\t * <br><br>\n\t\t *\n\t\t * <b>Note:</b> If not specified, a default text (in the respective language) will be displayed.\n\t\t * <br>\n\t\t * <b>Note:</b> The <code>valueStateMessage</code> would be displayed,\n\t\t * when the component is in <code>Information</code>, <code>Warning</code> or <code>Error</code> value state.\n\t\t * @type {HTMLElement[]}\n\t\t * @since 1.0.0-rc.9\n\t\t * @slot\n\t\t * @public\n\t\t */\n\t\tvalueStateMessage: {\n\t\t\ttype: HTMLElement,\n\t\t},\n\t},\n\tproperties: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */ {\n\t\t/**\n\t\t * Defines the value of the component.\n\t\t * <br><br>\n\t\t * <b>Note:</b> The property is updated upon typing.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @formEvents change input\n\t\t * @formProperty\n\t\t * @public\n\t\t */\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t},\n\n\t\t/**\n\t\t * Defines whether the value will be autcompleted to match an item\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t * @since 1.4.0\n\t\t */\n\t\t noTypeahead: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines a short hint intended to aid the user with data entry when the\n\t\t * component has no value.\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t */\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t},\n\n\t\t/**\n\t\t * Defines if the user input will be prevented, if no matching item has been found\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\tallowCustomValues: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines whether the component is in disabled state.\n\t\t * <br><br>\n\t\t * <b>Note:</b> A disabled component is completely noninteractive.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines the value state of the component.\n\t\t * <br><br>\n\t\t * Available options are:\n\t\t * <ul>\n\t\t * <li><code>None</code></li>\n\t\t * <li><code>Error</code></li>\n\t\t * <li><code>Warning</code></li>\n\t\t * <li><code>Success</code></li>\n\t\t * <li><code>Information</code></li>\n\t\t * </ul>\n\t\t *\n\t\t * @type {sap.ui.webcomponents.base.types.ValueState}\n\t\t * @defaultvalue \"None\"\n\t\t * @public\n\t\t */\n\t\tvalueState: {\n\t\t\ttype: ValueState,\n\t\t\tdefaultValue: ValueState.None,\n\t\t},\n\n\t\t/**\n\t\t * Defines whether the component is read-only.\n\t\t * <br><br>\n\t\t * <b>Note:</b> A read-only component is not editable,\n\t\t * but still provides visual feedback upon user interaction.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\treadonly: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines whether the component is required.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t * @since 1.0.0-rc.5\n\t\t */\n\t\trequired: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines the filter type of the component.\n\t\t * Available options are: <code>StartsWithPerTerm</code>, <code>StartsWith</code>, <code>Contains</code> and <code>None</code>.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue \"StartsWithPerTerm\"\n\t\t * @public\n\t\t */\n\t\tfilter: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"StartsWithPerTerm\",\n\t\t},\n\n\t\t/**\n\t\t * Indicates whether the dropdown is open. True if the dropdown is open, false otherwise.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @readonly\n\t\t * @since 1.0.0-rc.5\n\t\t * @public\n\t\t */\n\t\topen: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines the accessible ARIA name of the component.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue: \"\"\n\t\t * @public\n\t\t * @since 1.4.0\n\t\t */\n\t\taccessibleName: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: undefined,\n\t\t},\n\n\t\t/**\n\t\t * Receives id(or many ids) of the elements that label the component.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t * @since 1.4.0\n\t\t */\n\t\taccessibleNameRef: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t},\n\n\t\t_filteredItems: {\n\t\t\ttype: Object,\n\t\t},\n\n\t\tfilterSelected: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\tfocused: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t_tokenizerFocused: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t_iconPressed: {\n\t\t\ttype: Boolean,\n\t\t\tnoAttribute: true,\n\t\t},\n\n\t\t_inputWidth: {\n\t\t\ttype: Integer,\n\t\t\tnoAttribute: true,\n\t\t},\n\n\t\t_listWidth: {\n\t\t\ttype: Integer,\n\t\t\tdefaultValue: 0,\n\t\t\tnoAttribute: true,\n\t\t},\n\n\t\t_performingSelectionTwice: {\n\t\t\ttype: Boolean,\n\t\t},\n\t},\n\tevents: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */ {\n\t\t/**\n\t\t * Fired when the input operation has finished by pressing Enter or on focusout.\n\t\t *\n\t\t * @event\n\t\t * @public\n\t\t */\n\t\tchange: {},\n\n\t\t/**\n\t\t * Fired when the value of the component changes at each keystroke.\n\t\t *\n\t\t * @event\n\t\t * @public\n\t\t */\n\t\tinput: {},\n\n\t\t/**\n\t\t * Fired when the dropdown is opened or closed.\n\t\t *\n\t\t * @event sap.ui.webcomponents.main.MultiComboBox#open-change\n\t\t * @since 1.0.0-rc.5\n\t\t * @public\n\t\t */\n\t\t\"open-change\": {},\n\n\t\t/**\n\t\t * Fired when selection is changed by user interaction\n\t\t * in <code>SingleSelect</code> and <code>MultiSelect</code> modes.\n\t\t *\n\t\t * @event sap.ui.webcomponents.main.MultiComboBox#selection-change\n\t\t * @param {Array} items an array of the selected items.\n\t\t * @public\n\t\t */\n\t\t\"selection-change\": {\n\t\t\tdetail: {\n\t\t\t\titems: { type: Array },\n\t\t\t},\n\t\t},\n\t},\n};\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>ui5-multi-combobox</code> component consists of a list box with items and a text field allowing the user to either type a value directly into the text field, or choose from the list of existing items.\n *\n * The drop-down list is used for selecting and filtering values, it enables users to select one or more options from a predefined list. The control provides an editable input field to filter the list, and a dropdown arrow to expand/collapse the list of available options.\n * The options in the list have checkboxes that permit multi-selection. Entered values are displayed as tokens.\n * <h3>Structure</h3>\n * The <code>ui5-multi-combobox</code> consists of the following elements:\n * <ul>\n * <li> Tokenizer - a list of tokens with selected options.\n * <li> Input field - displays the selected option/s as token/s. Users can type to filter the list.\n * <li> Drop-down arrow - expands\\collapses the option list.</li>\n * <li> Option list - the list of available options.</li>\n * </ul>\n * <h3>Keyboard Handling</h3>\n *\n * The <code>ui5-multi-combobox</code> provides advanced keyboard handling.\n *\n * <h4>Picker</h4>\n * If the <code>ui5-multi-combobox</code> is focused,\n * you can open or close the drop-down by pressing <code>F4</code>, <code>ALT+UP</code> or <code>ALT+DOWN</code> keys.\n * Once the drop-down is opened, you can use the <code>UP</code> and <code>DOWN</code> arrow keys\n * to navigate through the available options and select one by pressing the <code>Space</code> or <code>Enter</code> keys.\n * <br>\n *\n * <h4>Tokens</h4>\n * <ul>\n * <li> Left/Right arrow keys - moves the focus selection form the currently focused token to the previous/next one (if available). </li>\n * <li> Delete -  deletes the token and focuses the previous token. </li>\n * <li> Backspace -  deletes the token and focus the next token. </li>\n * </ul>\n *\n * <h3>CSS Shadow Parts</h3>\n *\n * <ui5-link target=\"_blank\" href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/::part\">CSS Shadow Parts</ui5-link> allow developers to style elements inside the Shadow DOM.\n * <br>\n * The <code>ui5-multi-combobox</code> exposes the following CSS Shadow Parts:\n * <ul>\n * <li>token-{index} - Used to style each token(where <code>token-0</code> corresponds to the first item)</li>\n * </ul>\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/MultiComboBox\";</code>\n *\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.MultiComboBox\n * @extends sap.ui.webcomponents.base.UI5Element\n * @tagname ui5-multi-combobox\n * @public\n * @appenddocs MultiComboBoxItem MultiComboBoxGroupItem\n * @since 0.11.0\n */\nclass MultiComboBox extends UI5Element {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get render() {\n\t\treturn litRender;\n\t}\n\n\tstatic get template() {\n\t\treturn MultiComboBoxTemplate;\n\t}\n\n\tstatic get staticAreaTemplate() {\n\t\treturn MultiComboBoxPopoverTemplate;\n\t}\n\n\tstatic get styles() {\n\t\treturn styles;\n\t}\n\n\tstatic get staticAreaStyles() {\n\t\treturn [ResponsivePopoverCommonCss, ValueStateMessageCss, SuggestionsCss, MultiComboBoxPopover];\n\t}\n\n\tstatic get dependencies() {\n\t\treturn [\n\t\t\tMultiComboBoxItem,\n\t\t\tMultiComboBoxGroupItem,\n\t\t\tTokenizer,\n\t\t\tToken,\n\t\t\tIcon,\n\t\t\tResponsivePopover,\n\t\t\tPopover,\n\t\t\tList,\n\t\t\tStandardListItem,\n\t\t\tGroupHeaderListItem,\n\t\t\tToggleButton,\n\t\t\tButton,\n\t\t];\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._filteredItems = [];\n\t\tthis.selectedValues = [];\n\t\tthis._inputLastValue = \"\";\n\t\tthis._valueBeforeOpen = \"\";\n\t\tthis._deleting = false;\n\t\tthis._validationTimeout = null;\n\t\tthis._handleResizeBound = this._handleResize.bind(this);\n\t\tthis.valueBeforeAutoComplete = \"\";\n\t\tthis.currentItemIdx = -1;\n\t\tthis.FormSupport = undefined;\n\t}\n\n\tonEnterDOM() {\n\t\tResizeHandler.register(this, this._handleResizeBound);\n\t}\n\n\tonExitDOM() {\n\t\tResizeHandler.deregister(this, this._handleResizeBound);\n\t}\n\n\t_handleResize() {\n\t\tthis._inputWidth = this.offsetWidth;\n\t}\n\n\t_inputChange() {\n\t\tthis.fireEvent(\"change\");\n\t}\n\n\ttogglePopover() {\n\t\tthis.allItemsPopover.toggle(this);\n\t}\n\n\ttogglePopoverByDropdownIcon() {\n\t\tthis._shouldFilterItems = false;\n\t\tthis.allItemsPopover.toggle(this);\n\t}\n\n\t_showFilteredItems() {\n\t\tthis.filterSelected = true;\n\t\tthis._showMorePressed = true;\n\n\t\tthis.togglePopover();\n\t}\n\n\tfilterSelectedItems(event) {\n\t\tthis.filterSelected = event.target.pressed;\n\t\tconst selectedItems = this._filteredItems.filter(item => item.selected);\n\t\tthis.selectedItems = this.items.filter((item, idx, allItems) => MultiComboBox._groupItemFilter(item, ++idx, allItems, selectedItems) || selectedItems.indexOf(item) !== -1);\n\t}\n\n\tget _showAllItemsButtonPressed() {\n\t\treturn this.filterSelected;\n\t}\n\n\tget _inputDom() {\n\t\treturn this.shadowRoot.querySelector(\"#ui5-multi-combobox-input\");\n\t}\n\n\t_inputLiveChange(event) {\n\t\tconst input = event.target;\n\t\tconst value = input.value;\n\t\tconst filteredItems = this._filterItems(value);\n\t\tconst oldValueState = this.valueState;\n\n\t\tthis._shouldFilterItems = true;\n\n\t\tif (this.filterSelected) {\n\t\t\tthis.filterSelected = false;\n\t\t}\n\n\t\tif (this._validationTimeout) {\n\t\t\tinput.value = this._inputLastValue;\n\t\t\treturn;\n\t\t}\n\n\t\tif (!filteredItems.length && value && !this.allowCustomValues) {\n\t\t\tinput.value = this.valueBeforeAutoComplete || this._inputLastValue;\n\t\t\tthis.valueState = \"Error\";\n\n\t\t\tthis._shouldAutocomplete = false;\n\t\t\tthis._resetValueState(oldValueState);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._inputLastValue = input.value;\n\t\tthis.value = input.value;\n\t\tthis._filteredItems = filteredItems;\n\n\t\tif (!isPhone()) {\n\t\t\tif (filteredItems.length === 0) {\n\t\t\t\tthis.allItemsPopover.close();\n\t\t\t} else {\n\t\t\t\tthis.allItemsPopover.showAt(this);\n\t\t\t}\n\t\t}\n\n\t\tthis.fireEvent(\"input\");\n\t}\n\n\t_tokenDelete(event) {\n\t\tconst token = event.detail.ref;\n\t\tconst deletingItem = this.items.find(item => item._id === token.getAttribute(\"data-ui5-id\"));\n\n\t\tdeletingItem.selected = false;\n\t\tthis._deleting = true;\n\n\t\tthis.fireSelectionChange();\n\t}\n\n\tget _getPlaceholder() {\n\t\tif (this._getSelectedItems().length) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\treturn this.placeholder;\n\t}\n\n\t_handleArrowLeft() {\n\t\tconst cursorPosition = this.getDomRef().querySelector(`input`).selectionStart;\n\t\tconst isTextSelected = this.getDomRef().querySelector(`input`).selectionEnd - cursorPosition > 0;\n\n\t\tif (cursorPosition === 0 && !isTextSelected) {\n\t\t\tthis._tokenizer._focusLastToken();\n\t\t}\n\t}\n\n\t_tokenizerFocusOut(event) {\n\t\tthis._tokenizerFocused = false;\n\n\t\tconst tokensCount = this._tokenizer.tokens.length;\n\t\tconst selectedTokens = this._selectedTokensCount;\n\t\tconst lastTokenBeingDeleted = tokensCount - 1 === 0 && this._deleting;\n\t\tconst allTokensAreBeingDeleted = selectedTokens === tokensCount && this._deleting;\n\n\t\tif (!event.relatedTarget || !event.relatedTarget.hasAttribute(\"ui5-token\")) {\n\t\t\tthis._tokenizer.tokens.forEach(token => { token.selected = false; });\n\t\t\tthis._tokenizer.expanded = this._preventTokenizerToggle ? this._tokenizer.expanded : false;\n\t\t}\n\n\t\tif (allTokensAreBeingDeleted || lastTokenBeingDeleted) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!isPhone()) {\n\t\t\t\t\tthis.shadowRoot.querySelector(\"input\").focus();\n\t\t\t\t}\n\n\t\t\t\tthis._deleting = false;\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\t_tokenizerFocusIn() {\n\t\tthis._tokenizerFocused = true;\n\t\tthis.focused = false;\n\t}\n\n\tasync _onkeydown(event) {\n\t\tconst isArrowDownCtrl = isDownCtrl(event);\n\n\t\tif (isShow(event) && !this.disabled) {\n\t\t\tthis._handleShow(event);\n\t\t\treturn;\n\t\t}\n\n\t\tif (isDownShift(event) || isUpShift(event)) {\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (isUp(event) || isDown(event) || isUpCtrl(event) || isArrowDownCtrl) {\n\t\t\tthis._handleArrowNavigation(event, isArrowDownCtrl);\n\t\t\treturn;\n\t\t}\n\n\t\t// CTRL + Arrow Down navigation is performed by the ItemNavigation module of the List,\n\t\t// here we only implement the text selection of the selected item\n\t\tif (isArrowDownCtrl && !this.allItemsPopover.opened) {\n\t\t\tsetTimeout(() => this._inputDom.setSelectionRange(0, this._inputDom.value.length), 0);\n\t\t}\n\n\t\tif (isLeftCtrl(event) || isRightCtrl(event)) {\n\t\t\tthis._handleArrowCtrl(event);\n\t\t\treturn;\n\t\t}\n\n\t\tif (isCtrlV(event) || isInsertShift(event)) {\n\t\t\tthis._handlePaste(event);\n\t\t\treturn;\n\t\t}\n\n\t\tif (isSpaceShift(event)) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tthis[`_handle${event.key}`] && this[`_handle${event.key}`](event);\n\t\tthis._shouldAutocomplete = !this.noTypeahead && !(isBackSpace(event) || isDelete(event) || isEscape(event) || isEnter(event));\n\t}\n\n\tasync _handlePaste(event) {\n\t\tconst pastedText = await navigator.clipboard.readText();\n\n\t\tif (!pastedText) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst separatedText = pastedText.split(/\\r\\n|\\r|\\n/g);\n\t\tconst matchingItems = this.items.filter(item => separatedText.indexOf(item.text) > -1 && !item.selected);\n\n\t\tif (matchingItems.length) {\n\t\t\tmatchingItems.forEach(item => {\n\t\t\t\titem.selected = true;\n\t\t\t\tthis.value = \"\";\n\t\t\t\tthis.fireSelectionChange();\n\t\t\t});\n\t\t} else {\n\t\t\tthis.value = pastedText;\n\t\t\tthis.fireEvent(\"input\");\n\t\t}\n\t}\n\n\t_handleShow(event) {\n\t\tconst items = this.items;\n\t\tconst selectedItem = this._getSelectedItems()[0];\n\t\tconst focusedToken = this._tokenizer.tokens.find(token => token.focused);\n\t\tconst value = this.value;\n\t\tconst matchingItem = this.items.find(item => item.text.localeCompare(value, undefined, { sensitivity: \"base\" }) === 0);\n\n\t\tevent.preventDefault();\n\n\t\tif (this.readonly) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isOpenedByKeyboard = true;\n\t\tthis._shouldFilterItems = false;\n\t\tthis._filteredItems = this.items;\n\n\t\tthis.togglePopover();\n\n\t\tif (!focusedToken && matchingItem) {\n\t\t\tthis._itemToFocus = matchingItem;\n\t\t\treturn;\n\t\t}\n\n\t\tif (selectedItem && !focusedToken) {\n\t\t\tthis._itemToFocus = selectedItem;\n\t\t} else if (focusedToken && event.target === focusedToken) {\n\t\t\tthis._itemToFocus = items.find(item => item.text === focusedToken.text);\n\t\t} else {\n\t\t\tthis._itemToFocus = items[0];\n\t\t}\n\t}\n\n\t_handlePageUp(event) {\n\t\tevent.preventDefault();\n\t}\n\n\t_handlePageDown(event) {\n\t\tevent.preventDefault();\n\t}\n\n\t_handleBackspace(event) {\n\t\tif (event.target.value === \"\") {\n\t\t\tevent.preventDefault();\n\t\t\tthis._tokenizer._focusLastToken();\n\t\t}\n\t}\n\n\t_handleEscape(event) {\n\t\tconst innerInput = this._innerInput;\n\t\tconst isAutoCompleted = innerInput.selectionEnd - innerInput.selectionStart > 0;\n\n\t\tif (isAutoCompleted) {\n\t\t\tthis.value = this.valueBeforeAutoComplete;\n\t\t}\n\n\t\tif (!this.allowCustomValues || (!this.open && this.allowCustomValues)) {\n\t\t\tthis.value = this._lastValue;\n\t\t}\n\t}\n\n\t_handleHome(event) {\n\t\tconst shouldFocusToken = this._isFocusInside && event.target.selectionStart === 0 && this._tokenizer.tokens.length > 0;\n\n\t\tif (shouldFocusToken) {\n\t\t\tevent.preventDefault();\n\t\t\tthis._tokenizer.tokens[0].focus();\n\t\t}\n\t}\n\n\t_handleEnd(event) {\n\t\tconst tokens = this._tokenizer.tokens;\n\t\tconst lastTokenIdx = tokens.length - 1;\n\t\tconst shouldFocusInput = event.target === tokens[lastTokenIdx] && tokens[lastTokenIdx] === this.shadowRoot.activeElement;\n\n\t\tif (shouldFocusInput) {\n\t\t\tevent.preventDefault();\n\t\t\tthis._inputDom.focus();\n\t\t}\n\t}\n\n\t_handleTab(event) {\n\t\tthis.allItemsPopover.close();\n\t}\n\n\t_handleSelectAll(event) {\n\t\tconst filteredItems = this._filteredItems;\n\t\tconst allItemsSelected = filteredItems.every(item => item.selected);\n\n\t\tfilteredItems.forEach(item => {\n\t\t\titem.selected = !allItemsSelected;\n\t\t});\n\n\t\tthis.fireSelectionChange();\n\t}\n\n\t_onValueStateKeydown(event) {\n\t\tconst isArrowDown = isDown(event);\n\t\tconst isArrowUp = isUp(event);\n\n\t\tif (isTabNext(event) || isTabPrevious(event)) {\n\t\t\tthis._onItemTab(event);\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\n\t\tif (isArrowDown || isDownCtrl(event)) {\n\t\t\tthis._handleArrowDown(event);\n\t\t}\n\n\t\tif (isArrowUp || isUpCtrl(event)) {\n\t\t\tthis._shouldAutocomplete = true;\n\t\t\tthis._inputDom.focus();\n\t\t}\n\t}\n\n\tasync _onItemKeydown(event) {\n\t\tconst isFirstItem = this.list.items[0] === event.target;\n\t\tconst isArrowUp = isUp(event) || isUpCtrl(event);\n\n\t\tif (this.hasValueStateMessage && !this.valueStateHeader) {\n\t\t\tawait this._setValueStateHeader();\n\t\t}\n\n\t\tif (isTabNext(event) || isTabPrevious(event)) {\n\t\t\tthis._onItemTab(event);\n\t\t\treturn;\n\t\t}\n\n\t\tif (isHomeCtrl(event)) {\n\t\t\tthis.list._itemNavigation._handleHome(event);\n\t\t\tthis.list.items[this.list._itemNavigation._currentIndex].focus();\n\t\t}\n\n\t\tif (isEndCtrl(event)) {\n\t\t\tthis.list._itemNavigation._handleEnd(event);\n\t\t\tthis.list.items[this.list._itemNavigation._currentIndex].focus();\n\t\t}\n\n\t\tevent.preventDefault();\n\n\t\tif (isDownShift(event) || isUpShift(event)) {\n\t\t\tthis._handleItemRangeSelection(event);\n\t\t\treturn;\n\t\t}\n\n\t\tif ((isUpCtrl(event)) && !isFirstItem) {\n\t\t\tthis.list._itemNavigation._handleUp(event);\n\t\t\tthis.list.items[this.list._itemNavigation._currentIndex].focus();\n\t\t}\n\n\t\tif (isDownCtrl(event)) {\n\t\t\tthis.list._itemNavigation._handleDown(event);\n\t\t\tthis.list.items[this.list._itemNavigation._currentIndex].focus();\n\t\t}\n\n\t\tif (isShow(event)) {\n\t\t\tthis.togglePopover();\n\t\t}\n\n\t\tif (isCtrlA(event)) {\n\t\t\tthis._handleSelectAll(event);\n\t\t\treturn;\n\t\t}\n\n\t\tif (((isArrowUp && isFirstItem) || isHome(event)) && this.valueStateHeader) {\n\t\t\tthis.valueStateHeader.focus();\n\t\t}\n\n\t\tif (!this.valueStateHeader && isFirstItem && isArrowUp) {\n\t\t\tthis._inputDom.focus();\n\t\t\tthis._shouldAutocomplete = true;\n\t\t}\n\t}\n\n\t_handleArrowCtrl(event) {\n\t\tconst input = this._inputDom;\n\t\tconst isArrowLeft = isLeftCtrl(event);\n\n\t\tif (isArrowLeft && input.selectionStart === 0 && input.selectionEnd === 0) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (isArrowLeft && ((input.selectionEnd - input.selectionStart) > 0)) {\n\t\t\tinput.setSelectionRange(0, 0);\n\t\t}\n\t}\n\n\t_onItemTab(event) {\n\t\tthis._inputDom.focus();\n\t\tthis.allItemsPopover.close();\n\t}\n\n\tasync _handleArrowNavigation(event, isDownControl) {\n\t\tconst isArrowDown = isDownControl || isDown(event);\n\t\tconst hasSuggestions = this.items.length;\n\t\tconst isOpen = this.allItemsPopover.opened;\n\n\t\tevent.preventDefault();\n\n\t\tif (this.hasValueStateMessage && !this.valueStateHeader) {\n\t\t\tawait this._setValueStateHeader();\n\t\t}\n\n\t\tif (isArrowDown && isOpen && this.valueStateHeader) {\n\t\t\tthis.value = this.valueBeforeAutoComplete || this.value;\n\t\t\tthis.valueStateHeader.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tif (isArrowDown && hasSuggestions) {\n\t\t\tthis._handleArrowDown(event);\n\t\t}\n\n\t\tif (!isArrowDown && !isOpen && !this.readonly) {\n\t\t\tthis._navigateToPrevItem();\n\t\t}\n\t}\n\n\t_handleArrowDown(event) {\n\t\tconst isOpen = this.allItemsPopover.opened;\n\t\tconst firstListItem = this.list.items[0];\n\n\t\tif (isOpen) {\n\t\t\tthis.list._itemNavigation.setCurrentItem(firstListItem);\n\t\t\tthis.value = this.valueBeforeAutoComplete || this.value;\n\t\t\tfirstListItem.focus();\n\t\t} else if (!this.readonly) {\n\t\t\tthis._navigateToNextItem();\n\t\t}\n\t}\n\n\t_handleItemRangeSelection(event) {\n\t\tconst items = this.items;\n\t\tconst listItems = this.list.items;\n\t\tconst currentItemIdx = listItems.indexOf(event.target);\n\t\tconst nextItemIdx = currentItemIdx + 1;\n\t\tconst prevItemIdx = currentItemIdx - 1;\n\n\t\tif (isDownShift(event) && items[nextItemIdx]) {\n\t\t\titems[nextItemIdx].selected = items[currentItemIdx].selected;\n\t\t\titems[nextItemIdx].focus();\n\t\t}\n\n\t\tif (isUpShift(event) && items[prevItemIdx]) {\n\t\t\titems[prevItemIdx].selected = items[currentItemIdx].selected;\n\t\t\titems[prevItemIdx].focus();\n\t\t}\n\n\t\tthis.fireSelectionChange();\n\t}\n\n\t_navigateToNextItem() {\n\t\tconst items = this.items;\n\t\tconst itemsCount = items.length;\n\t\tconst previousItemIdx = this.currentItemIdx;\n\n\t\tif (previousItemIdx > -1 && items[previousItemIdx].text !== this.value) {\n\t\t\tthis.currentItemIdx = -1;\n\t\t}\n\n\t\tif (previousItemIdx >= itemsCount - 1) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet currentItem = this.items[++this.currentItemIdx];\n\n\t\twhile ((this.currentItemIdx < itemsCount - 1 && currentItem.selected) || currentItem.isGroupItem) {\n\t\t\tcurrentItem = this.items[++this.currentItemIdx];\n\t\t}\n\n\t\tif (currentItem.selected === true || currentItem.isGroupItem) {\n\t\t\tthis.currentItemIdx = previousItemIdx;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.value = currentItem.text;\n\t\tthis._innerInput.value = currentItem.text;\n\t\tthis._innerInput.setSelectionRange(0, currentItem.text.length);\n\t}\n\n\t_navigateToPrevItem() {\n\t\tconst items = this.items;\n\t\tlet previousItemIdx = this.currentItemIdx;\n\n\t\tif ((!this.value && previousItemIdx !== -1) || (previousItemIdx !== -1 && this.value && this.value !== items[previousItemIdx].text)) {\n\t\t\tpreviousItemIdx = -1;\n\t\t}\n\n\t\tif (previousItemIdx === -1) {\n\t\t\tthis.currentItemIdx = items.length;\n\t\t}\n\n\t\tif (previousItemIdx === 0) {\n\t\t\tthis.currentItemIdx = 0;\n\t\t\treturn;\n\t\t}\n\n\t\tlet currentItem = this.items[--this.currentItemIdx];\n\n\t\twhile ((currentItem && this.currentItemIdx > 0) && (currentItem.selected || currentItem.isGroupItem)) {\n\t\t\tcurrentItem = this.items[--this.currentItemIdx];\n\t\t}\n\n\t\tif (!currentItem) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (currentItem.selected || currentItem.isGroupItem) {\n\t\t\tthis.currentItemIdx = previousItemIdx;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.value = currentItem.text;\n\t\tthis._innerInput.value = currentItem.text;\n\t\tthis._innerInput.setSelectionRange(0, currentItem.text.length);\n\t}\n\n\t_handleEnter() {\n\t\tconst lowerCaseValue = this.value.toLowerCase();\n\t\tconst matchingItem = this.items.find(item => item.text.toLowerCase() === lowerCaseValue);\n\t\tconst oldValueState = this.valueState;\n\t\tconst innerInput = this._innerInput;\n\n\t\tif (this.FormSupport) {\n\t\t\tthis.FormSupport.triggerFormSubmit(this);\n\t\t}\n\n\t\tif (matchingItem) {\n\t\t\tif (matchingItem.selected) {\n\t\t\t\tif (this._validationTimeout) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.valueState = \"Error\";\n\t\t\t\tthis._performingSelectionTwice = true;\n\t\t\t\tthis._resetValueState(oldValueState, () => {\n\t\t\t\t\tthis._performingSelectionTwice = false;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tmatchingItem.selected = true;\n\t\t\t\tthis.value = \"\";\n\t\t\t\tthis.fireSelectionChange();\n\t\t\t}\n\n\t\t\tinnerInput.setSelectionRange(matchingItem.text.length, matchingItem.text.length);\n\t\t\tthis.allItemsPopover.close();\n\t\t}\n\t}\n\n\t_resetValueState(valueState, callback) {\n\t\tthis._validationTimeout = setTimeout(() => {\n\t\t\tthis.valueState = valueState;\n\t\t\tthis._validationTimeout = null;\n\n\t\t\tcallback && callback();\n\t\t}, 2000);\n\t}\n\n\t_onTokenizerKeydown(event) {\n\t\tconst isCtrl = !!(event.metaKey || event.ctrlKey);\n\n\t\tif (isRight(event)) {\n\t\t\tconst lastTokenIndex = this._tokenizer.tokens.length - this._tokenizer.overflownTokens.length - 1;\n\n\t\t\tif (event.target === this._tokenizer.tokens[lastTokenIndex]) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.shadowRoot.querySelector(\"input\").focus();\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t}\n\n\t\tif ((isCtrl && [\"c\", \"x\"].includes(event.key.toLowerCase())) || isDeleteShift(event) || isInsertCtrl(event)) {\n\t\t\tevent.preventDefault();\n\n\t\t\tconst isCut = event.key.toLowerCase() === \"x\" || isDeleteShift(event);\n\t\t\tconst selectedTokens = this._tokenizer.tokens.filter(token => token.selected);\n\n\t\t\tif (isCut) {\n\t\t\t\tconst cutResult = this._tokenizer._fillClipboard(\"cut\", selectedTokens);\n\t\t\t\tselectedTokens.forEach(token => {\n\t\t\t\t\tthis._tokenizer._tokenKeyboardDelete(event, token);\n\t\t\t\t});\n\n\t\t\t\tthis.focus();\n\t\t\t\treturn cutResult;\n\t\t\t}\n\t\t\treturn this._tokenizer._fillClipboard(\"copy\", selectedTokens);\n\t\t}\n\n\t\tif (isCtrlV(event) || isInsertShift(event)) {\n\t\t\tthis._handlePaste(event);\n\t\t}\n\n\t\tif (isHome(event)) {\n\t\t\tthis._handleHome(event);\n\t\t}\n\n\t\tif (isEnd(event)) {\n\t\t\tthis._handleEnd(event);\n\t\t}\n\n\t\tif (isShow(event) && !this.readonly && !this.disabled) {\n\t\t\tthis._preventTokenizerToggle = true;\n\t\t\tthis._handleShow(event);\n\t\t}\n\t}\n\n\t_filterItems(str) {\n\t\tconst itemsToFilter = this.items.filter(item => !item.isGroupItem);\n\t\tconst filteredItems = (Filters[this.filter] || Filters.StartsWithPerTerm)(str, itemsToFilter, \"text\");\n\n\t\t// Return the filtered items and their group items\n\t\treturn this.items.filter((item, idx, allItems) => MultiComboBox._groupItemFilter(item, ++idx, allItems, filteredItems) || filteredItems.indexOf(item) !== -1);\n\t}\n\n\t/**\n\t * Returns true if the group header should be shown (if there is a filtered suggestion item for this group item)\n\t *\n\t * @private\n\t */\n\t static _groupItemFilter(item, idx, allItems, filteredItems) {\n\t\tif (item.isGroupItem) {\n\t\t\tlet groupHasFilteredItems;\n\n\t\t\twhile (allItems[idx] && !allItems[idx].isGroupItem && !groupHasFilteredItems) {\n\t\t\t\tgroupHasFilteredItems = filteredItems.indexOf(allItems[idx]) !== -1;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\treturn groupHasFilteredItems;\n\t\t}\n\t}\n\n\t_afterOpenPicker() {\n\t\tthis._toggle();\n\n\t\tif (!isPhone() && !this._isOpenedByKeyboard) {\n\t\t\tthis._innerInput.focus();\n\t\t} else if (this._isOpenedByKeyboard) {\n\t\t\tthis._itemToFocus.focus();\n\t\t} else {\n\t\t\tthis.allItemsPopover.focus();\n\t\t}\n\n\t\tthis._isOpenedByKeyboard = false;\n\t}\n\n\t_toggle() {\n\t\tthis.open = !this.open;\n\t\tthis.fireEvent(\"open-change\");\n\t}\n\n\t_getSelectedItems() {\n\t\t// Angular 2 way data binding\n\t\tthis.selectedValues = this.items.filter(item => item.selected);\n\t\treturn this.selectedValues;\n\t}\n\n\t_listSelectionChange(event) {\n\t\t// sync list items and cb items\n\t\tthis.syncItems(event.target.items);\n\n\t\t// don't call selection change right after selection as user can cancel it on phone\n\t\tif (!isPhone()) {\n\t\t\tthis.fireSelectionChange();\n\t\t}\n\n\t\tif (!event.detail.selectionComponentPressed && !isSpace(event.detail) && !isSpaceCtrl(event.detail)) {\n\t\t\tthis.allItemsPopover.close();\n\t\t\tthis.value = \"\";\n\n\t\t\t// if the item (not checkbox) is clicked, call the selection change\n\t\t\tif (isPhone()) {\n\t\t\t\tthis.fireSelectionChange();\n\t\t\t}\n\n\t\t\tthis.fireEvent(\"input\");\n\t\t}\n\n\t\tthis.value = this.valueBeforeAutoComplete || \"\";\n\t}\n\n\tsyncItems(listItems) {\n\t\tlistItems.forEach(item => {\n\t\t\tthis.items.forEach(mcbItem => {\n\t\t\t\tif (mcbItem._id === item.getAttribute(\"data-ui5-token-id\")) {\n\t\t\t\t\tmcbItem.selected = item.selected;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tfireSelectionChange() {\n\t\tthis.fireEvent(\"selection-change\", { items: this._getSelectedItems() });\n\t\t// Angular 2 way data binding\n\t\tthis.fireEvent(\"value-changed\");\n\t}\n\n\tasync _getRespPopover() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\tthis.allItemsPopover = staticAreaItem.querySelector(`.ui5-multi-combobox-all-items-responsive-popover`);\n\t}\n\n\tasync _getList() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\tthis.list = staticAreaItem.querySelector(\".ui5-multi-combobox-all-items-list\");\n\t}\n\n\t_click(event) {\n\t\tif (isPhone() && !this.readonly && !this._showMorePressed && !this._deleting) {\n\t\t\tthis.allItemsPopover.showAt(this);\n\t\t}\n\n\t\tthis._showMorePressed = false;\n\t}\n\n\t_afterClosePicker() {\n\t\t// close device's keyboard and prevent further typing\n\t\tif (isPhone()) {\n\t\t\tthis.blur();\n\t\t}\n\n\t\tthis._toggle();\n\n\t\tthis._iconPressed = false;\n\t\tthis._preventTokenizerToggle = false;\n\t\tthis.filterSelected = false;\n\t}\n\n\t_beforeOpen() {\n\t\tthis._itemsBeforeOpen = this.items.map(item => {\n\t\t\treturn {\n\t\t\t\tref: item,\n\t\t\t\tselected: item.selected,\n\t\t\t};\n\t\t});\n\n\t\tthis._valueBeforeOpen = this.value;\n\n\t\tif (this.filterSelected) {\n\t\t\tconst selectedItems = this._filteredItems.filter(item => item.selected);\n\t\t\tthis.selectedItems = this.items.filter((item, idx, allItems) => MultiComboBox._groupItemFilter(item, ++idx, allItems, selectedItems) || selectedItems.indexOf(item) !== -1);\n\t\t}\n\t}\n\n\t_handleTypeAhead(item, filterValue) {\n\t\tif (!item) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = item.text;\n\t\tconst innerInput = this._innerInput;\n\n\t\tfilterValue = filterValue || \"\";\n\t\tthis.value = value;\n\n\t\tinnerInput.value = value;\n\t\tinnerInput.setSelectionRange(filterValue.length, value.length);\n\n\t\tthis._shouldAutocomplete = false;\n\t}\n\n\t_getFirstMatchingItem(current) {\n\t\tif (!this.items.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst matchingItems = this._startsWithMatchingItems(current).filter(item => !item.isGroupItem && !item.selected);\n\n\t\tif (matchingItems.length) {\n\t\t\treturn matchingItems[0];\n\t\t}\n\t}\n\n\t_startsWithMatchingItems(str) {\n\t\treturn Filters.StartsWith(str, this.items, \"text\");\n\t}\n\n\tonBeforeRendering() {\n\t\tconst input = this._innerInput;\n\t\tconst autoCompletedChars = input && input.selectionEnd - input.selectionStart;\n\t\tconst value = input && input.value;\n\n\t\tthis.FormSupport = getFeature(\"FormSupport\");\n\t\tthis._inputLastValue = value;\n\n\t\tif (input && !input.value) {\n\t\t\tthis.valueBeforeAutoComplete = \"\";\n\t\t\tthis._filteredItems = this.items;\n\t\t}\n\n\t\tthis.items.forEach(item => {\n\t\t\titem._getRealDomRef = () => this.allItemsPopover.querySelector(`*[data-ui5-stable=${item.stableDomRef}]`);\n\t\t});\n\n\t\tif (!input || !value) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Typehead causes issues on Android devices, so we disable it for now\n\t\t// If there is already a selection the autocomplete has already been performed\n\t\tif (this._shouldAutocomplete && !isAndroid() && !autoCompletedChars) {\n\t\t\tconst item = this._getFirstMatchingItem(value);\n\n\t\t\t// Keep the original typed in text intact\n\t\t\tthis.valueBeforeAutoComplete = value;\n\t\t\tthis._handleTypeAhead(item, value);\n\t\t}\n\n\t\tif (this._shouldFilterItems) {\n\t\t\tthis._filteredItems = this._filterItems(this._shouldAutocomplete || !!autoCompletedChars ? this.valueBeforeAutoComplete : value);\n\t\t} else {\n\t\t\tthis._filteredItems = this.items;\n\t\t}\n\t}\n\n\tasync onAfterRendering() {\n\t\tawait this._getRespPopover();\n\t\tawait this._getList();\n\n\t\tthis.toggle(this.shouldDisplayOnlyValueStateMessage);\n\t\tthis.storeResponsivePopoverWidth();\n\n\t\tthis._deleting = false;\n\t}\n\n\tget _isPhone() {\n\t\treturn isPhone();\n\t}\n\n\t_onIconMousedown() {\n\t\tthis._iconPressed = true;\n\t}\n\n\tstoreResponsivePopoverWidth() {\n\t\tif (this.open && !this._listWidth) {\n\t\t\tthis._listWidth = this.list.offsetWidth;\n\t\t}\n\t}\n\n\ttoggle(isToggled) {\n\t\tif (isToggled && !this.open) {\n\t\t\tthis.openPopover();\n\t\t} else {\n\t\t\tthis.closePopover();\n\t\t}\n\t}\n\n\thandleCancel() {\n\t\tthis._itemsBeforeOpen.forEach(item => {\n\t\t\titem.ref.selected = item.selected;\n\t\t});\n\n\t\tthis.togglePopover();\n\n\t\tthis.value = this._valueBeforeOpen;\n\t}\n\n\thandleOK() {\n\t\tif (isPhone()) {\n\t\t\tthis.fireSelectionChange();\n\t\t}\n\n\t\tthis.togglePopover();\n\t}\n\n\tasync openPopover() {\n\t\tconst popover = await this._getPopover();\n\n\t\tif (popover) {\n\t\t\tpopover.showAt(this);\n\t\t}\n\t}\n\n\t_forwardFocusToInner() {\n\t\tthis._innerInput.focus();\n\t}\n\n\tasync closePopover() {\n\t\tconst popover = await this._getPopover();\n\n\t\tpopover && popover.close();\n\t}\n\n\tasync _getPopover() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\treturn staticAreaItem.querySelector(\"[ui5-popover]\");\n\t}\n\n\tasync _getResponsivePopover() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\treturn staticAreaItem.querySelector(\"[ui5-responsive-popover]\");\n\t}\n\n\tasync _setValueStateHeader() {\n\t\tconst responsivePopover = await this._getResponsivePopover();\n\t\tthis.valueStateHeader = responsivePopover.querySelector(\"div.ui5-responsive-popover-header.ui5-valuestatemessage-root\");\n\t}\n\n\tget _tokenizer() {\n\t\treturn this.shadowRoot.querySelector(\"[ui5-tokenizer]\");\n\t}\n\n\tinputFocusIn(event) {\n\t\tif (!isPhone() || this.readonly) {\n\t\t\tthis.focused = true;\n\t\t\tthis._tokenizer.expanded = true;\n\t\t} else {\n\t\t\tthis._innerInput.blur();\n\t\t}\n\n\t\tif (!isPhone() && ((event.relatedTarget && event.relatedTarget.tagName !== \"UI5-STATIC-AREA-ITEM\") || !event.relatedTarget)) {\n\t\t\tthis._innerInput.setSelectionRange(0, this.value.length);\n\t\t}\n\n\t\tthis._lastValue = this.value;\n\t\tthis.valueBeforeAutoComplete = \"\";\n\t}\n\n\tinputFocusOut(event) {\n\t\tif (!this.shadowRoot.contains(event.relatedTarget) && !this._deleting) {\n\t\t\tthis.focused = false;\n\t\t\tthis._tokenizer.expanded = this.open;\n\t\t\t// remove the value if user focus out the input and focus is not going in the popover\n\t\t\tif (!isPhone() && !this.allowCustomValues && (this.staticAreaItem !== event.relatedTarget)) {\n\t\t\t\tthis.value = \"\";\n\t\t\t}\n\t\t}\n\t}\n\n\tget editable() {\n\t\treturn !this.readonly;\n\t}\n\n\tget _isFocusInside() {\n\t\treturn !isPhone() && (this.focused || this._tokenizerFocused);\n\t}\n\n\tget selectedItemsListMode() {\n\t\treturn this.readonly ? \"None\" : \"MultiSelect\";\n\t}\n\n\tget _listItemsType() {\n\t\treturn this.readonly ? \"Inactive\" : \"Active\";\n\t}\n\n\tget hasValueState() {\n\t\treturn this.valueState !== ValueState.None;\n\t}\n\n\tget hasValueStateMessage() {\n\t\treturn this.hasValueState && this.valueState !== ValueState.Success;\n\t}\n\n\tget ariaValueStateHiddenText() {\n\t\tif (!this.hasValueState) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.shouldDisplayDefaultValueStateMessage) {\n\t\t\treturn `${this.valueStateTypeMappings[this.valueState]} ${this.valueStateDefaultText}`;\n\t\t}\n\n\t\treturn `${this.valueStateTypeMappings[this.valueState]}`.concat(\" \", this.valueStateMessageText.map(el => el.textContent).join(\" \"));\n\t}\n\n\tget valueStateDefaultText() {\n\t\tlet key = this.valueState;\n\n\t\tif (this._performingSelectionTwice) {\n\t\t\tkey = \"Error_Selection\";\n\t\t}\n\n\t\treturn this.valueStateTextMappings[key];\n\t}\n\n\tget valueStateTextId() {\n\t\treturn this.hasValueState ? `${this._id}-valueStateDesc` : undefined;\n\t}\n\n\tget valueStateMessageText() {\n\t\treturn this.getSlottedNodes(\"valueStateMessage\").map(el => el.cloneNode(true));\n\t}\n\n\tget ariaLabelText() {\n\t\treturn getEffectiveAriaLabelText(this);\n\t}\n\n\t/**\n\t * This method is relevant for sap_horizon theme only\n\t */\n\t get _valueStateMessageIcon() {\n\t\tconst iconPerValueState = {\n\t\t\tError: \"error\",\n\t\t\tWarning: \"alert\",\n\t\t\tSuccess: \"sys-enter-2\",\n\t\t\tInformation: \"information\",\n\t\t};\n\n\t\treturn this.valueState !== ValueState.None ? iconPerValueState[this.valueState] : \"\";\n\t}\n\n\tget _tokensCountText() {\n\t\tif (!this._tokenizer) {\n\t\t\treturn;\n\t\t}\n\t\treturn this._tokenizer._tokensCountText();\n\t}\n\n\tget _tokensCountTextId() {\n\t\treturn `${this._id}-hiddenText-nMore`;\n\t}\n\n\tget _selectedTokensCount() {\n\t\treturn this._tokenizer.tokens.filter(token => token.selected).length;\n\t}\n\n\tget ariaDescribedByText() {\n\t\treturn this.valueStateTextId ? `${this._tokensCountTextId} ${this.valueStateTextId}` : `${this._tokensCountTextId}`;\n\t}\n\n\tget shouldDisplayDefaultValueStateMessage() {\n\t\treturn !this.valueStateMessage.length && this.hasValueStateMessage;\n\t}\n\n\tget shouldDisplayOnlyValueStateMessage() {\n\t\treturn this.focused && !this.readonly && this.hasValueStateMessage && !this._iconPressed;\n\t}\n\n\tget valueStateTextMappings() {\n\t\treturn {\n\t\t\t\"Success\": MultiComboBox.i18nBundle.getText(VALUE_STATE_SUCCESS),\n\t\t\t\"Error\": MultiComboBox.i18nBundle.getText(VALUE_STATE_ERROR),\n\t\t\t\"Error_Selection\": MultiComboBox.i18nBundle.getText(VALUE_STATE_ERROR_ALREADY_SELECTED),\n\t\t\t\"Warning\": MultiComboBox.i18nBundle.getText(VALUE_STATE_WARNING),\n\t\t\t\"Information\": MultiComboBox.i18nBundle.getText(VALUE_STATE_INFORMATION),\n\t\t};\n\t}\n\n\tget valueStateTypeMappings() {\n\t\treturn {\n\t\t\t\"Success\": MultiComboBox.i18nBundle.getText(VALUE_STATE_TYPE_SUCCESS),\n\t\t\t\"Information\": MultiComboBox.i18nBundle.getText(VALUE_STATE_TYPE_INFORMATION),\n\t\t\t\"Error\": MultiComboBox.i18nBundle.getText(VALUE_STATE_TYPE_ERROR),\n\t\t\t\"Warning\": MultiComboBox.i18nBundle.getText(VALUE_STATE_TYPE_WARNING),\n\t\t};\n\t}\n\n\tget _innerInput() {\n\t\tif (isPhone()) {\n\t\t\tif (this.allItemsPopover && this.allItemsPopover.opened) {\n\t\t\t\treturn this.allItemsPopover.querySelector(\"input\");\n\t\t\t}\n\t\t}\n\n\t\treturn this.getDomRef() ? this.getDomRef().querySelector(\"#ui5-multi-combobox-input\") : null;\n\t}\n\n\tget _headerTitleText() {\n\t\treturn MultiComboBox.i18nBundle.getText(INPUT_SUGGESTIONS_TITLE);\n\t}\n\n\tget _iconAccessibleNameText() {\n\t\treturn MultiComboBox.i18nBundle.getText(SELECT_OPTIONS);\n\t}\n\n\tget _dialogOkButton() {\n\t\treturn MultiComboBox.i18nBundle.getText(MULTICOMBOBOX_DIALOG_OK_BUTTON);\n\t}\n\n\tget _tokenizerExpanded() {\n\t\tif (isPhone() || this.readonly) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this._preventTokenizerToggle) {\n\t\t\treturn this._tokenizer.expanded;\n\t\t}\n\n\t\tconst isCurrentlyExpanded = !!this._tokenizer && this._tokenizer.expanded;\n\t\tconst shouldBeExpanded = this.focused || this.open || isCurrentlyExpanded;\n\n\t\treturn shouldBeExpanded;\n\t}\n\n\tget _valueStatePopoverHorizontalAlign() {\n\t\treturn this.effectiveDir !== \"rtl\" ? \"Left\" : \"Right\";\n\t}\n\n\tget classes() {\n\t\treturn {\n\t\t\tpopover: {\n\t\t\t\t\"ui5-multi-combobox-all-items-responsive-popover\": true,\n\t\t\t\t\"ui5-suggestions-popover\": !this.isPhone,\n\t\t\t\t\"ui5-suggestions-popover-with-value-state-header\": !this.isPhone && this.hasValueStateMessage,\n\t\t\t},\n\t\t\tpopoverValueState: {\n\t\t\t\t\"ui5-valuestatemessage-root\": true,\n\t\t\t\t\"ui5-valuestatemessage-header\": true,\n\t\t\t\t\"ui5-valuestatemessage--success\": this.valueState === ValueState.Success,\n\t\t\t\t\"ui5-valuestatemessage--error\": this.valueState === ValueState.Error,\n\t\t\t\t\"ui5-valuestatemessage--warning\": this.valueState === ValueState.Warning,\n\t\t\t\t\"ui5-valuestatemessage--information\": this.valueState === ValueState.Information,\n\t\t\t},\n\t\t};\n\t}\n\n\tget styles() {\n\t\tconst remSizeIxPx = parseInt(getComputedStyle(document.documentElement).fontSize);\n\t\treturn {\n\t\t\tpopoverValueStateMessage: {\n\t\t\t\t\"width\": `${this._listWidth}px`,\n\t\t\t\t\"display\": this._listWidth === 0 ? \"none\" : \"inline-block\",\n\t\t\t},\n\t\t\tpopoverHeader: {\n\t\t\t\t\"max-width\": isPhone() ? \"100%\" : `${this._inputWidth}px`,\n\t\t\t},\n\t\t\tsuggestionsPopover: {\n\t\t\t\t\"min-width\": `${this._inputWidth}px`,\n\t\t\t\t\"max-width\": (this._inputWidth / remSizeIxPx) > 40 ? `${this._inputWidth}px` : \"40rem\",\n\t\t\t},\n\t\t};\n\t}\n\n\tstatic async onDefine() {\n\t\tMultiComboBox.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n\t}\n}\n\nMultiComboBox.define();\n\nexport default MultiComboBox;\n"],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEG,QAAQ,EAAE;MACTb,IAAI,EAAEU;IACP,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEI,UAAU,EAAE;MACXd,IAAI,EAAEzE,UAAU;MAChBiF,YAAY,EAAEjF,UAAU,CAACwF;IAC1B,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEC,QAAQ,EAAE;MACThB,IAAI,EAAEU;IACP,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEO,QAAQ,EAAE;MACTjB,IAAI,EAAEU;IACP,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEQ,MAAM,EAAE;MACPlB,IAAI,EAAEO,MAAM;MACZC,YAAY,EAAE;IACf,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEW,IAAI,EAAE;MACLnB,IAAI,EAAEU;IACP,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEU,cAAc,EAAE;MACfpB,IAAI,EAAEO,MAAM;MACZC,YAAY,EAAEa;IACf,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEC,iBAAiB,EAAE;MAClBtB,IAAI,EAAEO,MAAM;MACZC,YAAY,EAAE;IACf,CAAC;IAEDe,cAAc,EAAE;MACfvB,IAAI,EAAEwB;IACP,CAAC;IAEDC,cAAc,EAAE;MACfzB,IAAI,EAAEU;IACP,CAAC;IAEDgB,OAAO,EAAE;MACR1B,IAAI,EAAEU;IACP,CAAC;IAEDiB,iBAAiB,EAAE;MAClB3B,IAAI,EAAEU;IACP,CAAC;IAEDkB,YAAY,EAAE;MACb5B,IAAI,EAAEU,OAAO;MACbmB,WAAW,EAAE;IACd,CAAC;IAEDC,WAAW,EAAE;MACZ9B,IAAI,EAAE5C,OAAO;MACbyE,WAAW,EAAE;IACd,CAAC;IAEDE,UAAU,EAAE;MACX/B,IAAI,EAAE5C,OAAO;MACboD,YAAY,EAAE,CAAC;MACfqB,WAAW,EAAE;IACd,CAAC;IAEDG,yBAAyB,EAAE;MAC1BhC,IAAI,EAAEU;IACP;EACD,CAAC;EACDuB,MAAM,EAAE,+DAAgE;IACvE;AACF;AACA;AACA;AACA;AACA;IACEC,MAAM,EAAE,CAAC,CAAC;IAEV;AACF;AACA;AACA;AACA;AACA;IACEC,KAAK,EAAE,CAAC,CAAC;IAET;AACF;AACA;AACA;AACA;AACA;AACA;IACE,aAAa,EAAE,CAAC,CAAC;IAEjB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,kBAAkB,EAAE;MACnBC,MAAM,EAAE;QACPC,KAAK,EAAE;UAAErC,IAAI,EAAEsC;QAAM;MACtB;IACD;EACD;AACD,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,aAAa,SAASnH,UAAU,CAAC;EACtC,WAAWsE,QAAQ,GAAG;IACrB,OAAOA,QAAQ;EAChB;EAEA,WAAW8C,MAAM,GAAG;IACnB,OAAOnH,SAAS;EACjB;EAEA,WAAWoH,QAAQ,GAAG;IACrB,OAAOtD,qBAAqB;EAC7B;EAEA,WAAWuD,kBAAkB,GAAG;IAC/B,OAAOtD,4BAA4B;EACpC;EAEA,WAAWC,MAAM,GAAG;IACnB,OAAOA,MAAM;EACd;EAEA,WAAWsD,gBAAgB,GAAG;IAC7B,OAAO,CAACrD,0BAA0B,EAAEC,oBAAoB,EAAEC,cAAc,EAAEC,oBAAoB,CAAC;EAChG;EAEA,WAAWmD,YAAY,GAAG;IACzB,OAAO,CACNlF,iBAAiB,EACjBC,sBAAsB,EACtBE,SAAS,EACTC,KAAK,EACLC,IAAI,EACJE,iBAAiB,EACjBD,OAAO,EACP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"},"metadata":{},"sourceType":"module"}