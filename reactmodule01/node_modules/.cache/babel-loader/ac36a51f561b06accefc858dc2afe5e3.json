{"ast":null,"code":"import isNodeHidden from \"./isNodeHidden.js\";\nimport isNodeClickable from \"./isNodeClickable.js\";\nconst isFocusTrap = el => {\n  return el.hasAttribute(\"data-ui5-focus-trap\");\n};\nconst getFirstFocusableElement = async (container, startFromContainer) => {\n  if (!container || isNodeHidden(container)) {\n    return null;\n  }\n  return findFocusableElement(container, true, startFromContainer);\n};\nconst getLastFocusableElement = async (container, startFromContainer) => {\n  if (!container || isNodeHidden(container)) {\n    return null;\n  }\n  return findFocusableElement(container, false, startFromContainer);\n};\nconst isElemFocusable = el => {\n  return el.hasAttribute(\"data-ui5-focus-redirect\") || !isNodeHidden(el);\n};\nconst findFocusableElement = async (container, forward, startFromContainer) => {\n  let child;\n  if (container.shadowRoot) {\n    child = forward ? container.shadowRoot.firstChild : container.shadowRoot.lastChild;\n  } else if (container.assignedNodes && container.assignedNodes()) {\n    const assignedElements = container.assignedNodes();\n    child = forward ? assignedElements[0] : assignedElements[assignedElements.length - 1];\n  } else if (startFromContainer) {\n    child = container;\n  } else {\n    child = forward ? container.firstElementChild : container.lastElementChild;\n  }\n  let focusableDescendant;\n\n  /* eslint-disable no-await-in-loop */\n\n  while (child) {\n    const originalChild = child;\n    if (child.isUI5Element) {\n      child = await child.getFocusDomRefAsync();\n    }\n    if (!child) {\n      return null;\n    }\n    if (child.nodeType === 1 && isElemFocusable(child) && !isFocusTrap(child)) {\n      if (isNodeClickable(child)) {\n        return child && typeof child.focus === \"function\" ? child : null;\n      }\n      focusableDescendant = await findFocusableElement(child, forward);\n      if (focusableDescendant) {\n        return focusableDescendant && typeof focusableDescendant.focus === \"function\" ? focusableDescendant : null;\n      }\n    }\n    child = forward ? originalChild.nextSibling : originalChild.previousSibling;\n  }\n\n  /* eslint-enable no-await-in-loop */\n\n  return null;\n};\nexport { getFirstFocusableElement, getLastFocusableElement };","map":{"version":3,"names":["isNodeHidden","isNodeClickable","isFocusTrap","el","hasAttribute","getFirstFocusableElement","container","startFromContainer","findFocusableElement","getLastFocusableElement","isElemFocusable","forward","child","shadowRoot","firstChild","lastChild","assignedNodes","assignedElements","length","firstElementChild","lastElementChild","focusableDescendant","originalChild","isUI5Element","getFocusDomRefAsync","nodeType","focus","nextSibling","previousSibling"],"sources":["/home/user/projects/reactwithcap01/reactmodule01/node_modules/@ui5/webcomponents-base/dist/util/FocusableElements.js"],"sourcesContent":["import isNodeHidden from \"./isNodeHidden.js\";\nimport isNodeClickable from \"./isNodeClickable.js\";\n\nconst isFocusTrap = el => {\n\treturn el.hasAttribute(\"data-ui5-focus-trap\");\n};\n\nconst getFirstFocusableElement = async (container, startFromContainer) => {\n\tif (!container || isNodeHidden(container)) {\n\t\treturn null;\n\t}\n\n\treturn findFocusableElement(container, true, startFromContainer);\n};\n\nconst getLastFocusableElement = async (container, startFromContainer) => {\n\tif (!container || isNodeHidden(container)) {\n\t\treturn null;\n\t}\n\n\treturn findFocusableElement(container, false, startFromContainer);\n};\n\nconst isElemFocusable = el => {\n\treturn el.hasAttribute(\"data-ui5-focus-redirect\") || !isNodeHidden(el);\n};\n\nconst findFocusableElement = async (container, forward, startFromContainer) => {\n\tlet child;\n\n\tif (container.shadowRoot) {\n\t\tchild = forward ? container.shadowRoot.firstChild : container.shadowRoot.lastChild;\n\t} else if (container.assignedNodes && container.assignedNodes()) {\n\t\tconst assignedElements = container.assignedNodes();\n\t\tchild = forward ? assignedElements[0] : assignedElements[assignedElements.length - 1];\n\t} else if (startFromContainer) {\n\t\tchild = container;\n\t} else {\n\t\tchild = forward ? container.firstElementChild : container.lastElementChild;\n\t}\n\n\tlet focusableDescendant;\n\n\t/* eslint-disable no-await-in-loop */\n\n\twhile (child) {\n\t\tconst originalChild = child;\n\n\t\tif (child.isUI5Element) {\n\t\t\tchild = await child.getFocusDomRefAsync();\n\t\t}\n\n\t\tif (!child) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (child.nodeType === 1 && isElemFocusable(child) && !isFocusTrap(child)) {\n\t\t\tif (isNodeClickable(child)) {\n\t\t\t\treturn (child && typeof child.focus === \"function\") ? child : null;\n\t\t\t}\n\n\t\t\tfocusableDescendant = await findFocusableElement(child, forward);\n\t\t\tif (focusableDescendant) {\n\t\t\t\treturn (focusableDescendant && typeof focusableDescendant.focus === \"function\") ? focusableDescendant : null;\n\t\t\t}\n\t\t}\n\n\t\tchild = forward ? originalChild.nextSibling : originalChild.previousSibling;\n\t}\n\n\t/* eslint-enable no-await-in-loop */\n\n\treturn null;\n};\n\nexport {\n\tgetFirstFocusableElement,\n\tgetLastFocusableElement,\n};\n"],"mappings":"AAAA,OAAOA,YAAY,MAAM,mBAAmB;AAC5C,OAAOC,eAAe,MAAM,sBAAsB;AAElD,MAAMC,WAAW,GAAGC,EAAE,IAAI;EACzB,OAAOA,EAAE,CAACC,YAAY,CAAC,qBAAqB,CAAC;AAC9C,CAAC;AAED,MAAMC,wBAAwB,GAAG,OAAOC,SAAS,EAAEC,kBAAkB,KAAK;EACzE,IAAI,CAACD,SAAS,IAAIN,YAAY,CAACM,SAAS,CAAC,EAAE;IAC1C,OAAO,IAAI;EACZ;EAEA,OAAOE,oBAAoB,CAACF,SAAS,EAAE,IAAI,EAAEC,kBAAkB,CAAC;AACjE,CAAC;AAED,MAAME,uBAAuB,GAAG,OAAOH,SAAS,EAAEC,kBAAkB,KAAK;EACxE,IAAI,CAACD,SAAS,IAAIN,YAAY,CAACM,SAAS,CAAC,EAAE;IAC1C,OAAO,IAAI;EACZ;EAEA,OAAOE,oBAAoB,CAACF,SAAS,EAAE,KAAK,EAAEC,kBAAkB,CAAC;AAClE,CAAC;AAED,MAAMG,eAAe,GAAGP,EAAE,IAAI;EAC7B,OAAOA,EAAE,CAACC,YAAY,CAAC,yBAAyB,CAAC,IAAI,CAACJ,YAAY,CAACG,EAAE,CAAC;AACvE,CAAC;AAED,MAAMK,oBAAoB,GAAG,OAAOF,SAAS,EAAEK,OAAO,EAAEJ,kBAAkB,KAAK;EAC9E,IAAIK,KAAK;EAET,IAAIN,SAAS,CAACO,UAAU,EAAE;IACzBD,KAAK,GAAGD,OAAO,GAAGL,SAAS,CAACO,UAAU,CAACC,UAAU,GAAGR,SAAS,CAACO,UAAU,CAACE,SAAS;EACnF,CAAC,MAAM,IAAIT,SAAS,CAACU,aAAa,IAAIV,SAAS,CAACU,aAAa,EAAE,EAAE;IAChE,MAAMC,gBAAgB,GAAGX,SAAS,CAACU,aAAa,EAAE;IAClDJ,KAAK,GAAGD,OAAO,GAAGM,gBAAgB,CAAC,CAAC,CAAC,GAAGA,gBAAgB,CAACA,gBAAgB,CAACC,MAAM,GAAG,CAAC,CAAC;EACtF,CAAC,MAAM,IAAIX,kBAAkB,EAAE;IAC9BK,KAAK,GAAGN,SAAS;EAClB,CAAC,MAAM;IACNM,KAAK,GAAGD,OAAO,GAAGL,SAAS,CAACa,iBAAiB,GAAGb,SAAS,CAACc,gBAAgB;EAC3E;EAEA,IAAIC,mBAAmB;;EAEvB;;EAEA,OAAOT,KAAK,EAAE;IACb,MAAMU,aAAa,GAAGV,KAAK;IAE3B,IAAIA,KAAK,CAACW,YAAY,EAAE;MACvBX,KAAK,GAAG,MAAMA,KAAK,CAACY,mBAAmB,EAAE;IAC1C;IAEA,IAAI,CAACZ,KAAK,EAAE;MACX,OAAO,IAAI;IACZ;IAEA,IAAIA,KAAK,CAACa,QAAQ,KAAK,CAAC,IAAIf,eAAe,CAACE,KAAK,CAAC,IAAI,CAACV,WAAW,CAACU,KAAK,CAAC,EAAE;MAC1E,IAAIX,eAAe,CAACW,KAAK,CAAC,EAAE;QAC3B,OAAQA,KAAK,IAAI,OAAOA,KAAK,CAACc,KAAK,KAAK,UAAU,GAAId,KAAK,GAAG,IAAI;MACnE;MAEAS,mBAAmB,GAAG,MAAMb,oBAAoB,CAACI,KAAK,EAAED,OAAO,CAAC;MAChE,IAAIU,mBAAmB,EAAE;QACxB,OAAQA,mBAAmB,IAAI,OAAOA,mBAAmB,CAACK,KAAK,KAAK,UAAU,GAAIL,mBAAmB,GAAG,IAAI;MAC7G;IACD;IAEAT,KAAK,GAAGD,OAAO,GAAGW,aAAa,CAACK,WAAW,GAAGL,aAAa,CAACM,eAAe;EAC5E;;EAEA;;EAEA,OAAO,IAAI;AACZ,CAAC;AAED,SACCvB,wBAAwB,EACxBI,uBAAuB"},"metadata":{},"sourceType":"module"}