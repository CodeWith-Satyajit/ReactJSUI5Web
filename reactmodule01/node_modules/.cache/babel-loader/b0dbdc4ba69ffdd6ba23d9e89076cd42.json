{"ast":null,"code":"import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport ItemNavigation from \"@ui5/webcomponents-base/dist/delegate/ItemNavigation.js\";\nimport ScrollEnablement from \"@ui5/webcomponents-base/dist/delegate/ScrollEnablement.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport { isSpace, isSpaceCtrl, isSpaceShift, isLeftCtrl, isRightCtrl, isUpCtrl, isDownCtrl, isUpShift, isDownShift, isLeftShift, isRightShift, isLeftShiftCtrl, isRightShiftCtrl, isEnd, isHome, isHomeShift, isEndShift, isHomeCtrl, isEndCtrl, isRight, isLeft, isUp, isDown } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport { isPhone } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport Title from \"./Title.js\";\nimport Button from \"./Button.js\";\nimport StandardListItem from \"./StandardListItem.js\";\nimport TokenizerTemplate from \"./generated/templates/TokenizerTemplate.lit.js\";\nimport TokenizerPopoverTemplate from \"./generated/templates/TokenizerPopoverTemplate.lit.js\";\nimport { MULTIINPUT_SHOW_MORE_TOKENS, TOKENIZER_ARIA_LABEL, TOKENIZER_POPOVER_REMOVE, TOKENIZER_ARIA_CONTAIN_TOKEN, TOKENIZER_ARIA_CONTAIN_ONE_TOKEN, TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS } from \"./generated/i18n/i18n-defaults.js\";\n\n// Styles\nimport styles from \"./generated/themes/Tokenizer.css.js\";\nimport TokenizerPopoverCss from \"./generated/themes/TokenizerPopover.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\nimport ValueStateMessageCss from \"./generated/themes/ValueStateMessage.css.js\";\n\n// reuse suggestions focus styling for NMore popup\nimport SuggestionsCss from \"./generated/themes/Suggestions.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n  tag: \"ui5-tokenizer\",\n  languageAware: true,\n  managedSlots: true,\n  slots: /** @lends sap.ui.webcomponents.main.Tokenizer.prototype */{\n    \"default\": {\n      propertyName: \"tokens\",\n      type: HTMLElement,\n      individualSlots: true\n    },\n    \"valueStateMessage\": {\n      propertyName: \"valueStateMessage\",\n      type: HTMLElement\n    }\n  },\n  properties: /** @lends sap.ui.webcomponents.main.Tokenizer.prototype */{\n    showMore: {\n      type: Boolean\n    },\n    disabled: {\n      type: Boolean\n    },\n    /**\n     * Indicates if the tokenizer should show all tokens or n more label instead\n     *\n     * @private\n     */\n    expanded: {\n      type: Boolean\n    },\n    morePopoverOpener: {\n      type: Object\n    },\n    popoverMinWidth: {\n      type: Integer\n    },\n    /**\n     * Indicates the value state of the related input component.\n     *\n     * @type {sap.ui.webcomponents.base.types.ValueState}\n     * @defaultvalue \"None\"\n     * @private\n     */\n    valueState: {\n      type: ValueState,\n      defaultValue: ValueState.None\n    },\n    _nMoreCount: {\n      type: Integer\n    }\n  },\n  events: /** @lends sap.ui.webcomponents.main.Tokenizer.prototype */{\n    \"token-delete\": {\n      detail: {\n        ref: {\n          type: HTMLElement\n        }\n      }\n    },\n    \"show-more-items-press\": {\n      detail: {\n        ref: {\n          type: HTMLElement\n        }\n      }\n    }\n  }\n};\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * A container for tokens.\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.Tokenizer\n * @extends sap.ui.webcomponents.base.UI5Element\n * @tagname ui5-tokenizer\n * @usestextcontent\n * @private\n */\nclass Tokenizer extends UI5Element {\n  static get metadata() {\n    return metadata;\n  }\n  static get render() {\n    return litRender;\n  }\n  static get template() {\n    return TokenizerTemplate;\n  }\n  static get styles() {\n    return styles;\n  }\n  static get staticAreaStyles() {\n    return [ResponsivePopoverCommonCss, ValueStateMessageCss, SuggestionsCss, TokenizerPopoverCss];\n  }\n  static get staticAreaTemplate() {\n    return TokenizerPopoverTemplate;\n  }\n  _handleResize() {\n    this._nMoreCount = this.overflownTokens.length;\n  }\n  constructor() {\n    super();\n    this._resizeHandler = this._handleResize.bind(this);\n    this._itemNav = new ItemNavigation(this, {\n      currentIndex: \"-1\",\n      getItemsCallback: this._getVisibleTokens.bind(this)\n    });\n    this._scrollEnablement = new ScrollEnablement(this);\n  }\n  async onBeforeRendering() {\n    if (this.showPopover && !this._getTokens().length) {\n      const popover = await this.getPopover();\n      popover.close();\n    }\n    this._nMoreCount = this.overflownTokens.length;\n  }\n  onEnterDOM() {\n    ResizeHandler.register(this.shadowRoot.querySelector(\".ui5-tokenizer--content\"), this._resizeHandler);\n  }\n  onExitDOM() {\n    ResizeHandler.deregister(this.shadowRoot.querySelector(\".ui5-tokenizer--content\"), this._resizeHandler);\n  }\n  async _openOverflowPopover() {\n    if (this.showPopover) {\n      const popover = await this.getPopover();\n      popover.showAt(this.morePopoverOpener || this);\n    }\n    this.fireEvent(\"show-more-items-press\");\n  }\n  _getTokens() {\n    return this.getSlottedNodes(\"tokens\");\n  }\n  get _tokens() {\n    return this.getSlottedNodes(\"tokens\");\n  }\n  get showPopover() {\n    return Object.keys(this.morePopoverOpener).length;\n  }\n  _getVisibleTokens() {\n    if (this.disabled) {\n      return [];\n    }\n    return this._tokens.filter((token, index) => {\n      return index < this._tokens.length - this._nMoreCount;\n    });\n  }\n  onAfterRendering() {\n    this._scrollEnablement.scrollContainer = this.expanded || !this.narrowContentDom ? this.expandedContentDom : this.narrowContentDom;\n    if (this.expanded) {\n      this._expandedScrollWidth = this.expandedContentDom.scrollWidth;\n      this.scrollToEnd();\n    }\n    if (!this.expanded) {\n      this.scrollToStart();\n    }\n  }\n  _delete(event) {\n    if (!event.detail) {\n      // if there are no details, the event is triggered by a click\n      this._tokenClickDelete(event, event.target);\n      return;\n    }\n    if (this._selectedTokens.length) {\n      this._selectedTokens.forEach(token => this._tokenKeyboardDelete(event, token));\n    } else {\n      this._tokenKeyboardDelete(event);\n    }\n  }\n  _tokenClickDelete(event, token) {\n    const tokens = this._getVisibleTokens();\n    const deletedTokenIndex = token ? tokens.indexOf(token) : tokens.indexOf(event.target); // The index of the token that just got deleted\n    const nextTokenIndex = deletedTokenIndex === tokens.length - 1 ? deletedTokenIndex - 1 : deletedTokenIndex + 1; // The index of the next token that needs to be focused next due to the deletion\n    const nextToken = tokens[nextTokenIndex]; // if the last item was deleted this will be undefined\n\n    this._handleCurrentItemAfterDeletion(nextToken);\n    this.fireEvent(\"token-delete\", {\n      ref: token || event.target\n    });\n  }\n  _handleCurrentItemAfterDeletion(nextToken) {\n    if (nextToken && !isPhone()) {\n      this._itemNav.setCurrentItem(nextToken); // update the item navigation with the new token or undefined, if the last was deleted\n\n      setTimeout(() => {\n        nextToken.focus();\n      }, 0);\n    }\n  }\n  _tokenKeyboardDelete(event, token) {\n    let nextTokenIndex; // The index of the next token that needs to be focused next due to the deletion\n\n    const tokens = this._getVisibleTokens();\n    const deletedTokenIndex = token ? tokens.indexOf(token) : tokens.indexOf(event.target); // The index of the token that just got deleted\n    const notSelectedTokens = tokens.filter(t => !t.selected);\n    if (event.detail && event.detail.backSpace) {\n      // on backspace key select the previous item (unless deleting the first)\n      nextTokenIndex = deletedTokenIndex === 0 ? deletedTokenIndex + 1 : deletedTokenIndex - 1;\n    } else {\n      // on delete key or mouse click on the \"x\" select the next item (unless deleting the last)\n      nextTokenIndex = deletedTokenIndex === tokens.length - 1 ? deletedTokenIndex - 1 : deletedTokenIndex + 1;\n    }\n    let nextToken = tokens[nextTokenIndex]; // if the last item was deleted this will be undefined\n\n    if (notSelectedTokens.length > 1) {\n      while (nextToken && nextToken.selected) {\n        nextToken = event.detail.backSpace ? tokens[--nextTokenIndex] : tokens[++nextTokenIndex];\n      }\n    } else {\n      nextToken = notSelectedTokens[0];\n    }\n    this._handleCurrentItemAfterDeletion(nextToken);\n    this.fireEvent(\"token-delete\", {\n      ref: token || event.target\n    });\n  }\n  itemDelete(event) {\n    const token = event.detail.item.tokenRef;\n    this.fireEvent(\"token-delete\", {\n      ref: token\n    });\n  }\n  _onkeydown(event) {\n    if (isSpaceShift(event)) {\n      event.preventDefault();\n    }\n    if (isSpace(event) || isSpaceCtrl(event)) {\n      event.preventDefault();\n      return this._handleTokenSelection(event, false);\n    }\n    if (isHomeShift(event)) {\n      this._handleHomeShift(event);\n    }\n    if (isEndShift(event)) {\n      this._handleEndShift(event);\n    }\n    this._handleItemNavigation(event, this._tokens);\n  }\n  _handleItemNavigation(event, tokens) {\n    const isCtrl = !!(event.metaKey || event.ctrlKey);\n    if (isLeftCtrl(event) || isRightCtrl(event) || isDownCtrl(event) || isUpCtrl(event)) {\n      return this._handleArrowCtrl(event, event.target, tokens, isRightCtrl(event) || isDownCtrl(event));\n    }\n    if (isLeftShift(event) || isRightShift(event) || isUpShift(event) || isDownShift(event) || isLeftShiftCtrl(event) || isRightShiftCtrl(event)) {\n      event.preventDefault();\n      return this._handleArrowShift(event.target, tokens, isRightShift(event) || isRightShiftCtrl(event) || isDownShift(event));\n    }\n    if (isHome(event) || isEnd(event) || isHomeCtrl(event) || isEndCtrl(event)) {\n      event.preventDefault();\n      return this._handleHome(tokens, isEnd(event) || isEndCtrl(event));\n    }\n    if (isCtrl && event.key.toLowerCase() === \"a\") {\n      event.preventDefault();\n      return this._toggleTokenSelection(tokens);\n    }\n    if (isLeft(event) || isRight(event) || isUp(event) || isDown(event)) {\n      const nextTokenIdx = this._calcNextTokenIndex(this._tokens.find(token => token.focused), tokens, isRight(event) || isDown(event));\n      this._scrollToToken(tokens[nextTokenIdx]);\n    }\n  }\n  _handleHome(tokens, endKeyPressed) {\n    if (!tokens || !tokens.length) {\n      return -1;\n    }\n    const index = endKeyPressed ? tokens.length - 1 : 0;\n    tokens[index].focus();\n    this._itemNav.setCurrentItem(tokens[index]);\n  }\n  _handleHomeShift(event) {\n    const tokens = this.tokens;\n    const currentTokenIdx = tokens.indexOf(event.target);\n    tokens.filter((token, index) => index <= currentTokenIdx).forEach(token => {\n      token.selected = true;\n    });\n    tokens[0].focus();\n    this._itemNav.setCurrentItem(tokens[0]);\n  }\n  _handleEndShift(event) {\n    const tokens = this.tokens;\n    const currentTokenIdx = tokens.indexOf(event.target);\n    tokens.filter((token, index) => index >= currentTokenIdx).forEach(token => {\n      token.selected = true;\n    });\n    tokens[tokens.length - 1].focus();\n    this._itemNav.setCurrentItem(tokens[tokens.length - 1]);\n  }\n  _calcNextTokenIndex(focusedToken, tokens, backwards) {\n    if (!tokens.length) {\n      return -1;\n    }\n    const focusedTokenIndex = tokens.indexOf(focusedToken);\n    let nextIndex = backwards ? focusedTokenIndex + 1 : focusedTokenIndex - 1;\n    if (nextIndex >= tokens.length) {\n      nextIndex = tokens.length - 1;\n    }\n    if (nextIndex < 0) {\n      nextIndex = 0;\n    }\n    return nextIndex;\n  }\n  _handleArrowCtrl(event, focusedToken, tokens, backwards) {\n    const nextIndex = this._calcNextTokenIndex(focusedToken, tokens, backwards);\n    event.preventDefault();\n    if (nextIndex === -1) {\n      return;\n    }\n    setTimeout(() => tokens[nextIndex].focus(), 0);\n    this._scrollToToken(tokens[nextIndex]);\n    this._itemNav.setCurrentItem(tokens[nextIndex]);\n  }\n  _handleArrowShift(focusedToken, tokens, backwards) {\n    const focusedTokenIndex = tokens.indexOf(focusedToken);\n    const nextIndex = backwards ? focusedTokenIndex + 1 : focusedTokenIndex - 1;\n    if (nextIndex === -1 || nextIndex === tokens.length) {\n      return;\n    }\n    focusedToken.selected = true;\n    tokens[nextIndex].selected = true;\n    setTimeout(() => tokens[nextIndex].focus(), 0);\n    this._scrollToToken(tokens[nextIndex]);\n    this._itemNav.setCurrentItem(tokens[nextIndex]);\n  }\n  _click(event) {\n    this._handleTokenSelection(event);\n  }\n  _onmousedown(event) {\n    this._itemNav.setCurrentItem(event.target);\n    this._scrollToToken(event.target);\n  }\n  _toggleTokenSelection(tokens) {\n    if (!tokens || !tokens.length) {\n      return;\n    }\n    const tokensAreSelected = tokens.every(token => token.selected);\n    tokens.forEach(token => {\n      token.selected = !tokensAreSelected;\n    });\n  }\n  _handleTokenSelection(event) {\n    let deselectAll = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    if (event.target.hasAttribute(\"ui5-token\")) {\n      const deselectTokens = deselectAll ? this._tokens : [event.target];\n      deselectTokens.forEach(token => {\n        if (token !== event.target) {\n          token.selected = false;\n        }\n      });\n    }\n  }\n  _fillClipboard(shortcutName, tokens) {\n    const tokensTexts = tokens.filter(token => token.selected).map(token => token.text).join(\"\\r\\n\");\n\n    /* fill clipboard with tokens' texts so parent can handle creation */\n    const cutToClipboard = event => {\n      if (event.clipboardData) {\n        event.clipboardData.setData(\"text/plain\", tokensTexts);\n      } else {\n        event.originalEvent.clipboardData.setData(\"text/plain\", tokensTexts);\n      }\n      event.preventDefault();\n    };\n    document.addEventListener(shortcutName, cutToClipboard);\n    document.execCommand(shortcutName);\n    document.removeEventListener(shortcutName, cutToClipboard);\n  }\n\n  /**\n   * Scrolls the container of the tokens to its beginning.\n   * This method is used by MultiInput and MultiComboBox.\n   * @private\n   */\n  scrollToStart() {\n    if (this._scrollEnablement.scrollContainer) {\n      this._scrollEnablement.scrollTo(0, 0);\n    }\n  }\n\n  /**\n   * Scrolls the container of the tokens to its end when expanded.\n   * This method is used by MultiInput and MultiComboBox.\n   * @private\n   */\n  scrollToEnd() {\n    const expandedTokenizerScrollWidth = this.expandedContentDom && (this.effectiveDir !== \"rtl\" ? this.expandedContentDom.scrollWidth : -this.expandedContentDom.scrollWidth);\n    if (this._scrollEnablement.scrollContainer) {\n      this._scrollEnablement.scrollTo(expandedTokenizerScrollWidth, 0, 5, 10);\n    }\n  }\n\n  /**\n   * Scrolls token to the visible area of the container.\n   * Adds 4 pixels to the scroll position to ensure padding and border visibility on both ends\n   * @private\n   */\n  _scrollToToken(token) {\n    if (!this.expandedContentDom) {\n      return;\n    }\n    const tokenRect = token.getBoundingClientRect();\n    const tokenContainerRect = this.expandedContentDom.getBoundingClientRect();\n    if (tokenRect.left < tokenContainerRect.left) {\n      this._scrollEnablement.scrollTo(this.expandedContentDom.scrollLeft - (tokenContainerRect.left - tokenRect.left + 5), 0);\n    } else if (tokenRect.right > tokenContainerRect.right) {\n      this._scrollEnablement.scrollTo(this.expandedContentDom.scrollLeft + (tokenRect.right - tokenContainerRect.right + 5), 0);\n    }\n  }\n  async closeMorePopover() {\n    const popover = await this.getPopover();\n    popover.close();\n  }\n  get _nMoreText() {\n    return Tokenizer.i18nBundle.getText(MULTIINPUT_SHOW_MORE_TOKENS, this._nMoreCount);\n  }\n  get showNMore() {\n    return !this.expanded && this.showMore && this.overflownTokens.length;\n  }\n  get contentDom() {\n    return this.shadowRoot.querySelector(\".ui5-tokenizer--content\");\n  }\n  get expandedContentDom() {\n    return this.shadowRoot.querySelector(\".ui5-tokenizer-expanded--content\");\n  }\n  get narrowContentDom() {\n    return this.shadowRoot.querySelector(\".ui5-tokenizer-nmore--content\");\n  }\n  get tokenizerLabel() {\n    return Tokenizer.i18nBundle.getText(TOKENIZER_ARIA_LABEL);\n  }\n  get morePopoverTitle() {\n    return Tokenizer.i18nBundle.getText(TOKENIZER_POPOVER_REMOVE);\n  }\n  get overflownTokens() {\n    if (!this.contentDom) {\n      return [];\n    }\n\n    // Reset the overflow prop of the tokens first in order\n    // to use their dimensions for calculation because already\n    // hidden tokens are set to 'display: none'\n    this._getTokens().forEach(token => {\n      token.overflows = false;\n    });\n    return this._getTokens().filter(token => {\n      const parentRect = this.contentDom.getBoundingClientRect();\n      const tokenRect = token.getBoundingClientRect();\n      const tokenEnd = parseInt(tokenRect.right);\n      const parentEnd = parseInt(parentRect.right);\n      const tokenStart = parseInt(tokenRect.left);\n      const parentStart = parseInt(parentRect.left);\n      token.overflows = !this.expanded && (tokenStart < parentStart || tokenEnd > parentEnd);\n      return token.overflows;\n    });\n  }\n  get hasValueState() {\n    return this.valueState === ValueState.None || this.valueState === ValueState.Success;\n  }\n  get valueStateMessageText() {\n    return this.getSlottedNodes(\"valueStateMessage\").map(el => el.cloneNode(true));\n  }\n\n  /**\n   * This method is relevant for sap_horizon theme only\n   */\n  get _valueStateMessageIcon() {\n    const iconPerValueState = {\n      Error: \"error\",\n      Warning: \"alert\",\n      Success: \"sys-enter-2\",\n      Information: \"information\"\n    };\n    return this.valueState !== ValueState.None ? iconPerValueState[this.valueState] : \"\";\n  }\n  get _isPhone() {\n    return isPhone();\n  }\n  get _selectedTokens() {\n    return this._getTokens().filter(token => token.selected);\n  }\n  get classes() {\n    return {\n      wrapper: {\n        \"ui5-tokenizer-root\": true,\n        \"ui5-tokenizer-nmore--wrapper\": this.showMore,\n        \"ui5-tokenizer-no-padding\": !this._getTokens().length\n      },\n      content: {\n        \"ui5-tokenizer--content\": true,\n        \"ui5-tokenizer-expanded--content\": !this.showNMore,\n        \"ui5-tokenizer-nmore--content\": this.showNMore\n      },\n      popoverValueState: {\n        \"ui5-valuestatemessage-root\": true,\n        \"ui5-responsive-popover-header\": this.showPopover,\n        \"ui5-valuestatemessage--success\": this.valueState === ValueState.Success,\n        \"ui5-valuestatemessage--error\": this.valueState === ValueState.Error,\n        \"ui5-valuestatemessage--warning\": this.valueState === ValueState.Warning,\n        \"ui5-valuestatemessage--information\": this.valueState === ValueState.Information\n      }\n    };\n  }\n  get styles() {\n    return {\n      popover: {\n        \"min-width\": `${this.popoverMinWidth}px`\n      },\n      popoverValueStateMessage: {\n        \"width\": isPhone() ? \"100%\" : `${this.popoverMinWidth}px`,\n        \"min-height\": \"2rem\"\n      },\n      popoverHeader: {\n        \"min-height\": \"2rem\"\n      },\n      popoverHeaderTitle: {\n        \"justify-content\": \"left\"\n      }\n    };\n  }\n  _tokensCountText() {\n    const iTokenCount = this._getTokens().length;\n    if (iTokenCount === 0) {\n      return Tokenizer.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_TOKEN);\n    }\n    if (iTokenCount === 1) {\n      return Tokenizer.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_ONE_TOKEN);\n    }\n    return Tokenizer.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS, iTokenCount);\n  }\n\n  /**\n   * @protected\n   */\n  _focusLastToken() {\n    if (this.tokens.length === 0) {\n      return;\n    }\n    const lastToken = this.tokens[this.tokens.length - 1];\n    lastToken.focus();\n    this._itemNav.setCurrentItem(lastToken);\n  }\n  static get dependencies() {\n    return [ResponsivePopover, List, StandardListItem, Title, Button];\n  }\n  static async onDefine() {\n    Tokenizer.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n  }\n  async getPopover() {\n    return (await this.getStaticAreaItemDomRef()).querySelector(\"[ui5-responsive-popover]\");\n  }\n}\nTokenizer.define();\nexport default Tokenizer;","map":{"version":3,"names":["UI5Element","litRender","ResizeHandler","ItemNavigation","ScrollEnablement","Integer","getI18nBundle","isSpace","isSpaceCtrl","isSpaceShift","isLeftCtrl","isRightCtrl","isUpCtrl","isDownCtrl","isUpShift","isDownShift","isLeftShift","isRightShift","isLeftShiftCtrl","isRightShiftCtrl","isEnd","isHome","isHomeShift","isEndShift","isHomeCtrl","isEndCtrl","isRight","isLeft","isUp","isDown","isPhone","ValueState","ResponsivePopover","List","Title","Button","StandardListItem","TokenizerTemplate","TokenizerPopoverTemplate","MULTIINPUT_SHOW_MORE_TOKENS","TOKENIZER_ARIA_LABEL","TOKENIZER_POPOVER_REMOVE","TOKENIZER_ARIA_CONTAIN_TOKEN","TOKENIZER_ARIA_CONTAIN_ONE_TOKEN","TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS","styles","TokenizerPopoverCss","ResponsivePopoverCommonCss","ValueStateMessageCss","SuggestionsCss","metadata","tag","languageAware","managedSlots","slots","propertyName","type","HTMLElement","individualSlots","properties","showMore","Boolean","disabled","expanded","morePopoverOpener","Object","popoverMinWidth","valueState","defaultValue","None","_nMoreCount","events","detail","ref","Tokenizer","render","template","staticAreaStyles","staticAreaTemplate","_handleResize","overflownTokens","length","constructor","_resizeHandler","bind","_itemNav","currentIndex","getItemsCallback","_getVisibleTokens","_scrollEnablement","onBeforeRendering","showPopover","_getTokens","popover","getPopover","close","onEnterDOM","register","shadowRoot","querySelector","onExitDOM","deregister","_openOverflowPopover","showAt","fireEvent","getSlottedNodes","_tokens","keys","filter","token","index","onAfterRendering","scrollContainer","narrowContentDom","expandedContentDom","_expandedScrollWidth","scrollWidth","scrollToEnd","scrollToStart","_delete","event","_tokenClickDelete","target","_selectedTokens","forEach","_tokenKeyboardDelete","tokens","deletedTokenIndex","indexOf","nextTokenIndex","nextToken","_handleCurrentItemAfterDeletion","setCurrentItem","setTimeout","focus","notSelectedTokens","t","selected","backSpace","itemDelete","item","tokenRef","_onkeydown","preventDefault","_handleTokenSelection","_handleHomeShift","_handleEndShift","_handleItemNavigation","isCtrl","metaKey","ctrlKey","_handleArrowCtrl","_handleArrowShift","_handleHome","key","toLowerCase","_toggleTokenSelection","nextTokenIdx","_calcNextTokenIndex","find","focused","_scrollToToken","endKeyPressed","currentTokenIdx","focusedToken","backwards","focusedTokenIndex","nextIndex","_click","_onmousedown","tokensAreSelected","every","deselectAll","hasAttribute","deselectTokens","_fillClipboard","shortcutName","tokensTexts","map","text","join","cutToClipboard","clipboardData","setData","originalEvent","document","addEventListener","execCommand","removeEventListener","scrollTo","expandedTokenizerScrollWidth","effectiveDir","tokenRect","getBoundingClientRect","tokenContainerRect","left","scrollLeft","right","closeMorePopover","_nMoreText","i18nBundle","getText","showNMore","contentDom","tokenizerLabel","morePopoverTitle","overflows","parentRect","tokenEnd","parseInt","parentEnd","tokenStart","parentStart","hasValueState","Success","valueStateMessageText","el","cloneNode","_valueStateMessageIcon","iconPerValueState","Error","Warning","Information","_isPhone","classes","wrapper","content","popoverValueState","popoverValueStateMessage","popoverHeader","popoverHeaderTitle","_tokensCountText","iTokenCount","_focusLastToken","lastToken","dependencies","onDefine","getStaticAreaItemDomRef","define"],"sources":["/home/user/projects/reactwithcap01/reactmodule01/node_modules/@ui5/webcomponents/dist/Tokenizer.js"],"sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport ItemNavigation from \"@ui5/webcomponents-base/dist/delegate/ItemNavigation.js\";\nimport ScrollEnablement from \"@ui5/webcomponents-base/dist/delegate/ScrollEnablement.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport {\n\tisSpace,\n\tisSpaceCtrl,\n\tisSpaceShift,\n\tisLeftCtrl,\n\tisRightCtrl,\n\tisUpCtrl,\n\tisDownCtrl,\n\tisUpShift,\n\tisDownShift,\n\tisLeftShift,\n\tisRightShift,\n\tisLeftShiftCtrl,\n\tisRightShiftCtrl,\n\tisEnd,\n\tisHome,\n\tisHomeShift,\n\tisEndShift,\n\tisHomeCtrl,\n\tisEndCtrl,\n\tisRight,\n\tisLeft,\n\tisUp,\n\tisDown,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport { isPhone } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport Title from \"./Title.js\";\nimport Button from \"./Button.js\";\nimport StandardListItem from \"./StandardListItem.js\";\nimport TokenizerTemplate from \"./generated/templates/TokenizerTemplate.lit.js\";\nimport TokenizerPopoverTemplate from \"./generated/templates/TokenizerPopoverTemplate.lit.js\";\nimport {\n\tMULTIINPUT_SHOW_MORE_TOKENS,\n\tTOKENIZER_ARIA_LABEL,\n\tTOKENIZER_POPOVER_REMOVE,\n\tTOKENIZER_ARIA_CONTAIN_TOKEN,\n\tTOKENIZER_ARIA_CONTAIN_ONE_TOKEN,\n\tTOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS,\n} from \"./generated/i18n/i18n-defaults.js\";\n\n// Styles\nimport styles from \"./generated/themes/Tokenizer.css.js\";\nimport TokenizerPopoverCss from \"./generated/themes/TokenizerPopover.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\nimport ValueStateMessageCss from \"./generated/themes/ValueStateMessage.css.js\";\n\n// reuse suggestions focus styling for NMore popup\nimport SuggestionsCss from \"./generated/themes/Suggestions.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\ttag: \"ui5-tokenizer\",\n\tlanguageAware: true,\n\tmanagedSlots: true,\n\tslots: /** @lends sap.ui.webcomponents.main.Tokenizer.prototype */ {\n\t\t\"default\": {\n\t\t\tpropertyName: \"tokens\",\n\t\t\ttype: HTMLElement,\n\t\t\tindividualSlots: true,\n\t\t},\n\t\t\"valueStateMessage\": {\n\t\t\tpropertyName: \"valueStateMessage\",\n\t\t\ttype: HTMLElement,\n\t\t},\n\t},\n\tproperties: /** @lends sap.ui.webcomponents.main.Tokenizer.prototype */ {\n\t\tshowMore: { type: Boolean },\n\n\t\tdisabled: { type: Boolean },\n\n\t\t/**\n\t\t * Indicates if the tokenizer should show all tokens or n more label instead\n\t\t *\n\t\t * @private\n\t\t */\n\t\texpanded: { type: Boolean },\n\n\t\tmorePopoverOpener: { type: Object },\n\n\t\tpopoverMinWidth: {\n\t\t\ttype: Integer,\n\t\t},\n\n\t\t/**\n\t\t * Indicates the value state of the related input component.\n\t\t *\n\t\t * @type {sap.ui.webcomponents.base.types.ValueState}\n\t\t * @defaultvalue \"None\"\n\t\t * @private\n\t\t */\n\t\tvalueState: {\n\t\t\ttype: ValueState,\n\t\t\tdefaultValue: ValueState.None,\n\t\t},\n\n\t\t_nMoreCount: { type: Integer },\n\t},\n\tevents: /** @lends sap.ui.webcomponents.main.Tokenizer.prototype */ {\n\t\t\"token-delete\": {\n\t\t\tdetail: {\n\t\t\t\tref: { type: HTMLElement },\n\t\t\t},\n\t\t},\n\n\t\t\"show-more-items-press\": {\n\t\t\tdetail: {\n\t\t\t\tref: { type: HTMLElement },\n\t\t\t},\n\t\t},\n\t},\n};\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * A container for tokens.\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.Tokenizer\n * @extends sap.ui.webcomponents.base.UI5Element\n * @tagname ui5-tokenizer\n * @usestextcontent\n * @private\n */\nclass Tokenizer extends UI5Element {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get render() {\n\t\treturn litRender;\n\t}\n\n\tstatic get template() {\n\t\treturn TokenizerTemplate;\n\t}\n\n\tstatic get styles() {\n\t\treturn styles;\n\t}\n\n\tstatic get staticAreaStyles() {\n\t\treturn [ResponsivePopoverCommonCss, ValueStateMessageCss, SuggestionsCss, TokenizerPopoverCss];\n\t}\n\n\tstatic get staticAreaTemplate() {\n\t\treturn TokenizerPopoverTemplate;\n\t}\n\n\t_handleResize() {\n\t\tthis._nMoreCount = this.overflownTokens.length;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._resizeHandler = this._handleResize.bind(this);\n\n\t\tthis._itemNav = new ItemNavigation(this, {\n\t\t\tcurrentIndex: \"-1\",\n\t\t\tgetItemsCallback: this._getVisibleTokens.bind(this),\n\t\t});\n\n\t\tthis._scrollEnablement = new ScrollEnablement(this);\n\t}\n\n\tasync onBeforeRendering() {\n\t\tif (this.showPopover && !this._getTokens().length) {\n\t\t\tconst popover = await this.getPopover();\n\t\t\tpopover.close();\n\t\t}\n\n\t\tthis._nMoreCount = this.overflownTokens.length;\n\t}\n\n\tonEnterDOM() {\n\t\tResizeHandler.register(this.shadowRoot.querySelector(\".ui5-tokenizer--content\"), this._resizeHandler);\n\t}\n\n\tonExitDOM() {\n\t\tResizeHandler.deregister(this.shadowRoot.querySelector(\".ui5-tokenizer--content\"), this._resizeHandler);\n\t}\n\n\tasync _openOverflowPopover() {\n\t\tif (this.showPopover) {\n\t\t\tconst popover = await this.getPopover();\n\n\t\t\tpopover.showAt(this.morePopoverOpener || this);\n\t\t}\n\n\t\tthis.fireEvent(\"show-more-items-press\");\n\t}\n\n\t_getTokens() {\n\t\treturn this.getSlottedNodes(\"tokens\");\n\t}\n\n\tget _tokens() {\n\t\treturn this.getSlottedNodes(\"tokens\");\n\t}\n\n\tget showPopover() {\n\t\treturn Object.keys(this.morePopoverOpener).length;\n\t}\n\n\t_getVisibleTokens() {\n\t\tif (this.disabled) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn this._tokens.filter((token, index) => {\n\t\t\treturn index < (this._tokens.length - this._nMoreCount);\n\t\t});\n\t}\n\n\tonAfterRendering() {\n\t\tthis._scrollEnablement.scrollContainer = (this.expanded || !this.narrowContentDom) ? this.expandedContentDom : this.narrowContentDom;\n\n\t\tif (this.expanded) {\n\t\t\tthis._expandedScrollWidth = this.expandedContentDom.scrollWidth;\n\t\t\tthis.scrollToEnd();\n\t\t}\n\n\t\tif (!this.expanded) {\n\t\t\tthis.scrollToStart();\n\t\t}\n\t}\n\n\t_delete(event) {\n\t\tif (!event.detail) { // if there are no details, the event is triggered by a click\n\t\t\tthis._tokenClickDelete(event, event.target);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._selectedTokens.length) {\n\t\t\tthis._selectedTokens.forEach(token => this._tokenKeyboardDelete(event, token));\n\t\t} else {\n\t\t\tthis._tokenKeyboardDelete(event);\n\t\t}\n\t}\n\n\t_tokenClickDelete(event, token) {\n\t\tconst tokens = this._getVisibleTokens();\n\t\tconst deletedTokenIndex = token ? tokens.indexOf(token) : tokens.indexOf(event.target); // The index of the token that just got deleted\n\t\tconst nextTokenIndex = deletedTokenIndex === tokens.length - 1 ? deletedTokenIndex - 1 : deletedTokenIndex + 1; // The index of the next token that needs to be focused next due to the deletion\n\t\tconst nextToken = tokens[nextTokenIndex]; // if the last item was deleted this will be undefined\n\n\t\tthis._handleCurrentItemAfterDeletion(nextToken);\n\n\t\tthis.fireEvent(\"token-delete\", { ref: token || event.target });\n\t}\n\n\t_handleCurrentItemAfterDeletion(nextToken) {\n\t\tif (nextToken && !isPhone()) {\n\t\t\tthis._itemNav.setCurrentItem(nextToken); // update the item navigation with the new token or undefined, if the last was deleted\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tnextToken.focus();\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\t_tokenKeyboardDelete(event, token) {\n\t\tlet nextTokenIndex; // The index of the next token that needs to be focused next due to the deletion\n\n\t\tconst tokens = this._getVisibleTokens();\n\t\tconst deletedTokenIndex = token ? tokens.indexOf(token) : tokens.indexOf(event.target); // The index of the token that just got deleted\n\t\tconst notSelectedTokens = tokens.filter(t => !t.selected);\n\n\t\tif (event.detail && event.detail.backSpace) { // on backspace key select the previous item (unless deleting the first)\n\t\t\tnextTokenIndex = deletedTokenIndex === 0 ? deletedTokenIndex + 1 : deletedTokenIndex - 1;\n\t\t} else { // on delete key or mouse click on the \"x\" select the next item (unless deleting the last)\n\t\t\tnextTokenIndex = deletedTokenIndex === tokens.length - 1 ? deletedTokenIndex - 1 : deletedTokenIndex + 1;\n\t\t}\n\n\t\tlet nextToken = tokens[nextTokenIndex]; // if the last item was deleted this will be undefined\n\n\t\tif (notSelectedTokens.length > 1) {\n\t\t\twhile (nextToken && nextToken.selected) {\n\t\t\t\tnextToken = event.detail.backSpace ? tokens[--nextTokenIndex] : tokens[++nextTokenIndex];\n\t\t\t}\n\t\t} else {\n\t\t\tnextToken = notSelectedTokens[0];\n\t\t}\n\n\t\tthis._handleCurrentItemAfterDeletion(nextToken);\n\n\t\tthis.fireEvent(\"token-delete\", { ref: token || event.target });\n\t}\n\n\titemDelete(event) {\n\t\tconst token = event.detail.item.tokenRef;\n\n\t\tthis.fireEvent(\"token-delete\", { ref: token });\n\t}\n\n\t_onkeydown(event) {\n\t\tif (isSpaceShift(event)) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (isSpace(event) || isSpaceCtrl(event)) {\n\t\t\tevent.preventDefault();\n\n\t\t\treturn this._handleTokenSelection(event, false);\n\t\t}\n\n\t\tif (isHomeShift(event)) {\n\t\t\tthis._handleHomeShift(event);\n\t\t}\n\n\t\tif (isEndShift(event)) {\n\t\t\tthis._handleEndShift(event);\n\t\t}\n\n\t\tthis._handleItemNavigation(event, this._tokens);\n\t}\n\n\t_handleItemNavigation(event, tokens) {\n\t\tconst isCtrl = !!(event.metaKey || event.ctrlKey);\n\n\t\tif (isLeftCtrl(event) || isRightCtrl(event) || isDownCtrl(event) || isUpCtrl(event)) {\n\t\t\treturn this._handleArrowCtrl(event, event.target, tokens, isRightCtrl(event) || isDownCtrl(event));\n\t\t}\n\n\t\tif (isLeftShift(event) || isRightShift(event) || isUpShift(event) || isDownShift(event) || isLeftShiftCtrl(event) || isRightShiftCtrl(event)) {\n\t\t\tevent.preventDefault();\n\t\t\treturn this._handleArrowShift(event.target, tokens, (isRightShift(event) || isRightShiftCtrl(event) || isDownShift(event)));\n\t\t}\n\n\t\tif (isHome(event) || isEnd(event) || isHomeCtrl(event) || isEndCtrl(event)) {\n\t\t\tevent.preventDefault();\n\t\t\treturn this._handleHome(tokens, isEnd(event) || isEndCtrl(event));\n\t\t}\n\n\t\tif (isCtrl && event.key.toLowerCase() === \"a\") {\n\t\t\tevent.preventDefault();\n\n\t\t\treturn this._toggleTokenSelection(tokens);\n\t\t}\n\n\t\tif (isLeft(event) || isRight(event) || isUp(event) || isDown(event)) {\n\t\t\tconst nextTokenIdx = this._calcNextTokenIndex(this._tokens.find(token => token.focused), tokens, (isRight(event) || isDown(event)));\n\t\t\tthis._scrollToToken(tokens[nextTokenIdx]);\n\t\t}\n\t}\n\n\t_handleHome(tokens, endKeyPressed) {\n\t\tif (!tokens || !tokens.length) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tconst index = endKeyPressed ? tokens.length - 1 : 0;\n\n\t\ttokens[index].focus();\n\t\tthis._itemNav.setCurrentItem(tokens[index]);\n\t}\n\n\t_handleHomeShift(event) {\n\t\tconst tokens = this.tokens;\n\t\tconst currentTokenIdx = tokens.indexOf(event.target);\n\n\t\ttokens.filter((token, index) => index <= currentTokenIdx).forEach(token => {\n\t\t\ttoken.selected = true;\n\t\t});\n\n\t\ttokens[0].focus();\n\t\tthis._itemNav.setCurrentItem(tokens[0]);\n\t}\n\n\t_handleEndShift(event) {\n\t\tconst tokens = this.tokens;\n\t\tconst currentTokenIdx = tokens.indexOf(event.target);\n\n\t\ttokens.filter((token, index) => index >= currentTokenIdx).forEach(token => {\n\t\t\ttoken.selected = true;\n\t\t});\n\n\t\ttokens[tokens.length - 1].focus();\n\t\tthis._itemNav.setCurrentItem(tokens[tokens.length - 1]);\n\t}\n\n\t_calcNextTokenIndex(focusedToken, tokens, backwards) {\n\t\tif (!tokens.length) {\n\t\t\treturn -1;\n\t\t}\n\t\tconst focusedTokenIndex = tokens.indexOf(focusedToken);\n\t\tlet nextIndex = backwards ? (focusedTokenIndex + 1) : (focusedTokenIndex - 1);\n\n\t\tif (nextIndex >= tokens.length) {\n\t\t\tnextIndex = tokens.length - 1;\n\t\t}\n\t\tif (nextIndex < 0) {\n\t\t\tnextIndex = 0;\n\t\t}\n\n\t\treturn nextIndex;\n\t}\n\n\t_handleArrowCtrl(event, focusedToken, tokens, backwards) {\n\t\tconst nextIndex = this._calcNextTokenIndex(focusedToken, tokens, backwards);\n\n\t\tevent.preventDefault();\n\n\t\tif (nextIndex === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetTimeout(() => tokens[nextIndex].focus(), 0);\n\n\t\tthis._scrollToToken(tokens[nextIndex]);\n\t\tthis._itemNav.setCurrentItem(tokens[nextIndex]);\n\t}\n\n\t_handleArrowShift(focusedToken, tokens, backwards) {\n\t\tconst focusedTokenIndex = tokens.indexOf(focusedToken);\n\t\tconst nextIndex = backwards ? (focusedTokenIndex + 1) : (focusedTokenIndex - 1);\n\n\t\tif (nextIndex === -1 || nextIndex === tokens.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tfocusedToken.selected = true;\n\t\ttokens[nextIndex].selected = true;\n\t\tsetTimeout(() => tokens[nextIndex].focus(), 0);\n\n\t\tthis._scrollToToken(tokens[nextIndex]);\n\t\tthis._itemNav.setCurrentItem(tokens[nextIndex]);\n\t}\n\n\t_click(event) {\n\t\tthis._handleTokenSelection(event);\n\t}\n\n\t_onmousedown(event) {\n\t\tthis._itemNav.setCurrentItem(event.target);\n\t\tthis._scrollToToken(event.target);\n\t}\n\n\t_toggleTokenSelection(tokens) {\n\t\tif (!tokens || !tokens.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tokensAreSelected = tokens.every(token => token.selected);\n\t\ttokens.forEach(token => { token.selected = !tokensAreSelected; });\n\t}\n\n\t_handleTokenSelection(event, deselectAll = true) {\n\t\tif (event.target.hasAttribute(\"ui5-token\")) {\n\t\t\tconst deselectTokens = deselectAll ? this._tokens : [event.target];\n\n\t\t\tdeselectTokens.forEach(token => {\n\t\t\t\tif (token !== event.target) {\n\t\t\t\t\ttoken.selected = false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t_fillClipboard(shortcutName, tokens) {\n\t\tconst tokensTexts = tokens.filter(token => token.selected).map(token => token.text).join(\"\\r\\n\");\n\n\t\t/* fill clipboard with tokens' texts so parent can handle creation */\n\t\tconst cutToClipboard = event => {\n\t\t\tif (event.clipboardData) {\n\t\t\t\tevent.clipboardData.setData(\"text/plain\", tokensTexts);\n\t\t\t} else {\n\t\t\t\tevent.originalEvent.clipboardData.setData(\"text/plain\", tokensTexts);\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\t\t};\n\n\t\tdocument.addEventListener(shortcutName, cutToClipboard);\n\t\tdocument.execCommand(shortcutName);\n\t\tdocument.removeEventListener(shortcutName, cutToClipboard);\n\t}\n\n\t/**\n\t * Scrolls the container of the tokens to its beginning.\n\t * This method is used by MultiInput and MultiComboBox.\n\t * @private\n\t */\n\tscrollToStart() {\n\t\tif (this._scrollEnablement.scrollContainer) {\n\t\t\tthis._scrollEnablement.scrollTo(0, 0);\n\t\t}\n\t}\n\n\t/**\n\t * Scrolls the container of the tokens to its end when expanded.\n\t * This method is used by MultiInput and MultiComboBox.\n\t * @private\n\t */\n\tscrollToEnd() {\n\t\tconst expandedTokenizerScrollWidth = this.expandedContentDom && (this.effectiveDir !== \"rtl\" ? this.expandedContentDom.scrollWidth : -this.expandedContentDom.scrollWidth);\n\t\tif (this._scrollEnablement.scrollContainer) {\n\t\t\tthis._scrollEnablement.scrollTo(expandedTokenizerScrollWidth, 0, 5, 10);\n\t\t}\n\t}\n\n\t/**\n\t * Scrolls token to the visible area of the container.\n\t * Adds 4 pixels to the scroll position to ensure padding and border visibility on both ends\n\t * @private\n\t */\n\t_scrollToToken(token) {\n\t\tif (!this.expandedContentDom) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tokenRect = token.getBoundingClientRect();\n\t\tconst tokenContainerRect = this.expandedContentDom.getBoundingClientRect();\n\n\t\tif (tokenRect.left < tokenContainerRect.left) {\n\t\t\tthis._scrollEnablement.scrollTo(this.expandedContentDom.scrollLeft - (tokenContainerRect.left - tokenRect.left + 5), 0);\n\t\t} else if (tokenRect.right > tokenContainerRect.right) {\n\t\t\tthis._scrollEnablement.scrollTo(this.expandedContentDom.scrollLeft + (tokenRect.right - tokenContainerRect.right + 5), 0);\n\t\t}\n\t}\n\n\tasync closeMorePopover() {\n\t\tconst popover = await this.getPopover();\n\n\t\tpopover.close();\n\t}\n\n\tget _nMoreText() {\n\t\treturn Tokenizer.i18nBundle.getText(MULTIINPUT_SHOW_MORE_TOKENS, this._nMoreCount);\n\t}\n\n\tget showNMore() {\n\t\treturn !this.expanded && this.showMore && this.overflownTokens.length;\n\t}\n\n\tget contentDom() {\n\t\treturn this.shadowRoot.querySelector(\".ui5-tokenizer--content\");\n\t}\n\n\tget expandedContentDom() {\n\t\treturn this.shadowRoot.querySelector(\".ui5-tokenizer-expanded--content\");\n\t}\n\n\tget narrowContentDom() {\n\t\treturn this.shadowRoot.querySelector(\".ui5-tokenizer-nmore--content\");\n\t}\n\n\tget tokenizerLabel() {\n\t\treturn Tokenizer.i18nBundle.getText(TOKENIZER_ARIA_LABEL);\n\t}\n\n\tget morePopoverTitle() {\n\t\treturn Tokenizer.i18nBundle.getText(TOKENIZER_POPOVER_REMOVE);\n\t}\n\n\tget overflownTokens() {\n\t\tif (!this.contentDom) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// Reset the overflow prop of the tokens first in order\n\t\t// to use their dimensions for calculation because already\n\t\t// hidden tokens are set to 'display: none'\n\t\tthis._getTokens().forEach(token => {\n\t\t\ttoken.overflows = false;\n\t\t});\n\n\t\treturn this._getTokens().filter(token => {\n\t\t\tconst parentRect = this.contentDom.getBoundingClientRect();\n\t\t\tconst tokenRect = token.getBoundingClientRect();\n\t\t\tconst tokenEnd = parseInt(tokenRect.right);\n\t\t\tconst parentEnd = parseInt(parentRect.right);\n\t\t\tconst tokenStart = parseInt(tokenRect.left);\n\t\t\tconst parentStart = parseInt(parentRect.left);\n\n\t\t\ttoken.overflows = !this.expanded && ((tokenStart < parentStart) || (tokenEnd > parentEnd));\n\n\t\t\treturn token.overflows;\n\t\t});\n\t}\n\n\tget hasValueState() {\n\t\treturn this.valueState === ValueState.None || this.valueState === ValueState.Success;\n\t}\n\n\tget valueStateMessageText() {\n\t\treturn this.getSlottedNodes(\"valueStateMessage\").map(el => el.cloneNode(true));\n\t}\n\n\t/**\n\t * This method is relevant for sap_horizon theme only\n\t */\n\t get _valueStateMessageIcon() {\n\t\tconst iconPerValueState = {\n\t\t\tError: \"error\",\n\t\t\tWarning: \"alert\",\n\t\t\tSuccess: \"sys-enter-2\",\n\t\t\tInformation: \"information\",\n\t\t};\n\n\t\treturn this.valueState !== ValueState.None ? iconPerValueState[this.valueState] : \"\";\n\t}\n\n\tget _isPhone() {\n\t\treturn isPhone();\n\t}\n\n\tget _selectedTokens() {\n\t\treturn this._getTokens().filter(token => token.selected);\n\t}\n\n\tget classes() {\n\t\treturn {\n\t\t\twrapper: {\n\t\t\t\t\"ui5-tokenizer-root\": true,\n\t\t\t\t\"ui5-tokenizer-nmore--wrapper\": this.showMore,\n\t\t\t\t\"ui5-tokenizer-no-padding\": !this._getTokens().length,\n\t\t\t},\n\t\t\tcontent: {\n\t\t\t\t\"ui5-tokenizer--content\": true,\n\t\t\t\t\"ui5-tokenizer-expanded--content\": !this.showNMore,\n\t\t\t\t\"ui5-tokenizer-nmore--content\": this.showNMore,\n\t\t\t},\n\t\t\tpopoverValueState: {\n\t\t\t\t\"ui5-valuestatemessage-root\": true,\n\t\t\t\t\"ui5-responsive-popover-header\": this.showPopover,\n\t\t\t\t\"ui5-valuestatemessage--success\": this.valueState === ValueState.Success,\n\t\t\t\t\"ui5-valuestatemessage--error\": this.valueState === ValueState.Error,\n\t\t\t\t\"ui5-valuestatemessage--warning\": this.valueState === ValueState.Warning,\n\t\t\t\t\"ui5-valuestatemessage--information\": this.valueState === ValueState.Information,\n\t\t\t},\n\t\t};\n\t}\n\n\tget styles() {\n\t\treturn {\n\t\t\tpopover: {\n\t\t\t\t\"min-width\": `${this.popoverMinWidth}px`,\n\t\t\t},\n\t\t\tpopoverValueStateMessage: {\n\t\t\t\t\"width\": isPhone() ? \"100%\" : `${this.popoverMinWidth}px`,\n\t\t\t\t\"min-height\": \"2rem\",\n\t\t\t},\n\t\t\tpopoverHeader: {\n\t\t\t\t\"min-height\": \"2rem\",\n\t\t\t},\n\t\t\tpopoverHeaderTitle: {\n\t\t\t\t\"justify-content\": \"left\",\n\t\t\t},\n\t\t};\n\t}\n\n\t_tokensCountText() {\n\t\tconst iTokenCount = this._getTokens().length;\n\n\t\tif (iTokenCount === 0) {\n\t\t\treturn Tokenizer.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_TOKEN);\n\t\t}\n\n\t\tif (iTokenCount === 1) {\n\t\t\treturn Tokenizer.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_ONE_TOKEN);\n\t\t}\n\n\t\treturn Tokenizer.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS, iTokenCount);\n\t}\n\n\t/**\n\t * @protected\n\t */\n\t_focusLastToken() {\n\t\tif (this.tokens.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst lastToken = this.tokens[this.tokens.length - 1];\n\t\tlastToken.focus();\n\t\tthis._itemNav.setCurrentItem(lastToken);\n\t}\n\n\tstatic get dependencies() {\n\t\treturn [\n\t\t\tResponsivePopover,\n\t\t\tList,\n\t\t\tStandardListItem,\n\t\t\tTitle,\n\t\t\tButton,\n\t\t];\n\t}\n\n\tstatic async onDefine() {\n\t\tTokenizer.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n\t}\n\n\tasync getPopover() {\n\t\treturn (await this.getStaticAreaItemDomRef()).querySelector(\"[ui5-responsive-popover]\");\n\t}\n}\n\nTokenizer.define();\n\nexport default Tokenizer;\n"],"mappings":"AAAA,OAAOA,UAAU,MAAM,4CAA4C;AACnE,OAAOC,SAAS,MAAM,sDAAsD;AAC5E,OAAOC,aAAa,MAAM,wDAAwD;AAClF,OAAOC,cAAc,MAAM,yDAAyD;AACpF,OAAOC,gBAAgB,MAAM,2DAA2D;AACxF,OAAOC,OAAO,MAAM,+CAA+C;AACnE,SAASC,aAAa,QAAQ,4CAA4C;AAC1E,SACCC,OAAO,EACPC,WAAW,EACXC,YAAY,EACZC,UAAU,EACVC,WAAW,EACXC,QAAQ,EACRC,UAAU,EACVC,SAAS,EACTC,WAAW,EACXC,WAAW,EACXC,YAAY,EACZC,eAAe,EACfC,gBAAgB,EAChBC,KAAK,EACLC,MAAM,EACNC,WAAW,EACXC,UAAU,EACVC,UAAU,EACVC,SAAS,EACTC,OAAO,EACPC,MAAM,EACNC,IAAI,EACJC,MAAM,QACA,sCAAsC;AAC7C,SAASC,OAAO,QAAQ,wCAAwC;AAChE,OAAOC,UAAU,MAAM,kDAAkD;AACzE,OAAOC,iBAAiB,MAAM,wBAAwB;AACtD,OAAOC,IAAI,MAAM,WAAW;AAC5B,OAAOC,KAAK,MAAM,YAAY;AAC9B,OAAOC,MAAM,MAAM,aAAa;AAChC,OAAOC,gBAAgB,MAAM,uBAAuB;AACpD,OAAOC,iBAAiB,MAAM,gDAAgD;AAC9E,OAAOC,wBAAwB,MAAM,uDAAuD;AAC5F,SACCC,2BAA2B,EAC3BC,oBAAoB,EACpBC,wBAAwB,EACxBC,4BAA4B,EAC5BC,gCAAgC,EAChCC,qCAAqC,QAC/B,mCAAmC;;AAE1C;AACA,OAAOC,MAAM,MAAM,qCAAqC;AACxD,OAAOC,mBAAmB,MAAM,4CAA4C;AAC5E,OAAOC,0BAA0B,MAAM,mDAAmD;AAC1F,OAAOC,oBAAoB,MAAM,6CAA6C;;AAE9E;AACA,OAAOC,cAAc,MAAM,uCAAuC;;AAElE;AACA;AACA;AACA,MAAMC,QAAQ,GAAG;EAChBC,GAAG,EAAE,eAAe;EACpBC,aAAa,EAAE,IAAI;EACnBC,YAAY,EAAE,IAAI;EAClBC,KAAK,EAAE,2DAA4D;IAClE,SAAS,EAAE;MACVC,YAAY,EAAE,QAAQ;MACtBC,IAAI,EAAEC,WAAW;MACjBC,eAAe,EAAE;IAClB,CAAC;IACD,mBAAmB,EAAE;MACpBH,YAAY,EAAE,mBAAmB;MACjCC,IAAI,EAAEC;IACP;EACD,CAAC;EACDE,UAAU,EAAE,2DAA4D;IACvEC,QAAQ,EAAE;MAAEJ,IAAI,EAAEK;IAAQ,CAAC;IAE3BC,QAAQ,EAAE;MAAEN,IAAI,EAAEK;IAAQ,CAAC;IAE3B;AACF;AACA;AACA;AACA;IACEE,QAAQ,EAAE;MAAEP,IAAI,EAAEK;IAAQ,CAAC;IAE3BG,iBAAiB,EAAE;MAAER,IAAI,EAAES;IAAO,CAAC;IAEnCC,eAAe,EAAE;MAChBV,IAAI,EAAEnD;IACP,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACE8D,UAAU,EAAE;MACXX,IAAI,EAAEzB,UAAU;MAChBqC,YAAY,EAAErC,UAAU,CAACsC;IAC1B,CAAC;IAEDC,WAAW,EAAE;MAAEd,IAAI,EAAEnD;IAAQ;EAC9B,CAAC;EACDkE,MAAM,EAAE,2DAA4D;IACnE,cAAc,EAAE;MACfC,MAAM,EAAE;QACPC,GAAG,EAAE;UAAEjB,IAAI,EAAEC;QAAY;MAC1B;IACD,CAAC;IAED,uBAAuB,EAAE;MACxBe,MAAM,EAAE;QACPC,GAAG,EAAE;UAAEjB,IAAI,EAAEC;QAAY;MAC1B;IACD;EACD;AACD,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMiB,SAAS,SAAS1E,UAAU,CAAC;EAClC,WAAWkD,QAAQ,GAAG;IACrB,OAAOA,QAAQ;EAChB;EAEA,WAAWyB,MAAM,GAAG;IACnB,OAAO1E,SAAS;EACjB;EAEA,WAAW2E,QAAQ,GAAG;IACrB,OAAOvC,iBAAiB;EACzB;EAEA,WAAWQ,MAAM,GAAG;IACnB,OAAOA,MAAM;EACd;EAEA,WAAWgC,gBAAgB,GAAG;IAC7B,OAAO,CAAC9B,0BAA0B,EAAEC,oBAAoB,EAAEC,cAAc,EAAEH,mBAAmB,CAAC;EAC/F;EAEA,WAAWgC,kBAAkB,GAAG;IAC/B,OAAOxC,wBAAwB;EAChC;EAEAyC,aAAa,GAAG;IACf,IAAI,CAACT,WAAW,GAAG,IAAI,CAACU,eAAe,CAACC,MAAM;EAC/C;EAEAC,WAAW,GAAG;IACb,KAAK,EAAE;IAEP,IAAI,CAACC,cAAc,GAAG,IAAI,CAACJ,aAAa,CAACK,IAAI,CAAC,IAAI,CAAC;IAEnD,IAAI,CAACC,QAAQ,GAAG,IAAIlF,cAAc,CAAC,IAAI,EAAE;MACxCmF,YAAY,EAAE,IAAI;MAClBC,gBAAgB,EAAE,IAAI,CAACC,iBAAiB,CAACJ,IAAI,CAAC,IAAI;IACnD,CAAC,CAAC;IAEF,IAAI,CAACK,iBAAiB,GAAG,IAAIrF,gBAAgB,CAAC,IAAI,CAAC;EACpD;EAEA,MAAMsF,iBAAiB,GAAG;IACzB,IAAI,IAAI,CAACC,WAAW,IAAI,CAAC,IAAI,CAACC,UAAU,EAAE,CAACX,MAAM,EAAE;MAClD,MAAMY,OAAO,GAAG,MAAM,IAAI,CAACC,UAAU,EAAE;MACvCD,OAAO,CAACE,KAAK,EAAE;IAChB;IAEA,IAAI,CAACzB,WAAW,GAAG,IAAI,CAACU,eAAe,CAACC,MAAM;EAC/C;EAEAe,UAAU,GAAG;IACZ9F,aAAa,CAAC+F,QAAQ,CAAC,IAAI,CAACC,UAAU,CAACC,aAAa,CAAC,yBAAyB,CAAC,EAAE,IAAI,CAAChB,cAAc,CAAC;EACtG;EAEAiB,SAAS,GAAG;IACXlG,aAAa,CAACmG,UAAU,CAAC,IAAI,CAACH,UAAU,CAACC,aAAa,CAAC,yBAAyB,CAAC,EAAE,IAAI,CAAChB,cAAc,CAAC;EACxG;EAEA,MAAMmB,oBAAoB,GAAG;IAC5B,IAAI,IAAI,CAACX,WAAW,EAAE;MACrB,MAAME,OAAO,GAAG,MAAM,IAAI,CAACC,UAAU,EAAE;MAEvCD,OAAO,CAACU,MAAM,CAAC,IAAI,CAACvC,iBAAiB,IAAI,IAAI,CAAC;IAC/C;IAEA,IAAI,CAACwC,SAAS,CAAC,uBAAuB,CAAC;EACxC;EAEAZ,UAAU,GAAG;IACZ,OAAO,IAAI,CAACa,eAAe,CAAC,QAAQ,CAAC;EACtC;EAEA,IAAIC,OAAO,GAAG;IACb,OAAO,IAAI,CAACD,eAAe,CAAC,QAAQ,CAAC;EACtC;EAEA,IAAId,WAAW,GAAG;IACjB,OAAO1B,MAAM,CAAC0C,IAAI,CAAC,IAAI,CAAC3C,iBAAiB,CAAC,CAACiB,MAAM;EAClD;EAEAO,iBAAiB,GAAG;IACnB,IAAI,IAAI,CAAC1B,QAAQ,EAAE;MAClB,OAAO,EAAE;IACV;IAEA,OAAO,IAAI,CAAC4C,OAAO,CAACE,MAAM,CAAC,CAACC,KAAK,EAAEC,KAAK,KAAK;MAC5C,OAAOA,KAAK,GAAI,IAAI,CAACJ,OAAO,CAACzB,MAAM,GAAG,IAAI,CAACX,WAAY;IACxD,CAAC,CAAC;EACH;EAEAyC,gBAAgB,GAAG;IAClB,IAAI,CAACtB,iBAAiB,CAACuB,eAAe,GAAI,IAAI,CAACjD,QAAQ,IAAI,CAAC,IAAI,CAACkD,gBAAgB,GAAI,IAAI,CAACC,kBAAkB,GAAG,IAAI,CAACD,gBAAgB;IAEpI,IAAI,IAAI,CAAClD,QAAQ,EAAE;MAClB,IAAI,CAACoD,oBAAoB,GAAG,IAAI,CAACD,kBAAkB,CAACE,WAAW;MAC/D,IAAI,CAACC,WAAW,EAAE;IACnB;IAEA,IAAI,CAAC,IAAI,CAACtD,QAAQ,EAAE;MACnB,IAAI,CAACuD,aAAa,EAAE;IACrB;EACD;EAEAC,OAAO,CAACC,KAAK,EAAE;IACd,IAAI,CAACA,KAAK,CAAChD,MAAM,EAAE;MAAE;MACpB,IAAI,CAACiD,iBAAiB,CAACD,KAAK,EAAEA,KAAK,CAACE,MAAM,CAAC;MAC3C;IACD;IAEA,IAAI,IAAI,CAACC,eAAe,CAAC1C,MAAM,EAAE;MAChC,IAAI,CAAC0C,eAAe,CAACC,OAAO,CAACf,KAAK,IAAI,IAAI,CAACgB,oBAAoB,CAACL,KAAK,EAAEX,KAAK,CAAC,CAAC;IAC/E,CAAC,MAAM;MACN,IAAI,CAACgB,oBAAoB,CAACL,KAAK,CAAC;IACjC;EACD;EAEAC,iBAAiB,CAACD,KAAK,EAAEX,KAAK,EAAE;IAC/B,MAAMiB,MAAM,GAAG,IAAI,CAACtC,iBAAiB,EAAE;IACvC,MAAMuC,iBAAiB,GAAGlB,KAAK,GAAGiB,MAAM,CAACE,OAAO,CAACnB,KAAK,CAAC,GAAGiB,MAAM,CAACE,OAAO,CAACR,KAAK,CAACE,MAAM,CAAC,CAAC,CAAC;IACxF,MAAMO,cAAc,GAAGF,iBAAiB,KAAKD,MAAM,CAAC7C,MAAM,GAAG,CAAC,GAAG8C,iBAAiB,GAAG,CAAC,GAAGA,iBAAiB,GAAG,CAAC,CAAC,CAAC;IAChH,MAAMG,SAAS,GAAGJ,MAAM,CAACG,cAAc,CAAC,CAAC,CAAC;;IAE1C,IAAI,CAACE,+BAA+B,CAACD,SAAS,CAAC;IAE/C,IAAI,CAAC1B,SAAS,CAAC,cAAc,EAAE;MAAE/B,GAAG,EAAEoC,KAAK,IAAIW,KAAK,CAACE;IAAO,CAAC,CAAC;EAC/D;EAEAS,+BAA+B,CAACD,SAAS,EAAE;IAC1C,IAAIA,SAAS,IAAI,CAACpG,OAAO,EAAE,EAAE;MAC5B,IAAI,CAACuD,QAAQ,CAAC+C,cAAc,CAACF,SAAS,CAAC,CAAC,CAAC;;MAEzCG,UAAU,CAAC,MAAM;QAChBH,SAAS,CAACI,KAAK,EAAE;MAClB,CAAC,EAAE,CAAC,CAAC;IACN;EACD;EAEAT,oBAAoB,CAACL,KAAK,EAAEX,KAAK,EAAE;IAClC,IAAIoB,cAAc,CAAC,CAAC;;IAEpB,MAAMH,MAAM,GAAG,IAAI,CAACtC,iBAAiB,EAAE;IACvC,MAAMuC,iBAAiB,GAAGlB,KAAK,GAAGiB,MAAM,CAACE,OAAO,CAACnB,KAAK,CAAC,GAAGiB,MAAM,CAACE,OAAO,CAACR,KAAK,CAACE,MAAM,CAAC,CAAC,CAAC;IACxF,MAAMa,iBAAiB,GAAGT,MAAM,CAAClB,MAAM,CAAC4B,CAAC,IAAI,CAACA,CAAC,CAACC,QAAQ,CAAC;IAEzD,IAAIjB,KAAK,CAAChD,MAAM,IAAIgD,KAAK,CAAChD,MAAM,CAACkE,SAAS,EAAE;MAAE;MAC7CT,cAAc,GAAGF,iBAAiB,KAAK,CAAC,GAAGA,iBAAiB,GAAG,CAAC,GAAGA,iBAAiB,GAAG,CAAC;IACzF,CAAC,MAAM;MAAE;MACRE,cAAc,GAAGF,iBAAiB,KAAKD,MAAM,CAAC7C,MAAM,GAAG,CAAC,GAAG8C,iBAAiB,GAAG,CAAC,GAAGA,iBAAiB,GAAG,CAAC;IACzG;IAEA,IAAIG,SAAS,GAAGJ,MAAM,CAACG,cAAc,CAAC,CAAC,CAAC;;IAExC,IAAIM,iBAAiB,CAACtD,MAAM,GAAG,CAAC,EAAE;MACjC,OAAOiD,SAAS,IAAIA,SAAS,CAACO,QAAQ,EAAE;QACvCP,SAAS,GAAGV,KAAK,CAAChD,MAAM,CAACkE,SAAS,GAAGZ,MAAM,CAAC,EAAEG,cAAc,CAAC,GAAGH,MAAM,CAAC,EAAEG,cAAc,CAAC;MACzF;IACD,CAAC,MAAM;MACNC,SAAS,GAAGK,iBAAiB,CAAC,CAAC,CAAC;IACjC;IAEA,IAAI,CAACJ,+BAA+B,CAACD,SAAS,CAAC;IAE/C,IAAI,CAAC1B,SAAS,CAAC,cAAc,EAAE;MAAE/B,GAAG,EAAEoC,KAAK,IAAIW,KAAK,CAACE;IAAO,CAAC,CAAC;EAC/D;EAEAiB,UAAU,CAACnB,KAAK,EAAE;IACjB,MAAMX,KAAK,GAAGW,KAAK,CAAChD,MAAM,CAACoE,IAAI,CAACC,QAAQ;IAExC,IAAI,CAACrC,SAAS,CAAC,cAAc,EAAE;MAAE/B,GAAG,EAAEoC;IAAM,CAAC,CAAC;EAC/C;EAEAiC,UAAU,CAACtB,KAAK,EAAE;IACjB,IAAI/G,YAAY,CAAC+G,KAAK,CAAC,EAAE;MACxBA,KAAK,CAACuB,cAAc,EAAE;IACvB;IAEA,IAAIxI,OAAO,CAACiH,KAAK,CAAC,IAAIhH,WAAW,CAACgH,KAAK,CAAC,EAAE;MACzCA,KAAK,CAACuB,cAAc,EAAE;MAEtB,OAAO,IAAI,CAACC,qBAAqB,CAACxB,KAAK,EAAE,KAAK,CAAC;IAChD;IAEA,IAAIlG,WAAW,CAACkG,KAAK,CAAC,EAAE;MACvB,IAAI,CAACyB,gBAAgB,CAACzB,KAAK,CAAC;IAC7B;IAEA,IAAIjG,UAAU,CAACiG,KAAK,CAAC,EAAE;MACtB,IAAI,CAAC0B,eAAe,CAAC1B,KAAK,CAAC;IAC5B;IAEA,IAAI,CAAC2B,qBAAqB,CAAC3B,KAAK,EAAE,IAAI,CAACd,OAAO,CAAC;EAChD;EAEAyC,qBAAqB,CAAC3B,KAAK,EAAEM,MAAM,EAAE;IACpC,MAAMsB,MAAM,GAAG,CAAC,EAAE5B,KAAK,CAAC6B,OAAO,IAAI7B,KAAK,CAAC8B,OAAO,CAAC;IAEjD,IAAI5I,UAAU,CAAC8G,KAAK,CAAC,IAAI7G,WAAW,CAAC6G,KAAK,CAAC,IAAI3G,UAAU,CAAC2G,KAAK,CAAC,IAAI5G,QAAQ,CAAC4G,KAAK,CAAC,EAAE;MACpF,OAAO,IAAI,CAAC+B,gBAAgB,CAAC/B,KAAK,EAAEA,KAAK,CAACE,MAAM,EAAEI,MAAM,EAAEnH,WAAW,CAAC6G,KAAK,CAAC,IAAI3G,UAAU,CAAC2G,KAAK,CAAC,CAAC;IACnG;IAEA,IAAIxG,WAAW,CAACwG,KAAK,CAAC,IAAIvG,YAAY,CAACuG,KAAK,CAAC,IAAI1G,SAAS,CAAC0G,KAAK,CAAC,IAAIzG,WAAW,CAACyG,KAAK,CAAC,IAAItG,eAAe,CAACsG,KAAK,CAAC,IAAIrG,gBAAgB,CAACqG,KAAK,CAAC,EAAE;MAC7IA,KAAK,CAACuB,cAAc,EAAE;MACtB,OAAO,IAAI,CAACS,iBAAiB,CAAChC,KAAK,CAACE,MAAM,EAAEI,MAAM,EAAG7G,YAAY,CAACuG,KAAK,CAAC,IAAIrG,gBAAgB,CAACqG,KAAK,CAAC,IAAIzG,WAAW,CAACyG,KAAK,CAAC,CAAE;IAC5H;IAEA,IAAInG,MAAM,CAACmG,KAAK,CAAC,IAAIpG,KAAK,CAACoG,KAAK,CAAC,IAAIhG,UAAU,CAACgG,KAAK,CAAC,IAAI/F,SAAS,CAAC+F,KAAK,CAAC,EAAE;MAC3EA,KAAK,CAACuB,cAAc,EAAE;MACtB,OAAO,IAAI,CAACU,WAAW,CAAC3B,MAAM,EAAE1G,KAAK,CAACoG,KAAK,CAAC,IAAI/F,SAAS,CAAC+F,KAAK,CAAC,CAAC;IAClE;IAEA,IAAI4B,MAAM,IAAI5B,KAAK,CAACkC,GAAG,CAACC,WAAW,EAAE,KAAK,GAAG,EAAE;MAC9CnC,KAAK,CAACuB,cAAc,EAAE;MAEtB,OAAO,IAAI,CAACa,qBAAqB,CAAC9B,MAAM,CAAC;IAC1C;IAEA,IAAInG,MAAM,CAAC6F,KAAK,CAAC,IAAI9F,OAAO,CAAC8F,KAAK,CAAC,IAAI5F,IAAI,CAAC4F,KAAK,CAAC,IAAI3F,MAAM,CAAC2F,KAAK,CAAC,EAAE;MACpE,MAAMqC,YAAY,GAAG,IAAI,CAACC,mBAAmB,CAAC,IAAI,CAACpD,OAAO,CAACqD,IAAI,CAAClD,KAAK,IAAIA,KAAK,CAACmD,OAAO,CAAC,EAAElC,MAAM,EAAGpG,OAAO,CAAC8F,KAAK,CAAC,IAAI3F,MAAM,CAAC2F,KAAK,CAAC,CAAE;MACnI,IAAI,CAACyC,cAAc,CAACnC,MAAM,CAAC+B,YAAY,CAAC,CAAC;IAC1C;EACD;EAEAJ,WAAW,CAAC3B,MAAM,EAAEoC,aAAa,EAAE;IAClC,IAAI,CAACpC,MAAM,IAAI,CAACA,MAAM,CAAC7C,MAAM,EAAE;MAC9B,OAAO,CAAC,CAAC;IACV;IAEA,MAAM6B,KAAK,GAAGoD,aAAa,GAAGpC,MAAM,CAAC7C,MAAM,GAAG,CAAC,GAAG,CAAC;IAEnD6C,MAAM,CAAChB,KAAK,CAAC,CAACwB,KAAK,EAAE;IACrB,IAAI,CAACjD,QAAQ,CAAC+C,cAAc,CAACN,MAAM,CAAChB,KAAK,CAAC,CAAC;EAC5C;EAEAmC,gBAAgB,CAACzB,KAAK,EAAE;IACvB,MAAMM,MAAM,GAAG,IAAI,CAACA,MAAM;IAC1B,MAAMqC,eAAe,GAAGrC,MAAM,CAACE,OAAO,CAACR,KAAK,CAACE,MAAM,CAAC;IAEpDI,MAAM,CAAClB,MAAM,CAAC,CAACC,KAAK,EAAEC,KAAK,KAAKA,KAAK,IAAIqD,eAAe,CAAC,CAACvC,OAAO,CAACf,KAAK,IAAI;MAC1EA,KAAK,CAAC4B,QAAQ,GAAG,IAAI;IACtB,CAAC,CAAC;IAEFX,MAAM,CAAC,CAAC,CAAC,CAACQ,KAAK,EAAE;IACjB,IAAI,CAACjD,QAAQ,CAAC+C,cAAc,CAACN,MAAM,CAAC,CAAC,CAAC,CAAC;EACxC;EAEAoB,eAAe,CAAC1B,KAAK,EAAE;IACtB,MAAMM,MAAM,GAAG,IAAI,CAACA,MAAM;IAC1B,MAAMqC,eAAe,GAAGrC,MAAM,CAACE,OAAO,CAACR,KAAK,CAACE,MAAM,CAAC;IAEpDI,MAAM,CAAClB,MAAM,CAAC,CAACC,KAAK,EAAEC,KAAK,KAAKA,KAAK,IAAIqD,eAAe,CAAC,CAACvC,OAAO,CAACf,KAAK,IAAI;MAC1EA,KAAK,CAAC4B,QAAQ,GAAG,IAAI;IACtB,CAAC,CAAC;IAEFX,MAAM,CAACA,MAAM,CAAC7C,MAAM,GAAG,CAAC,CAAC,CAACqD,KAAK,EAAE;IACjC,IAAI,CAACjD,QAAQ,CAAC+C,cAAc,CAACN,MAAM,CAACA,MAAM,CAAC7C,MAAM,GAAG,CAAC,CAAC,CAAC;EACxD;EAEA6E,mBAAmB,CAACM,YAAY,EAAEtC,MAAM,EAAEuC,SAAS,EAAE;IACpD,IAAI,CAACvC,MAAM,CAAC7C,MAAM,EAAE;MACnB,OAAO,CAAC,CAAC;IACV;IACA,MAAMqF,iBAAiB,GAAGxC,MAAM,CAACE,OAAO,CAACoC,YAAY,CAAC;IACtD,IAAIG,SAAS,GAAGF,SAAS,GAAIC,iBAAiB,GAAG,CAAC,GAAKA,iBAAiB,GAAG,CAAE;IAE7E,IAAIC,SAAS,IAAIzC,MAAM,CAAC7C,MAAM,EAAE;MAC/BsF,SAAS,GAAGzC,MAAM,CAAC7C,MAAM,GAAG,CAAC;IAC9B;IACA,IAAIsF,SAAS,GAAG,CAAC,EAAE;MAClBA,SAAS,GAAG,CAAC;IACd;IAEA,OAAOA,SAAS;EACjB;EAEAhB,gBAAgB,CAAC/B,KAAK,EAAE4C,YAAY,EAAEtC,MAAM,EAAEuC,SAAS,EAAE;IACxD,MAAME,SAAS,GAAG,IAAI,CAACT,mBAAmB,CAACM,YAAY,EAAEtC,MAAM,EAAEuC,SAAS,CAAC;IAE3E7C,KAAK,CAACuB,cAAc,EAAE;IAEtB,IAAIwB,SAAS,KAAK,CAAC,CAAC,EAAE;MACrB;IACD;IAEAlC,UAAU,CAAC,MAAMP,MAAM,CAACyC,SAAS,CAAC,CAACjC,KAAK,EAAE,EAAE,CAAC,CAAC;IAE9C,IAAI,CAAC2B,cAAc,CAACnC,MAAM,CAACyC,SAAS,CAAC,CAAC;IACtC,IAAI,CAAClF,QAAQ,CAAC+C,cAAc,CAACN,MAAM,CAACyC,SAAS,CAAC,CAAC;EAChD;EAEAf,iBAAiB,CAACY,YAAY,EAAEtC,MAAM,EAAEuC,SAAS,EAAE;IAClD,MAAMC,iBAAiB,GAAGxC,MAAM,CAACE,OAAO,CAACoC,YAAY,CAAC;IACtD,MAAMG,SAAS,GAAGF,SAAS,GAAIC,iBAAiB,GAAG,CAAC,GAAKA,iBAAiB,GAAG,CAAE;IAE/E,IAAIC,SAAS,KAAK,CAAC,CAAC,IAAIA,SAAS,KAAKzC,MAAM,CAAC7C,MAAM,EAAE;MACpD;IACD;IAEAmF,YAAY,CAAC3B,QAAQ,GAAG,IAAI;IAC5BX,MAAM,CAACyC,SAAS,CAAC,CAAC9B,QAAQ,GAAG,IAAI;IACjCJ,UAAU,CAAC,MAAMP,MAAM,CAACyC,SAAS,CAAC,CAACjC,KAAK,EAAE,EAAE,CAAC,CAAC;IAE9C,IAAI,CAAC2B,cAAc,CAACnC,MAAM,CAACyC,SAAS,CAAC,CAAC;IACtC,IAAI,CAAClF,QAAQ,CAAC+C,cAAc,CAACN,MAAM,CAACyC,SAAS,CAAC,CAAC;EAChD;EAEAC,MAAM,CAAChD,KAAK,EAAE;IACb,IAAI,CAACwB,qBAAqB,CAACxB,KAAK,CAAC;EAClC;EAEAiD,YAAY,CAACjD,KAAK,EAAE;IACnB,IAAI,CAACnC,QAAQ,CAAC+C,cAAc,CAACZ,KAAK,CAACE,MAAM,CAAC;IAC1C,IAAI,CAACuC,cAAc,CAACzC,KAAK,CAACE,MAAM,CAAC;EAClC;EAEAkC,qBAAqB,CAAC9B,MAAM,EAAE;IAC7B,IAAI,CAACA,MAAM,IAAI,CAACA,MAAM,CAAC7C,MAAM,EAAE;MAC9B;IACD;IAEA,MAAMyF,iBAAiB,GAAG5C,MAAM,CAAC6C,KAAK,CAAC9D,KAAK,IAAIA,KAAK,CAAC4B,QAAQ,CAAC;IAC/DX,MAAM,CAACF,OAAO,CAACf,KAAK,IAAI;MAAEA,KAAK,CAAC4B,QAAQ,GAAG,CAACiC,iBAAiB;IAAE,CAAC,CAAC;EAClE;EAEA1B,qBAAqB,CAACxB,KAAK,EAAsB;IAAA,IAApBoD,WAAW,uEAAG,IAAI;IAC9C,IAAIpD,KAAK,CAACE,MAAM,CAACmD,YAAY,CAAC,WAAW,CAAC,EAAE;MAC3C,MAAMC,cAAc,GAAGF,WAAW,GAAG,IAAI,CAAClE,OAAO,GAAG,CAACc,KAAK,CAACE,MAAM,CAAC;MAElEoD,cAAc,CAAClD,OAAO,CAACf,KAAK,IAAI;QAC/B,IAAIA,KAAK,KAAKW,KAAK,CAACE,MAAM,EAAE;UAC3Bb,KAAK,CAAC4B,QAAQ,GAAG,KAAK;QACvB;MACD,CAAC,CAAC;IACH;EACD;EAEAsC,cAAc,CAACC,YAAY,EAAElD,MAAM,EAAE;IACpC,MAAMmD,WAAW,GAAGnD,MAAM,CAAClB,MAAM,CAACC,KAAK,IAAIA,KAAK,CAAC4B,QAAQ,CAAC,CAACyC,GAAG,CAACrE,KAAK,IAAIA,KAAK,CAACsE,IAAI,CAAC,CAACC,IAAI,CAAC,MAAM,CAAC;;IAEhG;IACA,MAAMC,cAAc,GAAG7D,KAAK,IAAI;MAC/B,IAAIA,KAAK,CAAC8D,aAAa,EAAE;QACxB9D,KAAK,CAAC8D,aAAa,CAACC,OAAO,CAAC,YAAY,EAAEN,WAAW,CAAC;MACvD,CAAC,MAAM;QACNzD,KAAK,CAACgE,aAAa,CAACF,aAAa,CAACC,OAAO,CAAC,YAAY,EAAEN,WAAW,CAAC;MACrE;MAEAzD,KAAK,CAACuB,cAAc,EAAE;IACvB,CAAC;IAED0C,QAAQ,CAACC,gBAAgB,CAACV,YAAY,EAAEK,cAAc,CAAC;IACvDI,QAAQ,CAACE,WAAW,CAACX,YAAY,CAAC;IAClCS,QAAQ,CAACG,mBAAmB,CAACZ,YAAY,EAAEK,cAAc,CAAC;EAC3D;;EAEA;AACD;AACA;AACA;AACA;EACC/D,aAAa,GAAG;IACf,IAAI,IAAI,CAAC7B,iBAAiB,CAACuB,eAAe,EAAE;MAC3C,IAAI,CAACvB,iBAAiB,CAACoG,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;IACtC;EACD;;EAEA;AACD;AACA;AACA;AACA;EACCxE,WAAW,GAAG;IACb,MAAMyE,4BAA4B,GAAG,IAAI,CAAC5E,kBAAkB,KAAK,IAAI,CAAC6E,YAAY,KAAK,KAAK,GAAG,IAAI,CAAC7E,kBAAkB,CAACE,WAAW,GAAG,CAAC,IAAI,CAACF,kBAAkB,CAACE,WAAW,CAAC;IAC1K,IAAI,IAAI,CAAC3B,iBAAiB,CAACuB,eAAe,EAAE;MAC3C,IAAI,CAACvB,iBAAiB,CAACoG,QAAQ,CAACC,4BAA4B,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;IACxE;EACD;;EAEA;AACD;AACA;AACA;AACA;EACC7B,cAAc,CAACpD,KAAK,EAAE;IACrB,IAAI,CAAC,IAAI,CAACK,kBAAkB,EAAE;MAC7B;IACD;IAEA,MAAM8E,SAAS,GAAGnF,KAAK,CAACoF,qBAAqB,EAAE;IAC/C,MAAMC,kBAAkB,GAAG,IAAI,CAAChF,kBAAkB,CAAC+E,qBAAqB,EAAE;IAE1E,IAAID,SAAS,CAACG,IAAI,GAAGD,kBAAkB,CAACC,IAAI,EAAE;MAC7C,IAAI,CAAC1G,iBAAiB,CAACoG,QAAQ,CAAC,IAAI,CAAC3E,kBAAkB,CAACkF,UAAU,IAAIF,kBAAkB,CAACC,IAAI,GAAGH,SAAS,CAACG,IAAI,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IACxH,CAAC,MAAM,IAAIH,SAAS,CAACK,KAAK,GAAGH,kBAAkB,CAACG,KAAK,EAAE;MACtD,IAAI,CAAC5G,iBAAiB,CAACoG,QAAQ,CAAC,IAAI,CAAC3E,kBAAkB,CAACkF,UAAU,IAAIJ,SAAS,CAACK,KAAK,GAAGH,kBAAkB,CAACG,KAAK,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IAC1H;EACD;EAEA,MAAMC,gBAAgB,GAAG;IACxB,MAAMzG,OAAO,GAAG,MAAM,IAAI,CAACC,UAAU,EAAE;IAEvCD,OAAO,CAACE,KAAK,EAAE;EAChB;EAEA,IAAIwG,UAAU,GAAG;IAChB,OAAO7H,SAAS,CAAC8H,UAAU,CAACC,OAAO,CAAClK,2BAA2B,EAAE,IAAI,CAAC+B,WAAW,CAAC;EACnF;EAEA,IAAIoI,SAAS,GAAG;IACf,OAAO,CAAC,IAAI,CAAC3I,QAAQ,IAAI,IAAI,CAACH,QAAQ,IAAI,IAAI,CAACoB,eAAe,CAACC,MAAM;EACtE;EAEA,IAAI0H,UAAU,GAAG;IAChB,OAAO,IAAI,CAACzG,UAAU,CAACC,aAAa,CAAC,yBAAyB,CAAC;EAChE;EAEA,IAAIe,kBAAkB,GAAG;IACxB,OAAO,IAAI,CAAChB,UAAU,CAACC,aAAa,CAAC,kCAAkC,CAAC;EACzE;EAEA,IAAIc,gBAAgB,GAAG;IACtB,OAAO,IAAI,CAACf,UAAU,CAACC,aAAa,CAAC,+BAA+B,CAAC;EACtE;EAEA,IAAIyG,cAAc,GAAG;IACpB,OAAOlI,SAAS,CAAC8H,UAAU,CAACC,OAAO,CAACjK,oBAAoB,CAAC;EAC1D;EAEA,IAAIqK,gBAAgB,GAAG;IACtB,OAAOnI,SAAS,CAAC8H,UAAU,CAACC,OAAO,CAAChK,wBAAwB,CAAC;EAC9D;EAEA,IAAIuC,eAAe,GAAG;IACrB,IAAI,CAAC,IAAI,CAAC2H,UAAU,EAAE;MACrB,OAAO,EAAE;IACV;;IAEA;IACA;IACA;IACA,IAAI,CAAC/G,UAAU,EAAE,CAACgC,OAAO,CAACf,KAAK,IAAI;MAClCA,KAAK,CAACiG,SAAS,GAAG,KAAK;IACxB,CAAC,CAAC;IAEF,OAAO,IAAI,CAAClH,UAAU,EAAE,CAACgB,MAAM,CAACC,KAAK,IAAI;MACxC,MAAMkG,UAAU,GAAG,IAAI,CAACJ,UAAU,CAACV,qBAAqB,EAAE;MAC1D,MAAMD,SAAS,GAAGnF,KAAK,CAACoF,qBAAqB,EAAE;MAC/C,MAAMe,QAAQ,GAAGC,QAAQ,CAACjB,SAAS,CAACK,KAAK,CAAC;MAC1C,MAAMa,SAAS,GAAGD,QAAQ,CAACF,UAAU,CAACV,KAAK,CAAC;MAC5C,MAAMc,UAAU,GAAGF,QAAQ,CAACjB,SAAS,CAACG,IAAI,CAAC;MAC3C,MAAMiB,WAAW,GAAGH,QAAQ,CAACF,UAAU,CAACZ,IAAI,CAAC;MAE7CtF,KAAK,CAACiG,SAAS,GAAG,CAAC,IAAI,CAAC/I,QAAQ,KAAMoJ,UAAU,GAAGC,WAAW,IAAMJ,QAAQ,GAAGE,SAAU,CAAC;MAE1F,OAAOrG,KAAK,CAACiG,SAAS;IACvB,CAAC,CAAC;EACH;EAEA,IAAIO,aAAa,GAAG;IACnB,OAAO,IAAI,CAAClJ,UAAU,KAAKpC,UAAU,CAACsC,IAAI,IAAI,IAAI,CAACF,UAAU,KAAKpC,UAAU,CAACuL,OAAO;EACrF;EAEA,IAAIC,qBAAqB,GAAG;IAC3B,OAAO,IAAI,CAAC9G,eAAe,CAAC,mBAAmB,CAAC,CAACyE,GAAG,CAACsC,EAAE,IAAIA,EAAE,CAACC,SAAS,CAAC,IAAI,CAAC,CAAC;EAC/E;;EAEA;AACD;AACA;EACE,IAAIC,sBAAsB,GAAG;IAC7B,MAAMC,iBAAiB,GAAG;MACzBC,KAAK,EAAE,OAAO;MACdC,OAAO,EAAE,OAAO;MAChBP,OAAO,EAAE,aAAa;MACtBQ,WAAW,EAAE;IACd,CAAC;IAED,OAAO,IAAI,CAAC3J,UAAU,KAAKpC,UAAU,CAACsC,IAAI,GAAGsJ,iBAAiB,CAAC,IAAI,CAACxJ,UAAU,CAAC,GAAG,EAAE;EACrF;EAEA,IAAI4J,QAAQ,GAAG;IACd,OAAOjM,OAAO,EAAE;EACjB;EAEA,IAAI6F,eAAe,GAAG;IACrB,OAAO,IAAI,CAAC/B,UAAU,EAAE,CAACgB,MAAM,CAACC,KAAK,IAAIA,KAAK,CAAC4B,QAAQ,CAAC;EACzD;EAEA,IAAIuF,OAAO,GAAG;IACb,OAAO;MACNC,OAAO,EAAE;QACR,oBAAoB,EAAE,IAAI;QAC1B,8BAA8B,EAAE,IAAI,CAACrK,QAAQ;QAC7C,0BAA0B,EAAE,CAAC,IAAI,CAACgC,UAAU,EAAE,CAACX;MAChD,CAAC;MACDiJ,OAAO,EAAE;QACR,wBAAwB,EAAE,IAAI;QAC9B,iCAAiC,EAAE,CAAC,IAAI,CAACxB,SAAS;QAClD,8BAA8B,EAAE,IAAI,CAACA;MACtC,CAAC;MACDyB,iBAAiB,EAAE;QAClB,4BAA4B,EAAE,IAAI;QAClC,+BAA+B,EAAE,IAAI,CAACxI,WAAW;QACjD,gCAAgC,EAAE,IAAI,CAACxB,UAAU,KAAKpC,UAAU,CAACuL,OAAO;QACxE,8BAA8B,EAAE,IAAI,CAACnJ,UAAU,KAAKpC,UAAU,CAAC6L,KAAK;QACpE,gCAAgC,EAAE,IAAI,CAACzJ,UAAU,KAAKpC,UAAU,CAAC8L,OAAO;QACxE,oCAAoC,EAAE,IAAI,CAAC1J,UAAU,KAAKpC,UAAU,CAAC+L;MACtE;IACD,CAAC;EACF;EAEA,IAAIjL,MAAM,GAAG;IACZ,OAAO;MACNgD,OAAO,EAAE;QACR,WAAW,EAAG,GAAE,IAAI,CAAC3B,eAAgB;MACtC,CAAC;MACDkK,wBAAwB,EAAE;QACzB,OAAO,EAAEtM,OAAO,EAAE,GAAG,MAAM,GAAI,GAAE,IAAI,CAACoC,eAAgB,IAAG;QACzD,YAAY,EAAE;MACf,CAAC;MACDmK,aAAa,EAAE;QACd,YAAY,EAAE;MACf,CAAC;MACDC,kBAAkB,EAAE;QACnB,iBAAiB,EAAE;MACpB;IACD,CAAC;EACF;EAEAC,gBAAgB,GAAG;IAClB,MAAMC,WAAW,GAAG,IAAI,CAAC5I,UAAU,EAAE,CAACX,MAAM;IAE5C,IAAIuJ,WAAW,KAAK,CAAC,EAAE;MACtB,OAAO9J,SAAS,CAAC8H,UAAU,CAACC,OAAO,CAAC/J,4BAA4B,CAAC;IAClE;IAEA,IAAI8L,WAAW,KAAK,CAAC,EAAE;MACtB,OAAO9J,SAAS,CAAC8H,UAAU,CAACC,OAAO,CAAC9J,gCAAgC,CAAC;IACtE;IAEA,OAAO+B,SAAS,CAAC8H,UAAU,CAACC,OAAO,CAAC7J,qCAAqC,EAAE4L,WAAW,CAAC;EACxF;;EAEA;AACD;AACA;EACCC,eAAe,GAAG;IACjB,IAAI,IAAI,CAAC3G,MAAM,CAAC7C,MAAM,KAAK,CAAC,EAAE;MAC7B;IACD;IAEA,MAAMyJ,SAAS,GAAG,IAAI,CAAC5G,MAAM,CAAC,IAAI,CAACA,MAAM,CAAC7C,MAAM,GAAG,CAAC,CAAC;IACrDyJ,SAAS,CAACpG,KAAK,EAAE;IACjB,IAAI,CAACjD,QAAQ,CAAC+C,cAAc,CAACsG,SAAS,CAAC;EACxC;EAEA,WAAWC,YAAY,GAAG;IACzB,OAAO,CACN3M,iBAAiB,EACjBC,IAAI,EACJG,gBAAgB,EAChBF,KAAK,EACLC,MAAM,CACN;EACF;EAEA,aAAayM,QAAQ,GAAG;IACvBlK,SAAS,CAAC8H,UAAU,GAAG,MAAMlM,aAAa,CAAC,oBAAoB,CAAC;EACjE;EAEA,MAAMwF,UAAU,GAAG;IAClB,OAAO,CAAC,MAAM,IAAI,CAAC+I,uBAAuB,EAAE,EAAE1I,aAAa,CAAC,0BAA0B,CAAC;EACxF;AACD;AAEAzB,SAAS,CAACoK,MAAM,EAAE;AAElB,eAAepK,SAAS"},"metadata":{},"sourceType":"module"}